<!DOCTYPE html>
<html>
  <head>
    <title>source file</title>
  </head>
  <style type="text/css">
      body {
          font-family: sans-serif;
          margin-left: 8pt;
          margin-right: 8pt;
          width: 98%;
          position: relative;
      }
      p {
          margin-top: 8pt;
      }
      table {
           width: 100%;
           border-top: 1px solid black;
           border-spacing: 0;
           border-collapse: collapse;
           border-left: 1px solid black;
      }
      table.toc th {
           background-color: aqua;
           padding: 3pt;
      }
      table.toc td {
           padding: 2pt;
      }
      table td, table th {
           border-bottom: 1px solid black;
           border-right: 1px solid black;
      }
      td.toc_entry_name {
           text-align: left;
      }
      table.summary th {
           background-color: aqua;
      }
      table.summary td {
           font-family: monospace;
      }
      *.code {
           font-family: monospace;
           white-space: pre;
      }
      span.metric_low {
      }
      span.metric_medium {
           font-style: italic;
      }
      span.metric_high {
           font-weight: bold;
      }
      td.metric_low, td.metric_medium, td.metric_high {
           text-align: right;
      }
      td.metric_low {
      }
      td.metric_medium {
          background-color: yellow;
      }
      td.metric_high {
          background-color: red;
      }
      a {
          text-decoration: none;
      }
      a:visited {
          color: purple;
      }
      a:hover {
          color: red;
      }
      *.label {
          background-color: #eee;
      }
      li p {
          margin-top: 2pt;
          margin-bottom: 4pt;
          padding-left: 10pt;
      }
      div.tooltip {
          display: none;
          position: fixed;
          border: 1px solid black;
          background-color: #ddffdd;
          width: 300px;
          z-index: 2;
          font-size: smaller;
          padding: 5pt;
          text-align: justify;
      }
      div.stickyHead {
         display: none;
         width: 98%;
         position: fixed;
         top: 0pt;
         z-index: 1;
      }
      div.ttname {
          font-weight: bold;
          margin-bottom: 5pt;
      }
      #debug {
          border: 1px solid black;
          background-color: red;
          position: fixed;
          top: 100pt;
          padding: 8pt;
          width: 80%;
          display: none;
      }
  </style>
  <body>
  <div id="debug"></div>
  <script type="text/javascript">
     window.g_Glossary = {}; // list of objects with name, description attributes for use in tooltips

     function GetText(elem) {
         var ret = "";
         for (var cld = elem.firstChild; cld != null; cld = cld.nextSibling) {
             switch (cld.nodeType) {
             case 1: ret += GetText(cld); break;
             case 3: ret += cld.nodeValue; break;
             }
         }
         return ret.trim();
     }
     function GetElementPosition(elem) {
         // return element position in page coords
         var ret = { left: 0, top: 0 };
         while (elem != null && elem != undefined) {
             ret.left += elem.offsetLeft;
             ret.top  += elem.offsetTop;
             elem = elem.offsetParent;
         }
         return ret;
     }
     function SetupTooltip(elem, description) {
         var div = document.createElement("div");
         div.className = "tooltip";
         div.innerHTML = "<div class=\"ttname\">" + description.name + "</div>\n<div class=\"ttdescr\">" + description.description + "</div>";
         document.body.appendChild(div);
         elem.addEventListener("mousemove", function(ev) {
             div.style.display = "block";
             div.style.top = (ev.clientY + 5) + "px";
             div.style.left = (ev.clientX - 305) + "px";
         });
         elem.addEventListener("mouseout", function(ev) {
             div.style.display = "none";
         });
     }
     // Expect a th here. Assign a callback to it on-click such that it sorts all the rows in the table body
     // according to the th.cellIndex'th element of the row.
     function GetParentWithName(elem, name) {
         var ret = elem;
         while (ret != null && ret.nodeName.match(name) == null)
             ret = ret.parentNode;
         return ret;
     }
     function GetTableRows(elemInTable) {
         var ret = [];
         var tbody = GetParentWithName(elemInTable, /table/i);
         // Sticky head support: Use original table if present
         if (tbody.Original)
             tbody = tbody.Original;
         for (tbody = tbody.firstChild; tbody != null && tbody.nodeName.match(/tbody/i) == null; tbody = tbody.nextSibling);
         for (var tr = tbody.firstChild; tr != null; tr = tr.nextSibling) {
             if (tr.nodeName.match(/tr/i))
                 ret.push(tr);
         }
         return { 'tbody': tbody, 'rows': ret };
     }
     function GetColumn(elem) {
         /* FIXME I think you can still foil this with some pathlogical layouts - like staggering
            multi-row squares in a stair-step pattern. Not intending to do that today, though. */
         var column = 0, rowInd = 1;
         for (var cell = elem.previousSibling; cell != null; cell = cell.previousSibling) {
             if (cell.nodeType == 1)
                 column += cell.colSpan;
         }
         for (var row = elem.parentNode.previousSibling; row != null; row = row.previousSibling) {
             if (row.nodeType != 1)
                 continue;
             var colInd = 0, insertCols = 0;
             for (var cell = row.firstChild; cell != null && colInd <= column; cell = cell.nextSibling) {
                 if (cell.nodeType != 1)
                     continue;
                 if (cell != elem && cell.rowSpan - rowInd > 0 /* this element contributes to this column offset */)
                     insertCols += cell.colSpan;
                 colInd += cell.colSpan;
             }
             column += insertCols;
             rowInd += 1;
         }
         return column;
     }
     function SetupSortColumn(elem) {
         elem.firstChild.addEventListener("click", function(ev) {
             var z = GetTableRows(elem);
             var column = GetColumn(elem);
             elem.SortDescending = (elem.SortDescending ? false : true);
             z.rows.sort(function(a, b) {
                 var ret = 0;
                 var a_text = GetText(a.cells[column]);
                 var b_text = GetText(b.cells[column]);
                 var a_num = parseFloat(a_text);
                 var b_num = parseFloat(b_text);
                 if (isNaN(a_num) && isNaN(b_num))
                     ret = (a_text > b_text) ?  1 :
                           (a_text < b_text) ? -1 :
                           (a_text >= b_text) ? 1 :
                           -1;
                 else if (isNaN(a_num))
                     ret = -1;
                 else if (isNaN(b_num))
                     ret =  1;
                 else
                     ret = a_num - b_num;
                 // tiebreakers
                 return elem.SortDescending ? -ret : ret;
             });
             for (var k = 0; k < z.rows.length; ++k)
                 z.tbody.removeChild(z.rows[k]);
             for (var k = 0; k < z.rows.length; ++k)
                 z.tbody.appendChild(z.rows[k]);
         });
     }
     function GetScrollOffset() {
         return (!isNaN(window.pageYOffset)) ? { 'X': window.pageXOffset,       'Y': window.pageYOffset } :
                                               { 'X': document.body.scrollLeft, 'Y': document.body.scrollTop };
     }
     function StickyHead(table, thead) {
         if (table.Original)
             return;
         var dupl = thead.cloneNode(true);
         var div = document.createElement("div");
         div.className = "stickyHead";
         var newTable = table.cloneNode(false);
         newTable.Original = table;
         div.appendChild(newTable);
         newTable.appendChild(dupl);
         document.body.appendChild(div);
         window.addEventListener("scroll", function() {
             var headPos = GetElementPosition(thead);
             var bodyPos = GetElementPosition(table);
             var scrolly = GetScrollOffset().Y;
             if (headPos.top < scrolly && bodyPos.top + table.scrollHeight > scrolly) {
                 div.style.display = "block";
             } else {
                 div.style.display = "none";
             }
         });
     }
     function EnhanceTable(table) {
         var headerNodes = table.getElementsByTagName("th");
         for(var k = 0; k < headerNodes.length; ++k) {
             var th = headerNodes[k];
             var possibleAbbr = GetText(th);
             if (th.className.indexOf("sortable") != -1)
                 SetupSortColumn(th, th);
             if (possibleAbbr in window.g_Glossary)
                 SetupTooltip(th, window.g_Glossary[possibleAbbr]);
         }
         headerNodes = table.getElementsByTagName("thead");
         for (var k = 0; k < headerNodes.length; ++k) {
             var thead = headerNodes[k];
             StickyHead(table, thead);
         }
     }

     window.addEventListener("load", function() {
         var tables = document.getElementsByTagName("table");
         for (var k = 0; k < tables.length; ++k) {
             var table = tables[k];
             if (table.className.indexOf("summary") != -1)
                 EnhanceTable(table);
         }
     });
  </script>
<script type="text/javascript">  window.g_Glossary['NOM'] = {  name: 'Number of modules',   description: 'Number of non-trivial modules identified by the analyser.  Non-trivial modules include all classes, and any other module for which member functions are identified.' };
  window.g_Glossary['LOC'] = {  name: 'Lines of Code',   description: 'Number of non-blank, non-comment lines of source code counted by the analyser.' };
  window.g_Glossary['COM'] = {  name: 'Lines of Comments',   description: 'Number of lines of comment identified by the analyser' };
  window.g_Glossary['MVG'] = {  name: 'McCabe\'s Cyclomatic Complexity',   description: 'A measure of the decision complexity of the functions which make up the program.The strict definition of this measure is that it is the number of linearly independent routes through a directed acyclic graph which maps the flow of control of a subprogram.  The analyser counts this by recording the number of distinct decision outcomes contained within each function, which yields a good approximation to the formally defined version of the measure.' };
  window.g_Glossary['L_C'] = {  name: 'Lines of code per line of comment',   description: 'Indicates density of comments with respect to textual size of program' };
  window.g_Glossary['M_C'] = {  name: 'Cyclomatic Complexity per line of comment',   description: 'Indicates density of comments with respect to logical complexity of program' };
  window.g_Glossary['IF4'] = {  name: 'Information Flow measure',   description: 'Measure of information flow between modules suggested by Henry and Kafura. The analyser makes an approximate count of this by counting inter-module couplings identified in the module interfaces.' };
  window.g_Glossary['LOCpM'] = {  name: 'Lines of Code per Method',   description: 'The average number of lines of code per method. High LoC count may indicate poor functional isolation. Note that this measure may be weighted low by large numbers of small accessor methods.' };
  window.g_Glossary['MLOCpM'] = {  name: 'Max Lines of Code per Method',   description: 'The largest number of lines of code in a single method. High LoC count may indicate poor functional isolation.' };
  window.g_Glossary['WMC1'] = {  name: 'Weighted methods per class (all)',   description: 'The sum of a weighting function over the functions of the module. WMC1 uses the nominal weight of 1 for each function, and hence measures the number of functions.' };
  window.g_Glossary['WMCv'] = {  name: 'Weighted methods per class (visible)',   description: 'The sum of a weighting function over the functions of the module. WMCv uses a weighting function which is 1 for functions accessible to other modules, 0 for private functions.' };
  window.g_Glossary['DIT'] = {  name: 'Depth of inheritance tree',   description: 'The length of the longest path of inheritance ending at the current module.  The deeper the inheritance tree for a module, the harder it may be to predict its behaviour.  On the other hand, increasing depth gives the potential of greater reuse by the current module of behaviour defined for ancestor classes.' };
  window.g_Glossary['NOC'] = {  name: 'Number of children',   description: 'The number of modules which inherit directly from the current module.  Moderate values of this measure indicate scope for reuse, however high values may indicate an inappropriate abstraction in the design.' };
  window.g_Glossary['CBO'] = {  name: 'Coupling between objects',   description: 'The number of other modules which are coupled to the current module either as a client or a supplier. Excessive coupling indicates weakness of module encapsulation and may inhibit reuse.' };
  window.g_Glossary['Fan-in'] = {  name: 'Fan-in',   description: 'The number of other modules which pass information into the current module.' };
  window.g_Glossary['Fan-out'] = {  name: 'Fan-out',   description: 'The number of other modules into which the current module passes information' };
  window.g_Glossary['IF4'] = {  name: 'Information Flow measure',   description: 'A composite measure of structural complexity, calculated as the square of the product of the fan-in and fan-out of a single module.  Proposed by Henry and Kafura.' };
</script>
<a name="./cccc/cccc_db.cc"></a><h1>./cccc/cccc_db.cc</h1>
<div class="code"><a name="./cccc/cccc_db.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          #include "cccc.h"
</div>
<div class="code">          #include &lt;fstream&gt;
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include "cccc_db.h"
</div>
<div class="code">          
</div>
<div class="code">          CCCC_Project *current_loading_project=NULL;
</div>
<div class="code">          CCCC_Module  *current_loading_module=NULL;
</div>
<div class="code">          CCCC_Member  *current_loading_extent=NULL;
</div>
<div class="code">          CCCC_UseRelationship *current_loading_userel=NULL;
</div>
<div class="code">          
</div>
<div class="code">          #define LINE_BUFFER_SIZE  1000
</div>
<div class="code">          
</div>
<div class="code">          int ifstr_line;
</div>
<div class="code">          
</div>
<div class="code">          extern CCCC_Project *prj;
</div>
<div class="code">          
</div>
<div class="code">          // the file scope variable last_supplier is used to supress repeated
</div>
<div class="code">          // output of the supplier name in the use relationship section where
</div>
<div class="code">          // the current record has the same supplier as the previous one
</div>
<div class="code">          // the indentation makes this reasonably clear
</div>
<div class="code">          static string last_supplier="";
</div>
<div class="code">          
</div>
<div class="code">          // persistence facilities
</div>
<div class="code">          
</div>
<div class="code">          #define SEP '@'
</div>
<div class="code">          
</div>
<div class="code">          // This function provides the ability for the persistence functions
</div>
<div class="code">          // defined below to do a quick peek at the first token on the stream
</div>
<div class="code">          // leaving the get pointer at the start of that token. 
</div>
<div class="code">          // This should be static, &nbsp; but on MSVC++ this gives me an unresolved 
</div>
<div class="code">          // symbol at link.
</div>
<div class="code"><a name="./cccc/cccc_db.cc:00000051"></a>      51  bool PeekAtNextLinePrefix( &nbsp;ifstream&amp; ifstr, &nbsp; string pfx&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            bool retval=false;
</div>
<div class="code">            char prefix_buffer[1024];
</div>
<div class="code">            size_t initial_stream_pos=ifstr.tellg( &nbsp;&nbsp;);
</div>
<div class="code">            ifstr.getline( &nbsp;prefix_buffer, &nbsp;1023, &nbsp;SEP&nbsp;);
</div>
<div class="code">            if( &nbsp;pfx==prefix_buffer&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval=true;
</div>
<div class="code">              }
</div>
<div class="code">            ifstr.seekg( &nbsp;initial_stream_pos&nbsp;);
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          // this is a sort of abstract junkyard function ( &nbsp;cf Abstract Factory&nbsp;)
</div>
<div class="code"><a name="./cccc/cccc_db.cc:00000066"></a>      66  template &lt;class T&gt; void DisposeOfImportRecord( &nbsp;T *record_ptr, &nbsp; int fromfile_status&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            switch( &nbsp;fromfile_status&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">              case RECORD_ADDED:
</div>
<div class="code">                // the newly created object has been added to the
</div>
<div class="code">                // database
</div>
<div class="code">                // we must not delete it
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case RECORD_TRANSCRIBED:
</div>
<div class="code">                // the database already had an object for this item
</div>
<div class="code">                // the content of the new object was merged in, &nbsp; but the object
</div>
<div class="code">                // itself is no longer required
</div>
<div class="code">                delete record_ptr;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              default:
</div>
<div class="code">                // something went wrong, &nbsp; so we mention it
</div>
<div class="code">                cerr &lt;&lt; "Import error " &lt;&lt; fromfile_status 
</div>
<div class="code">          	   &lt;&lt; " at line " &lt;&lt; ifstr_line 
</div>
<div class="code">          	   &lt;&lt; " for " &lt;&lt; record_ptr-&gt;key( &nbsp;&nbsp;)
</div>
<div class="code">          	   &lt;&lt; endl;
</div>
<div class="code">                delete record_ptr;
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          // when we add a record to, &nbsp; for example, &nbsp; the extent table for a member of
</div>
<div class="code">          // a module, &nbsp; we need to merge the information in the new extent
</div>
<div class="code">          // with what is already known
</div>
<div class="code">          // there are two kinds of merge:
</div>
<div class="code">          // 1. ordinary fields like module_type should either be consistent or 
</div>
<div class="code">          // blank for all extents relating to the same module, &nbsp; so where the old 
</div>
<div class="code">          // field is blank, &nbsp; we overwrite with the new field
</div>
<div class="code">          // 2. the flags field in CCCC_Member contains a variety of single character
</div>
<div class="code">          // flags giving the visibility, &nbsp; constness, &nbsp; etc. of the member, &nbsp; with '?' being
</div>
<div class="code">          // used to reflect a state of lack of knowledge: in these cases, &nbsp; any other
</div>
<div class="code">          // value can overwrite '?', &nbsp; all other values do not change. 
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_db.cc:00000105"></a>     105  void Resolve_Fields( &nbsp;string&amp; field1, &nbsp; string&amp; field2&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            if( &nbsp;field1.size( &nbsp;&nbsp;)==0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                field1=field2;
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          template 
</div>
<div class="code">          void 
</div>
<div class="code"><a name="./cccc/cccc_db.cc:00000115"></a>     115  DisposeOfImportRecord( &nbsp;CCCC_Module *record_ptr, &nbsp; int fromfile_status&nbsp;); 
</div>
<div class="code">          
</div>
<div class="code">          template 
</div>
<div class="code">          void 
</div>
<div class="code"><a name="./cccc/cccc_db.cc:00000119"></a>     119  DisposeOfImportRecord( &nbsp;CCCC_Member *record_ptr, &nbsp; int fromfile_status&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          template 
</div>
<div class="code">          void 
</div>
<div class="code"><a name="./cccc/cccc_db.cc:00000123"></a>     123  DisposeOfImportRecord( &nbsp;CCCC_UseRelationship *record_ptr, &nbsp; int fromfile_status&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          template 
</div>
<div class="code">          void 
</div>
<div class="code"><a name="./cccc/cccc_db.cc:00000127"></a>     127  DisposeOfImportRecord( &nbsp;CCCC_Extent *record_ptr, &nbsp; int fromfile_status&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./cccc/cccc_ext.cc"></a><h1>./cccc/cccc_ext.cc</h1>
<div class="code"><a name="./cccc/cccc_ext.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          /*
</div>
<div class="code">           * cccc_ext.cc
</div>
<div class="code">           */
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include "cccc_ext.h"
</div>
<div class="code">          #include "cccc_db.h"
</div>
<div class="code">          #include "cccc_utl.h"
</div>
<div class="code">          
</div>
<div class="code">          unsigned int CCCC_Extent::nextkey=0;
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_ext.cc:00000030"></a>      30  CCCC_Extent::CCCC_Extent( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            v=vINVALID;
</div>
<div class="code">            ut=utINVALID;
</div>
<div class="code">            extkey=++nextkey;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_ext.cc:00000037"></a>      37  CCCC_Extent::CCCC_Extent( &nbsp;CCCC_Item&amp; is&nbsp;) 
</div>
<div class="code">          {
</div>
<div class="code">            char v_as_char='!', &nbsp; ut_as_char='!';
</div>
<div class="code">           
</div>
<div class="code">            if( &nbsp;
</div>
<div class="code">               is.Extract( &nbsp;filename&nbsp;) &amp;&amp;
</div>
<div class="code">               is.Extract( &nbsp;linenumber&nbsp;) &amp;&amp;
</div>
<div class="code">               is.Extract( &nbsp;description&nbsp;) &amp;&amp;
</div>
<div class="code">               is.Extract( &nbsp;flags&nbsp;) &amp;&amp;
</div>
<div class="code">               is.Extract( &nbsp;count_buffer&nbsp;) &amp;&amp;
</div>
<div class="code">               is.Extract( &nbsp;v_as_char&nbsp;) &amp;&amp;
</div>
<div class="code">               is.Extract( &nbsp;ut_as_char&nbsp;)
</div>
<div class="code">               &nbsp;) 
</div>
<div class="code">              {
</div>
<div class="code">                v=( &nbsp;Visibility&nbsp;) v_as_char;
</div>
<div class="code">                ut=( &nbsp;UseType&nbsp;) ut_as_char;
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                // we can trust the string constructor to give us empty strings, &nbsp;
</div>
<div class="code">                // but we need to initialise these
</div>
<div class="code">                v=vDONTKNOW;
</div>
<div class="code">                ut=utDONTKNOW;
</div>
<div class="code">              }
</div>
<div class="code">            extkey=++nextkey;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_ext.cc:00000064"></a>      64  int CCCC_Extent::AddToItem( &nbsp;CCCC_Item&amp; item&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval=FALSE;
</div>
<div class="code">            
</div>
<div class="code">            if( &nbsp;
</div>
<div class="code">               item.Insert( &nbsp;filename&nbsp;) &amp;&amp;
</div>
<div class="code">               item.Insert( &nbsp;linenumber&nbsp;) &amp;&amp;
</div>
<div class="code">               item.Insert( &nbsp;description&nbsp;) &amp;&amp;
</div>
<div class="code">               item.Insert( &nbsp;flags&nbsp;) &amp;&amp;
</div>
<div class="code">               item.Insert( &nbsp;count_buffer&nbsp;) &amp;&amp;
</div>
<div class="code">               item.Insert( &nbsp;( &nbsp;char&nbsp;) v&nbsp;) &amp;&amp;
</div>
<div class="code">               item.Insert( &nbsp;( &nbsp;char&nbsp;) ut&nbsp;)
</div>
<div class="code">               &nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval=TRUE;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_ext.cc:00000084"></a>      84  int CCCC_Extent::GetFromItem( &nbsp;CCCC_Item &amp;item&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval=FALSE;
</div>
<div class="code">            char v_as_char, &nbsp; ut_as_char;
</div>
<div class="code">            if( &nbsp;
</div>
<div class="code">               item.Extract( &nbsp;filename&nbsp;) &amp;&amp;
</div>
<div class="code">               item.Extract( &nbsp;linenumber&nbsp;) &amp;&amp;
</div>
<div class="code">               item.Extract( &nbsp;description&nbsp;) &amp;&amp;
</div>
<div class="code">               item.Extract( &nbsp;flags&nbsp;) &amp;&amp;
</div>
<div class="code">               item.Extract( &nbsp;count_buffer&nbsp;) &amp;&amp;
</div>
<div class="code">               item.Extract( &nbsp;v_as_char&nbsp;) &amp;&amp;
</div>
<div class="code">               item.Extract( &nbsp;ut_as_char&nbsp;)
</div>
<div class="code">               &nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                v = ( &nbsp;Visibility&nbsp;) v_as_char;
</div>
<div class="code">                ut = ( &nbsp;UseType&nbsp;) ut_as_char;
</div>
<div class="code">                retval=TRUE;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_ext.cc:00000107"></a>     107  string CCCC_Extent::name( &nbsp;int level&nbsp;) const
</div>
<div class="code">          {
</div>
<div class="code">            string rtnbuf;
</div>
<div class="code">          
</div>
<div class="code">            rtnbuf="";
</div>
<div class="code">          
</div>
<div class="code">            switch( &nbsp;level&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">              case nlFILENAME:
</div>
<div class="code">                rtnbuf=filename;
</div>
<div class="code">                break;
</div>
<div class="code">              case nlLINENUMBER:
</div>
<div class="code">                rtnbuf=linenumber;
</div>
<div class="code">                break;
</div>
<div class="code">              case nlDESCRIPTION:
</div>
<div class="code">                rtnbuf=description;
</div>
<div class="code">                break;
</div>
<div class="code">              case nlSEARCH:
</div>
<div class="code">              case nlRANK:
</div>
<div class="code">                // Extents have no meaningful internal primary key.
</div>
<div class="code">                // We never want two extents to have the same
</div>
<div class="code">                // key, &nbsp; so we use the running number extkey
</div>
<div class="code">                // which is initialized in both constructors.
</div>
<div class="code">                // This should cause extents to sort in order of
</div>
<div class="code">                // their creation, &nbsp; which is fine.
</div>
<div class="code">                char buf[16];
</div>
<div class="code">                sprintf( &nbsp;buf, &nbsp;"%015d", &nbsp;extkey&nbsp;);
</div>
<div class="code">                rtnbuf=buf;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              default:
</div>
<div class="code">                rtnbuf+=filename;
</div>
<div class="code">                rtnbuf+=":";
</div>
<div class="code">                rtnbuf+=linenumber;
</div>
<div class="code">              }
</div>
<div class="code">            return rtnbuf.c_str( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_ext.cc:00000145"></a>     145  string CCCC_Extent::key( &nbsp;&nbsp;) const { return name( &nbsp;nlRANK&nbsp;); }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_ext.cc:00000147"></a>     147  int CCCC_Extent::get_count( &nbsp;const char* count_tag&nbsp;) {
</div>
<div class="code">            int retval=0;
</div>
<div class="code">            char local_count_buffer[100], &nbsp; *count_tag_ptr, &nbsp; *count_value_ptr;
</div>
<div class="code">            strcpy( &nbsp;local_count_buffer, &nbsp;count_buffer.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            count_tag_ptr=strtok( &nbsp;local_count_buffer, &nbsp;":"&nbsp;);
</div>
<div class="code">            while( &nbsp;count_tag_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                count_value_ptr=strtok( &nbsp;NULL, &nbsp;" "&nbsp;);
</div>
<div class="code">                if( &nbsp;strcmp( &nbsp;count_tag_ptr, &nbsp; count_tag&nbsp;) ==0&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  retval+=atoi( &nbsp;count_value_ptr&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">                count_tag_ptr=strtok( &nbsp;NULL, &nbsp;":"&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./cccc/cccc_htm.cc"></a><h1>./cccc/cccc_htm.cc</h1>
<div class="code"><a name="./cccc/cccc_htm.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          // cccc_htm.cc
</div>
<div class="code">          
</div>
<div class="code">          // this file defines HTML output facilities for the CCCC project
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc.h"
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include "cccc_htm.h"
</div>
<div class="code">          
</div>
<div class="code">          // I would love to use the C++ standard preprocessor
</div>
<div class="code">          // directive #if here, &nbsp; but I have had reports before now
</div>
<div class="code">          // of people who are using compilers which only support
</div>
<div class="code">          // #ifdef.
</div>
<div class="code">          #ifdef CCCC_CONF_W32VC
</div>
<div class="code">          #include &lt;direct.h&gt;
</div>
<div class="code">          #else
</div>
<div class="code">          #ifdef CCCC_CONF_W32BC
</div>
<div class="code">          #include &lt;direct.h&gt;
</div>
<div class="code">          #else
</div>
<div class="code">          #include &lt;unistd.h&gt;
</div>
<div class="code">          #endif
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          #include &lt;time.h&gt;
</div>
<div class="code">          #include &lt;sys/stat.h&gt;
</div>
<div class="code">          #include "cccc_utl.h"
</div>
<div class="code">          
</div>
<div class="code">          #ifndef COUNTOF
</div>
<div class="code">          #  define COUNTOF( &nbsp;x&nbsp;) ( &nbsp;sizeof( &nbsp;x&nbsp;)/sizeof( &nbsp;*( &nbsp;x&nbsp;)&nbsp;)&nbsp;)
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          typedef std::map&lt;string, &nbsp;Source_Anchor&gt; source_anchor_map_t;
</div>
<div class="code">          source_anchor_map_t source_anchor_map;
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          // class static data members
</div>
<div class="code">          CCCC_Project* CCCC_Html_Stream::prjptr;
</div>
<div class="code">          string CCCC_Html_Stream::outdir;
</div>
<div class="code">          string CCCC_Html_Stream::libdir;
</div>
<div class="code">          
</div>
<div class="code">          struct metric_description_t {
</div>
<div class="code">              const char* abbreviation;
</div>
<div class="code">              const char* name;
</div>
<div class="code">              const char* description;
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          static metric_description_t ProjectSummaryMetrics[] = {
</div>
<div class="code">                  { COUNT_TAG_NUMBER_OF_MODULES, &nbsp; "Number of modules", &nbsp;
</div>
<div class="code">                          "Number of non-trivial modules identified by the "
</div>
<div class="code">                          "analyser.  Non-trivial modules include all classes, &nbsp; "
</div>
<div class="code">                          "and any other module for which member functions are "
</div>
<div class="code">                          "identified." }, &nbsp;
</div>
<div class="code">                  { COUNT_TAG_LINES_OF_CODE, &nbsp; "Lines of Code", &nbsp;
</div>
<div class="code">                          "Number of non-blank, &nbsp; non-comment lines of source code "
</div>
<div class="code">                          "counted by the analyser." }, &nbsp;
</div>
<div class="code">                  { COUNT_TAG_LINES_OF_COMMENT, &nbsp; "Lines of Comments", &nbsp;
</div>
<div class="code">                          "Number of lines of comment identified by the analyser" }, &nbsp;
</div>
<div class="code">                  { COUNT_TAG_CYCLOMATIC_NUMBER, &nbsp; "McCabe's Cyclomatic Complexity", &nbsp;
</div>
<div class="code">                          "A measure of the decision complexity of the functions "
</div>
<div class="code">                          "which make up the program."
</div>
<div class="code">                          "The strict definition of this measure is that it is "
</div>
<div class="code">                          "the number of linearly independent routes through "
</div>
<div class="code">                          "a directed acyclic graph which maps the flow of control "
</div>
<div class="code">                          "of a subprogram.  The analyser counts this by recording "
</div>
<div class="code">                          "the number of distinct decision outcomes contained "
</div>
<div class="code">                          "within each function, &nbsp; which yields a good approximation "
</div>
<div class="code">                          "to the formally defined version of the measure." }, &nbsp;
</div>
<div class="code">                  { "L_C", &nbsp;"Lines of code per line of comment", &nbsp;
</div>
<div class="code">                          "Indicates density of comments with respect to textual "
</div>
<div class="code">                          "size of program" }, &nbsp;
</div>
<div class="code">                  { "M_C", &nbsp;"Cyclomatic Complexity per line of comment", &nbsp;
</div>
<div class="code">                          "Indicates density of comments with respect to logical "
</div>
<div class="code">                          "complexity of program" }, &nbsp;
</div>
<div class="code">                  { COUNT_TAG_INTERMODULE_COMPLEXITY4, &nbsp; "Information Flow measure", &nbsp;
</div>
<div class="code">                          "Measure of information flow between modules suggested "
</div>
<div class="code">                          "by Henry and Kafura. The analyser makes an approximate "
</div>
<div class="code">                          "count of this by counting inter-module couplings "
</div>
<div class="code">                          "identified in the module interfaces." }, &nbsp;
</div>
<div class="code">                  { "LOCpM", &nbsp; "Lines of Code per Method", &nbsp;
</div>
<div class="code">                          "The average number of lines of code per method. "
</div>
<div class="code">                          "High LoC count may indicate poor functional isolation. "
</div>
<div class="code">                          "Note that this measure may be weighted low by large numbers of small accessor methods." }, &nbsp;
</div>
<div class="code">                  { "MLOCpM", &nbsp; "Max Lines of Code per Method", &nbsp;
</div>
<div class="code">                          "The largest number of lines of code in a single method. "
</div>
<div class="code">                          "High LoC count may indicate poor functional isolation." }, &nbsp;
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          #define _WMC_DESCRIPTION_START "The sum of a weighting function over the functions of the module. "
</div>
<div class="code">          #define _WMC_NAME_START "Weighted methods per class"
</div>
<div class="code">          static metric_description_t OODesignMetrics[] = {
</div>
<div class="code">                  { COUNT_TAG_WEIGHTED_METHODS_PER_CLASS_UNITY, &nbsp; _WMC_NAME_START " ( &nbsp;all&nbsp;)", &nbsp;
</div>
<div class="code">                          _WMC_DESCRIPTION_START "WMC1 uses the nominal weight of 1 for each "
</div>
<div class="code">                          "function, &nbsp; and hence measures the number of functions." }, &nbsp;
</div>
<div class="code">                  { COUNT_TAG_WEIGHTED_METHODS_PER_CLASS COUNT_TAG_VISIBLE_SUFFIX, &nbsp; _WMC_NAME_START " ( &nbsp;visible&nbsp;)", &nbsp;
</div>
<div class="code">                          _WMC_DESCRIPTION_START "WMCv uses a weighting function which is 1 for functions "
</div>
<div class="code">                          "accessible to other modules, &nbsp; 0 for private functions."}, &nbsp;
</div>
<div class="code">                  { COUNT_TAG_INHERITANCE_TREE_DEPTH, &nbsp; "Depth of inheritance tree", &nbsp;
</div>
<div class="code">                          "The length of the longest path of inheritance ending at "
</div>
<div class="code">                          "the current module.  The deeper the inheritance tree "
</div>
<div class="code">                          "for a module, &nbsp; the harder it may be to predict its "
</div>
<div class="code">                          "behaviour.  On the other hand, &nbsp; increasing depth gives "
</div>
<div class="code">                          "the potential of greater reuse by the current module "
</div>
<div class="code">                          "of behaviour defined for ancestor classes." }, &nbsp;
</div>
<div class="code">                  { COUNT_TAG_NUMBER_OF_CHILDREN, &nbsp; "Number of children", &nbsp;
</div>
<div class="code">                          "The number of modules which inherit directly from the "
</div>
<div class="code">                          "current module.  Moderate values of this measure "
</div>
<div class="code">                          "indicate scope for reuse, &nbsp; however high values may "
</div>
<div class="code">                          "indicate an inappropriate abstraction in the design." }, &nbsp;
</div>
<div class="code">                  { COUNT_TAG_COUPLING_BETWEEN_OBJECTS, &nbsp; "Coupling between objects", &nbsp;
</div>
<div class="code">                          "The number of other modules which are coupled to the "
</div>
<div class="code">                          "current module either as a client or a supplier. "
</div>
<div class="code">                          "Excessive coupling indicates weakness of module "
</div>
<div class="code">                          "encapsulation and may inhibit reuse." }
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          static metric_description_t StructuralSummaryMetrics[] = {
</div>
<div class="code">                  { "Fan-in", &nbsp; "", &nbsp;
</div>
<div class="code">                             "The number of other modules which pass information "
</div>
<div class="code">                             "into the current module." }, &nbsp;
</div>
<div class="code">                  { "Fan-out", &nbsp; "", &nbsp;
</div>
<div class="code">                             "The number of other modules into which the current "
</div>
<div class="code">                             "module passes information"}, &nbsp;
</div>
<div class="code">                  { "IF4", &nbsp;"Information Flow measure", &nbsp;
</div>
<div class="code">                             "A composite measure of structural complexity, &nbsp; "
</div>
<div class="code">                             "calculated as the square of the product of the fan-in "
</div>
<div class="code">                             "and fan-out of a single module.  Proposed by Henry and "
</div>
<div class="code">                             "Kafura."}
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000147"></a>     147  void CCCC_Html_Stream::GenerateReports( &nbsp;CCCC_Project* prj, &nbsp;
</div>
<div class="code">          				       int report_mask, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000149"></a>     149  				       const string&amp; file, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000150"></a>     150  				       const string&amp; dir&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            prjptr=prj;
</div>
<div class="code">            outdir=dir;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Html_Stream main_html_stream( &nbsp;file.c_str( &nbsp;&nbsp;), &nbsp;"Report on software metrics"&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtCONTENTS&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                // For testing purposes, &nbsp; we want to be able to disable the inclusion
</div>
<div class="code">                // of the current time in the report.  This enables us to store a
</div>
<div class="code">                // reference version of the report in RCS and expect the program
</div>
<div class="code">                // to generate an identical one at regression testing time.
</div>
<div class="code">                if( &nbsp;report_mask &amp; rtSHOW_GEN_TIME&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  main_html_stream.Table_Of_Contents( &nbsp;report_mask, &nbsp;true&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">                else
</div>
<div class="code">          	{
</div>
<div class="code">          	  main_html_stream.Table_Of_Contents( &nbsp;report_mask, &nbsp;false&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtSUMMARY&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_html_stream.Project_Summary( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtPROC1&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_html_stream.Procedural_Summary( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtPROC2&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_html_stream.Procedural_Detail( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtOODESIGN&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_html_stream.OO_Design( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtSTRUCT1&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_html_stream.Structural_Summary( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtSTRUCT2&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_html_stream.Structural_Detail( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtSEPARATE_MODULES&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_html_stream.Separate_Modules( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtOTHER&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_html_stream.Other_Extents( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtSOURCE&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_html_stream.Source_Listing( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtCCCC&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_html_stream.Put_Section_Heading( &nbsp;"About CCCC", &nbsp;"infocccc", &nbsp;1&nbsp;);
</div>
<div class="code">                main_html_stream.fstr &lt;&lt;
</div>
<div class="code">              	HTMLParagraph( &nbsp;"This report was generated by the program CCCC, &nbsp; which is FREELY "
</div>
<div class="code">          		"REDISTRIBUTABLE but carries NO WARRANTY."&nbsp;) &lt;&lt;
</div>
<div class="code">                  HTMLParagraph( &nbsp;"CCCC was developed by Tim Littlefair. "
</div>
<div class="code">                          "as part of a PhD research project. "
</div>
<div class="code">                          "This project is now completed and descriptions of the "
</div>
<div class="code">                          "findings can be accessed at "
</div>
<div class="code">                          "&lt;a href=\"http://www.chs.ecu.edu.au/~tlittlef\"&gt;"
</div>
<div class="code">                          "http://www.chs.ecu.edu.au/~tlittlef&lt;/a&gt;."&nbsp;) &lt;&lt;
</div>
<div class="code">                  HTMLParagraph( &nbsp;"User support for CCCC can be obtained by "
</div>
<div class="code">                          "&lt;a href=\"mailto:cccc-users@lists.sourceforge.net\"&gt;"
</div>
<div class="code">                          "mailing the list cccc-users@lists.sourceforge.net&lt;/a&gt;."&nbsp;) &lt;&lt;
</div>
<div class="code">                  HTMLParagraph( &nbsp;"Please also visit the CCCC development website at "
</div>
<div class="code">                          "&lt;a href=\"http://cccc.sourceforge.net\"&gt;http://cccc.sourceforge.net&lt;/a&gt;."&nbsp;) &lt;&lt;
</div>
<div class="code">                  HTMLParagraph( &nbsp;"The CCCC4 fork adds some interactivity to the HTML rendering of CCCC's results, &nbsp; and the additional fields "
</div>
<div class="code">                          "LOCpM and MLOCpM; its intent is to make the HTML output more suited for immediate presentation "
</div>
<div class="code">                          "in a build environment e such as Jenkins. Visit the CCCC4 fork at &lt;a href=\"http://www.github.com/lyngvi/cccc4\"&gt;http://www.github.com/lyngvi/cccc4&lt;/a&gt;."&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000242"></a>     242  CCCC_Html_Stream::~CCCC_Html_Stream( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            fstr &lt;&lt; "&lt;/BODY&gt;&lt;/HTML&gt;" &lt;&lt; endl;
</div>
<div class="code">            fstr.close( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000248"></a>     248  void CCCC_Html_Stream::Table_Of_Contents( &nbsp;int report_mask, &nbsp; bool showGenTime&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // record the number of report parts in the table, &nbsp; and the
</div>
<div class="code">            // stream put pointer
</div>
<div class="code">            // if we find that we have only generated a single part, &nbsp; we supress
</div>
<div class="code">            // the TOC by seeking to the saved stream offset
</div>
<div class="code">            int number_of_report_parts=0;
</div>
<div class="code">            int saved_stream_offset=fstr.tellp( &nbsp;&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_Table, &nbsp; "toc"&nbsp;) &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; "&lt;th colspan=\"2\"&gt;" &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; "CCCC Software Metrics Report";
</div>
<div class="code">            if( &nbsp; prjptr-&gt;name( &nbsp;nlSIMPLE&nbsp;)!="" &nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                fstr &lt;&lt; " on project " &lt;&lt; prjptr-&gt;name( &nbsp;nlSIMPLE&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            fstr &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            // we have the option to disable the display of the generation time
</div>
<div class="code">            // so that we can generate identical reports for regression testing
</div>
<div class="code">            if( &nbsp;showGenTime==true&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                time_t generationTime=time( &nbsp;NULL&nbsp;);
</div>
<div class="code">                fstr &lt;&lt; _HTMLLineBreak
</div>
<div class="code">              	   &lt;&lt; " generated " &lt;&lt; ctime( &nbsp;&amp;generationTime&nbsp;) &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtSUMMARY&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                Put_Section_TOC_Entry( &nbsp;
</div>
<div class="code">          			    "Project Summary", &nbsp;"projsum", &nbsp;
</div>
<div class="code">          			    "Summary table of high level measures summed "
</div>
<div class="code">          			    "over all files processed in the current run."&nbsp;);
</div>
<div class="code">                number_of_report_parts++;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtPROC1&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                Put_Section_TOC_Entry( &nbsp;
</div>
<div class="code">          			    "Procedural Metrics Summary", &nbsp; "procsum", &nbsp;
</div>
<div class="code">          			    "Table of procedural measures ( &nbsp;i.e. lines of "
</div>
<div class="code">          			    "code, &nbsp; lines of comment, &nbsp; McCabe's cyclomatic "
</div>
<div class="code">          			    "complexity summed over each module."&nbsp;);
</div>
<div class="code">                number_of_report_parts++;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtPROC2&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                Put_Section_TOC_Entry( &nbsp;
</div>
<div class="code">          			    "Procedural Metrics Detail", &nbsp; "procdet", &nbsp;
</div>
<div class="code">          			    "The same procedural metrics as in the procedural "
</div>
<div class="code">          			    "metrics summary, &nbsp; reported for individual "
</div>
<div class="code">          			    "functions, &nbsp; grouped by module."&nbsp;);
</div>
<div class="code">                number_of_report_parts++;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtOODESIGN&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                Put_Section_TOC_Entry( &nbsp;
</div>
<div class="code">          			    "Object Oriented Design", &nbsp;"oodesign", &nbsp;
</div>
<div class="code">          			    "Table of four of the 6 metrics proposed by "
</div>
<div class="code">          			    "Chidamber and Kemerer in their various papers on "
</div>
<div class="code">          			    "'a metrics suite for object oriented design'."&nbsp;);
</div>
<div class="code">                number_of_report_parts++;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtSTRUCT1&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                Put_Section_TOC_Entry( &nbsp;
</div>
<div class="code">          			    "Structural Metrics Summary", &nbsp; "structsum", &nbsp;
</div>
<div class="code">          			    "Structural metrics based on the relationships of "
</div>
<div class="code">          			    "each module with others.  Includes fan-out ( &nbsp;i.e. "
</div>
<div class="code">          			    "number of other modules the current module "
</div>
<div class="code">          			    "uses&nbsp;), &nbsp; fan-in ( &nbsp;number of other modules which use "
</div>
<div class="code">          			    "the current module&nbsp;), &nbsp; and the Information Flow "
</div>
<div class="code">          			    "measure suggested by Henry and Kafura, &nbsp; which "
</div>
<div class="code">          			    "combines these to give a measure of coupling for "
</div>
<div class="code">          			    "the module."&nbsp;);
</div>
<div class="code">                number_of_report_parts++;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtSTRUCT2&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                Put_Section_TOC_Entry( &nbsp;
</div>
<div class="code">          			    "Structural Metrics Detail", &nbsp; "structdet", &nbsp;
</div>
<div class="code">          			    "The names of the modules included as clients and "
</div>
<div class="code">          			    "suppliers in the counts for the Structural "
</div>
<div class="code">          			    "Metrics Summary."&nbsp;);
</div>
<div class="code">                number_of_report_parts++;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtOTHER&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                Put_Section_TOC_Entry( &nbsp;
</div>
<div class="code">          			    "Other Extents", &nbsp; "other", &nbsp;
</div>
<div class="code">          			    "Lexical counts for parts of submitted source "
</div>
<div class="code">          			    "files which the analyser was unable to assign to "
</div>
<div class="code">          			    "a module. Each record in this table relates to "
</div>
<div class="code">          			    "either a part of the code which triggered a "
</div>
<div class="code">          			    "parse failure, &nbsp; or to the residual lexical counts "
</div>
<div class="code">          			    "relating to parts of a file not associated with "
</div>
<div class="code">          			    "a specific module."
</div>
<div class="code">          			    &nbsp;);
</div>
<div class="code">                number_of_report_parts++;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtCCCC&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                Put_Section_TOC_Entry( &nbsp;
</div>
<div class="code">          			    "About CCCC", &nbsp; "infocccc", &nbsp;
</div>
<div class="code">          			    "A description of the CCCC program."&nbsp;);
</div>
<div class="code">                number_of_report_parts++;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; HTMLEndElement( &nbsp;_Table&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            if( &nbsp;number_of_report_parts&lt;2&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                fstr.seekp( &nbsp;saved_stream_offset&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000371"></a>     371  void CCCC_Html_Stream::Put_Section_Heading( &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000372"></a>     372  					   string heading_title, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000373"></a>     373  					   string heading_tag, &nbsp;
</div>
<div class="code">          					   int heading_level&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            fstr &lt;&lt; "&lt;a name=\"" &lt;&lt; heading_tag &lt;&lt; "\"&gt;&lt;/a&gt;"
</div>
<div class="code">                 &lt;&lt; "&lt;h" &lt;&lt; heading_level &lt;&lt; "&gt;"
</div>
<div class="code">                 &lt;&lt; heading_title
</div>
<div class="code">                 &lt;&lt; "&lt;/h" &lt;&lt; heading_level &lt;&lt; "&gt;" &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000382"></a>     382  void  CCCC_Html_Stream::Project_Summary( &nbsp;&nbsp;) {
</div>
<div class="code">            Put_Section_Heading( &nbsp;"Project Summary", &nbsp;"projsum", &nbsp;1&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; "&lt;p&gt;This table shows measures over the project as a whole.&lt;/p&gt;" &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_UnorderedList, &nbsp; "Project_Summary"&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            for ( &nbsp;int k = 0; k &lt; COUNTOF( &nbsp;ProjectSummaryMetrics&nbsp;); ++k&nbsp;)
</div>
<div class="code">                Metric_Description( &nbsp;ProjectSummaryMetrics[k].abbreviation, &nbsp; ProjectSummaryMetrics[k].name, &nbsp; ProjectSummaryMetrics[k].description&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_UnorderedList&nbsp;) &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; HTMLParagraph( &nbsp;
</div>
<div class="code">              	  "Two variants on the information flow measure IF4 are also "
</div>
<div class="code">              	  "presented, &nbsp; one ( &nbsp;IF4v&nbsp;) calculated using only relationships in the "
</div>
<div class="code">                    "visible part of the module interface, &nbsp; and the other ( &nbsp;IF4c&nbsp;) "
</div>
<div class="code">                    "calculated using only those relationships which imply that changes "
</div>
<div class="code">                    "to the client must be recompiled of the supplier's definition "
</div>
<div class="code">                    "changes."&nbsp;)
</div>
<div class="code">                 &lt;&lt; endl &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            // calculate the counts on which all displayed data will be based
</div>
<div class="code">            int nom=prjptr-&gt;get_count( &nbsp;COUNT_TAG_NUMBER_OF_MODULES&nbsp;);
</div>
<div class="code">            int loc=prjptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;);
</div>
<div class="code">            int mvg=prjptr-&gt;get_count( &nbsp;COUNT_TAG_CYCLOMATIC_NUMBER&nbsp;);
</div>
<div class="code">            int com=prjptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_COMMENT&nbsp;);
</div>
<div class="code">            int if4=prjptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4&nbsp;);
</div>
<div class="code">            int if4v=prjptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4 COUNT_TAG_VISIBLE_SUFFIX&nbsp;);
</div>
<div class="code">            int if4c=prjptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4 COUNT_TAG_CONCRETE_SUFFIX&nbsp;);
</div>
<div class="code">            int rej=prjptr-&gt;rejected_extent_table.get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_Table, &nbsp; "summary"&nbsp;)
</div>
<div class="code">                 &lt;&lt; HTMLBeginElement( &nbsp;_TableHead&nbsp;) &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Metric", &nbsp;55&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Tag", &nbsp;15&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Overall", &nbsp;15&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Per Module", &nbsp;15&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; HTMLEndElement( &nbsp;_TableHead&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Number of modules"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;COUNT_TAG_NUMBER_OF_MODULES&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;nom&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLTableCell( &nbsp;"&amp;nbsp;"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Lines of Code"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;loc, &nbsp;"LOCp"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;loc, &nbsp;nom, &nbsp;"LOCper"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Label_Cell( &nbsp;"McCabe's Cyclomatic Number"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;COUNT_TAG_CYCLOMATIC_NUMBER&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;mvg, &nbsp;"MVGp"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;mvg, &nbsp;nom, &nbsp;"MVGper"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Lines of Comment"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;COUNT_TAG_LINES_OF_COMMENT&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;com, &nbsp;"COM"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;com, &nbsp;nom, &nbsp;"COMper"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Label_Cell( &nbsp;"LOC/COM"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"L_C"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;loc, &nbsp;com, &nbsp;"L_C"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLTableCell( &nbsp;""&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Label_Cell( &nbsp;"MVG/COM"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"M_C"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;mvg, &nbsp;com, &nbsp;"M_C"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLTableCell( &nbsp;""&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Information Flow measure ( &nbsp;inclusive&nbsp;)"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;if4&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;if4, &nbsp;nom, &nbsp;"8.3"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Information Flow measure ( &nbsp;visible&nbsp;)"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4 COUNT_TAG_VISIBLE_SUFFIX&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;if4v&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;if4v, &nbsp;nom, &nbsp;"8.3"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Information Flow measure ( &nbsp;concrete&nbsp;)"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4 COUNT_TAG_CONCRETE_SUFFIX&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;if4c&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;if4c, &nbsp;nom, &nbsp;"8.3"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Lines of Code rejected by parser"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"REJ"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;rej, &nbsp;"REJ"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLTableCell( &nbsp;""&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_Table&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000493"></a>     493  void CCCC_Html_Stream::OO_Design( &nbsp;&nbsp;) {
</div>
<div class="code">            Put_Section_Heading( &nbsp;"Object Oriented Design", &nbsp;"oodesign", &nbsp;1&nbsp;);
</div>
<div class="code">            int metric_tag_count = COUNTOF( &nbsp;OODesignMetrics&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_UnorderedList&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            for ( &nbsp;size_t k = 0; k &lt; metric_tag_count; ++k&nbsp;)
</div>
<div class="code">                Metric_Description( &nbsp;OODesignMetrics[k].abbreviation, &nbsp; OODesignMetrics[k].name, &nbsp; OODesignMetrics[k].description&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_UnorderedList&nbsp;) &lt;&lt; endl &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLParagraph( &nbsp;
</div>
<div class="code">          		  "The label cell for each row in this table provides a link to "
</div>
<div class="code">          		  "the module summary table in the detailed report for the "
</div>
<div class="code">          		  "module in question."&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_Table, &nbsp; "summary"&nbsp;) &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; HTMLBeginElement( &nbsp;_TableHead&nbsp;) &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Module Name", &nbsp; 100 - 10 * metric_tag_count&nbsp;);
</div>
<div class="code">            for ( &nbsp;size_t k = 0; k &lt; metric_tag_count; ++k&nbsp;)
</div>
<div class="code">                Put_Header_Cell( &nbsp;OODesignMetrics[k].abbreviation, &nbsp; 10&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;)
</div>
<div class="code">                 &lt;&lt; HTMLEndElement( &nbsp;_TableHead&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module* mod_ptr=prjptr-&gt;module_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            int i=0;
</div>
<div class="code">            while( &nbsp;mod_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                i++;
</div>
<div class="code">                if( &nbsp; mod_ptr-&gt;is_trivial( &nbsp;&nbsp;) == FALSE&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          	  string href=mod_ptr-&gt;key( &nbsp;&nbsp;)+".html#summary";
</div>
<div class="code">          
</div>
<div class="code">          	  Put_Label_Cell( &nbsp;mod_ptr-&gt;name( &nbsp;nlSIMPLE&nbsp;).c_str( &nbsp;&nbsp;), &nbsp;0, &nbsp;"", &nbsp;href.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  for( &nbsp;size_t j=0; j &lt; metric_tag_count; j++&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      CCCC_Metric metric_value( &nbsp;mod_ptr-&gt;get_count( &nbsp;OODesignMetrics[j].abbreviation&nbsp;), &nbsp; OODesignMetrics[j].abbreviation&nbsp;);
</div>
<div class="code">          	      Put_Metric_Cell( &nbsp;metric_value&nbsp;);
</div>
<div class="code">          	    }
</div>
<div class="code">          	  fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          	}
</div>
<div class="code">                mod_ptr=prjptr-&gt;module_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_Table&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000547"></a>     547  void CCCC_Html_Stream::Procedural_Summary( &nbsp;&nbsp;) {
</div>
<div class="code">            Put_Section_Heading( &nbsp;"Procedural Metrics Summary", &nbsp;"procsum", &nbsp;1&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLParagraph( &nbsp;
</div>
<div class="code">          		  "For descriptions of each of these metrics see the information "
</div>
<div class="code">          		  "preceding the project summary table."&nbsp;) &lt;&lt; endl &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLParagraph( &nbsp;
</div>
<div class="code">          		  "The label cell for each row in this table provides a link to "
</div>
<div class="code">          		  "the functions table in the detailed report for the "
</div>
<div class="code">          		  "module in question"&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_Table, &nbsp; "summary"&nbsp;)
</div>
<div class="code">                 &lt;&lt; HTMLBeginElement( &nbsp;_TableHead&nbsp;)
</div>
<div class="code">                 &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Module Name"&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"LOC", &nbsp;8&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"MVG", &nbsp;8&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"COM", &nbsp;8&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"L_C", &nbsp;8&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"M_C", &nbsp;8&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"LOCpM", &nbsp;8&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"MLOCpM", &nbsp; 8&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;)
</div>
<div class="code">          	   &lt;&lt; HTMLEndElement( &nbsp;_TableHead&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module* mod_ptr=prjptr-&gt;module_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            int i=0;
</div>
<div class="code">            while( &nbsp;mod_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                i++;
</div>
<div class="code">                if( &nbsp; mod_ptr-&gt;is_trivial( &nbsp;&nbsp;) == FALSE&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	  string href=mod_ptr-&gt;key( &nbsp;&nbsp;)+".html#procdet";
</div>
<div class="code">          
</div>
<div class="code">          	  Put_Label_Cell( &nbsp;mod_ptr-&gt;name( &nbsp;nlSIMPLE&nbsp;).c_str( &nbsp;&nbsp;), &nbsp;0, &nbsp;"", &nbsp;href.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          	  int loc=mod_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;);
</div>
<div class="code">          	  int mvg=mod_ptr-&gt;get_count( &nbsp;COUNT_TAG_CYCLOMATIC_NUMBER&nbsp;);
</div>
<div class="code">          	  int com=mod_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_COMMENT&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;loc, &nbsp; "LOCm"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;mvg, &nbsp; "MVGm"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;com&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;loc, &nbsp; com, &nbsp; "L_C"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;mvg, &nbsp; com, &nbsp; "M_C"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;loc, &nbsp; mod_ptr-&gt;get_count( &nbsp;COUNT_TAG_WEIGHTED_METHODS_PER_CLASS_UNITY&nbsp;), &nbsp; "LOCf"&nbsp;)&nbsp;);
</div>
<div class="code">                    Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;mod_ptr-&gt;get_count( &nbsp;COUNT_TAG_MAX_LINES_OF_CODE_PER_METHOD&nbsp;), &nbsp; "LOCf"&nbsp;)&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          	}
</div>
<div class="code">                mod_ptr=prjptr-&gt;module_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_Table&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000607"></a>     607  void CCCC_Html_Stream::Structural_Summary( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            Put_Section_Heading( &nbsp;"Structural Metrics Summary", &nbsp;"structsum", &nbsp;1&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_UnorderedList&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            for ( &nbsp;int k = 0; k &lt; COUNTOF( &nbsp;StructuralSummaryMetrics&nbsp;); ++k&nbsp;)
</div>
<div class="code">                Metric_Description( &nbsp;StructuralSummaryMetrics[k].abbreviation, &nbsp; StructuralSummaryMetrics[k].name, &nbsp; StructuralSummaryMetrics[k].description&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_UnorderedList&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLParagraph( &nbsp;"Note that the fan-in and fan-out are calculated by examining the "
</div>
<div class="code">          		  "interface of each module.  As noted above, &nbsp; three variants of each "
</div>
<div class="code">          		  "each of these measures are presented: a count restricted to the "
</div>
<div class="code">          		  "part of the interface which is externally visible, &nbsp; a count which "
</div>
<div class="code">          		  "only includes relationships which imply the client module needs "
</div>
<div class="code">          		  "to be recompiled if the supplier's implementation changes, &nbsp; and an "
</div>
<div class="code">          		  "inclusive count"&nbsp;) &lt;&lt; endl &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLParagraph( &nbsp;"The label cell for each row in this table provides a link to "
</div>
<div class="code">          		  "the relationships table in the detailed report for the "
</div>
<div class="code">          		  "module in question"&nbsp;) &lt;&lt; endl &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr  &lt;&lt; HTMLBeginElement( &nbsp;_Table, &nbsp; "summary"&nbsp;) &lt;&lt; endl
</div>
<div class="code">                  &lt;&lt; HTMLBeginElement( &nbsp;_TableHead&nbsp;) &lt;&lt; endl
</div>
<div class="code">          	&lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl
</div>
<div class="code">          	&lt;&lt; "&lt;th rowspan=\"2\" class=\"sortable\"&gt;&lt;div&gt;Module Name&lt;/div&gt;&lt;/td&gt;" &lt;&lt; endl
</div>
<div class="code">          	&lt;&lt; HTMLMultiColumnHeaderCell( &nbsp;"Fan-out", &nbsp; 3&nbsp;) &lt;&lt; endl
</div>
<div class="code">          	&lt;&lt; HTMLMultiColumnHeaderCell( &nbsp;"Fan-in", &nbsp; 3&nbsp;) &lt;&lt; endl
</div>
<div class="code">          	&lt;&lt; HTMLMultiColumnHeaderCell( &nbsp;"IF4", &nbsp; 3&nbsp;) &lt;&lt; endl
</div>
<div class="code">          	&lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl
</div>
<div class="code">          	&lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Header_Cell( &nbsp;"vis", &nbsp;7&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"con", &nbsp;7&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"inc", &nbsp;7&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"vis", &nbsp;7&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"con", &nbsp;7&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"incl", &nbsp;7&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"vis", &nbsp;7&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"con", &nbsp;7&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"inc", &nbsp;7&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;)
</div>
<div class="code">                 &lt;&lt; HTMLEndElement( &nbsp;_TableHead&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module* module_ptr=prjptr-&gt;module_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;module_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                if( &nbsp;module_ptr-&gt;is_trivial( &nbsp;&nbsp;)==FALSE&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          	  int fov=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_FAN_OUT COUNT_TAG_VISIBLE_SUFFIX&nbsp;);
</div>
<div class="code">          	  int foc=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_FAN_OUT COUNT_TAG_CONCRETE_SUFFIX&nbsp;);
</div>
<div class="code">          	  int fo=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_FAN_OUT&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  int fiv=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_FAN_IN COUNT_TAG_VISIBLE_SUFFIX&nbsp;);
</div>
<div class="code">          	  int fic=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_FAN_IN COUNT_TAG_CONCRETE_SUFFIX&nbsp;);
</div>
<div class="code">          	  int fi=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_FAN_IN&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  int if4v=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4 COUNT_TAG_VISIBLE_SUFFIX&nbsp;);
</div>
<div class="code">          	  int if4c=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4 COUNT_TAG_CONCRETE_SUFFIX&nbsp;);
</div>
<div class="code">          	  int if4=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  // the last two arguments here turn on links to enable jumping between
</div>
<div class="code">          	  // the summary and detail cells for the same module
</div>
<div class="code">          	  string href=module_ptr-&gt;key( &nbsp;&nbsp;)+".html#structdet";
</div>
<div class="code">          	  Put_Label_Cell( &nbsp;module_ptr-&gt;name( &nbsp;nlSIMPLE&nbsp;).c_str( &nbsp;&nbsp;), &nbsp; 0, &nbsp; "", &nbsp;href.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;fov, &nbsp;"FOv"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;foc, &nbsp;"FOc"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;fo, &nbsp;"FO"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;fiv, &nbsp;"FIv"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;fic, &nbsp;"FIc"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;fi, &nbsp;"FI"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;if4v, &nbsp;"IF4v"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;if4c, &nbsp;"IF4c"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;if4, &nbsp;"IF4"&nbsp;)&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	}
</div>
<div class="code">                module_ptr=prjptr-&gt;module_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_Table&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000692"></a>     692  void CCCC_Html_Stream::Put_Structural_Details_Cell( &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000693"></a>     693  						   CCCC_Module *mod, &nbsp; CCCC_Project *prj, &nbsp; int mask, &nbsp; UserelNameLevel nl&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableCell, &nbsp; "", &nbsp; 50&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          #if 0
</div>
<div class="code">            std::cerr &lt;&lt; "Relationships for " &lt;&lt; mod-&gt;name( &nbsp;nlMODULE_NAME&nbsp;)
</div>
<div class="code">          	    &lt;&lt; " ( &nbsp;" &lt;&lt; mod &lt;&lt; "&nbsp;)" &lt;&lt; std::endl;
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module::relationship_map_t::iterator iter;
</div>
<div class="code">            CCCC_Module::relationship_map_t *relationship_map=NULL;
</div>
<div class="code">            if( &nbsp;mask==rmeCLIENT&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                relationship_map=&amp;( &nbsp;mod-&gt;client_map&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            else if( &nbsp;mask==rmeSUPPLIER&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                relationship_map=&amp;( &nbsp;mod-&gt;supplier_map&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;relationship_map==NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                cerr &lt;&lt; "unexpected relationship mask " &lt;&lt; mask  &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                for( &nbsp;
</div>
<div class="code">          	  iter=relationship_map-&gt;begin( &nbsp;&nbsp;);
</div>
<div class="code">          	  iter!=relationship_map-&gt;end( &nbsp;&nbsp;);
</div>
<div class="code">          	  iter++
</div>
<div class="code">          	  &nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  CCCC_UseRelationship *ur_ptr=( &nbsp;*iter&nbsp;).second;
</div>
<div class="code">          	  fstr &lt;&lt; ur_ptr-&gt;name( &nbsp;nl&nbsp;) &lt;&lt; " ";
</div>
<div class="code">          	  AugmentedBool vis=ur_ptr-&gt;is_visible( &nbsp;&nbsp;);
</div>
<div class="code">          	  AugmentedBool con=ur_ptr-&gt;is_concrete( &nbsp;&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          #if 0
</div>
<div class="code">          	  std::cerr &lt;&lt; ur_ptr-&gt;name( &nbsp;nlCLIENT&nbsp;)
</div>
<div class="code">          		    &lt;&lt; " uses "
</div>
<div class="code">          		    &lt;&lt; ur_ptr-&gt;name( &nbsp;nlSUPPLIER&nbsp;)
</div>
<div class="code">          		    &lt;&lt; std::endl;
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          	  if( &nbsp; ( &nbsp;vis != abFALSE&nbsp;) &amp;&amp; ( &nbsp;con != abFALSE&nbsp;) &nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      fstr &lt;&lt; "[CV] ";
</div>
<div class="code">          	    }
</div>
<div class="code">          	  else if( &nbsp;vis != abFALSE&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      fstr &lt;&lt; "[V] ";
</div>
<div class="code">          	    }
</div>
<div class="code">          	  else if( &nbsp;con != abFALSE&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      fstr &lt;&lt; "[C] ";
</div>
<div class="code">          	    }
</div>
<div class="code">          	  fstr &lt;&lt; _HTMLLineBreak &lt;&lt; endl;
</div>
<div class="code">          	  Put_Extent_List( &nbsp;*ur_ptr, &nbsp;true&nbsp;);
</div>
<div class="code">          	  fstr &lt;&lt; _HTMLLineBreak &lt;&lt; endl;
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            // put a non-breaking space in to avoid the unpleasantness which
</div>
<div class="code">            // goes with completely empty cells
</div>
<div class="code">            fstr &lt;&lt; "&amp;nbsp;" &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableCell&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000762"></a>     762  void CCCC_Html_Stream::Structural_Detail( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            Put_Section_Heading( &nbsp;"Structural Metrics Detail", &nbsp;"structdet", &nbsp;1&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_Table, &nbsp; "summary"&nbsp;)
</div>
<div class="code">          		  &lt;&lt; HTMLBeginElement( &nbsp;_TableHead&nbsp;)
</div>
<div class="code">          		  &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Module Name", &nbsp;20&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Clients", &nbsp;40&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Suppliers", &nbsp;40&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableHead&nbsp;)
</div>
<div class="code">          		  &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module* module_ptr=prjptr-&gt;module_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;module_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                if( &nbsp;module_ptr-&gt;is_trivial( &nbsp;&nbsp;)==FALSE&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	  Put_Label_Cell( &nbsp;module_ptr-&gt;name( &nbsp;nlSIMPLE&nbsp;).c_str( &nbsp;&nbsp;), &nbsp; 0, &nbsp; "structdet", &nbsp;"structsum"&nbsp;);
</div>
<div class="code">          	  Structural_Detail( &nbsp;module_ptr&nbsp;);
</div>
<div class="code">          	  fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	}
</div>
<div class="code">                module_ptr=prjptr-&gt;module_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_Table&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000790"></a>     790  void CCCC_Html_Stream::Procedural_Detail( &nbsp;&nbsp;) {
</div>
<div class="code">            Put_Section_Heading( &nbsp;"Procedural Metrics Detail", &nbsp;"procdet", &nbsp;1&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_Table, &nbsp; "summary"&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module* mod_ptr=prjptr-&gt;module_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;mod_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                if( &nbsp;
</div>
<div class="code">          	 ( &nbsp;mod_ptr-&gt;name( &nbsp;nlMODULE_TYPE&nbsp;)!="builtin"&nbsp;) &amp;&amp;
</div>
<div class="code">          	 ( &nbsp;mod_ptr-&gt;name( &nbsp;nlMODULE_TYPE&nbsp;)!="enum"&nbsp;) &amp;&amp;
</div>
<div class="code">          	 ( &nbsp;mod_ptr-&gt;name( &nbsp;nlMODULE_TYPE&nbsp;)!="union"&nbsp;)
</div>
<div class="code">          	 &nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	  Put_Label_Cell( &nbsp;mod_ptr-&gt;name( &nbsp;nlSIMPLE&nbsp;).c_str( &nbsp;&nbsp;), &nbsp;50, &nbsp;
</div>
<div class="code">          			 "procdet", &nbsp;"procsum", &nbsp;mod_ptr&nbsp;);
</div>
<div class="code">          	  Put_Header_Cell( &nbsp;"LOC", &nbsp;10&nbsp;);
</div>
<div class="code">          	  Put_Header_Cell( &nbsp;"MVG", &nbsp;10&nbsp;);
</div>
<div class="code">          	  Put_Header_Cell( &nbsp;"COM", &nbsp;10&nbsp;);
</div>
<div class="code">          	  Put_Header_Cell( &nbsp;"L_C", &nbsp;10&nbsp;);
</div>
<div class="code">          	  Put_Header_Cell( &nbsp;"M_C", &nbsp;10&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	  Procedural_Detail( &nbsp;mod_ptr&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">                mod_ptr=prjptr-&gt;module_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_Table&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000821"></a>     821  void CCCC_Html_Stream::Other_Extents( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            Put_Section_Heading( &nbsp;"Other Extents", &nbsp;"other", &nbsp;1&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_Table, &nbsp; "summary"&nbsp;) &lt;&lt; endl
</div>
<div class="code">            	   &lt;&lt; HTMLBeginElement( &nbsp;_TableHead&nbsp;) &lt;&lt; endl
</div>
<div class="code">            	   &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Location", &nbsp;25&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Text", &nbsp;45&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"LOC", &nbsp;10&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"COM", &nbsp;10&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"MVG", &nbsp;10&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; HTMLEndElement( &nbsp;_TableHead&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;prjptr-&gt;rejected_extent_table.records( &nbsp;&nbsp;) == 0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                fstr &lt;&lt; HTMLSingleEntryRow( &nbsp;5, &nbsp; "&amp;nbsp;"&nbsp;) &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Extent *extent_ptr=prjptr-&gt;rejected_extent_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">                while( &nbsp;extent_ptr!=NULL&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">          	  Put_Extent_Cell( &nbsp;*extent_ptr, &nbsp;0&nbsp;);
</div>
<div class="code">          	  fstr &lt;&lt; HTMLTableCell( &nbsp;HTMLEscapeLiteral( &nbsp;extent_ptr-&gt;name( &nbsp;nlDESCRIPTION&nbsp;).c_str( &nbsp;&nbsp;)&nbsp;).c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;extent_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;), &nbsp;""&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;extent_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_COMMENT&nbsp;), &nbsp;""&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;extent_ptr-&gt;get_count( &nbsp;COUNT_TAG_CYCLOMATIC_NUMBER&nbsp;), &nbsp;""&nbsp;);
</div>
<div class="code">          	  fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	  extent_ptr=prjptr-&gt;rejected_extent_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_Table&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000858"></a>     858  void CCCC_Html_Stream::Put_Section_TOC_Entry( &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000859"></a>     859  					     string section_name, &nbsp; string section_href, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000860"></a>     860  					     string section_description&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; HTMLBeginElement( &nbsp;_TableCell, &nbsp; "toc_entry_name", &nbsp; 20&nbsp;)
</div>
<div class="code">                 &lt;&lt; "&lt;a href=\"#" &lt;&lt; section_href &lt;&lt; "\"&gt;" &lt;&lt; section_name &lt;&lt; "&lt;/a&gt;"
</div>
<div class="code">                 &lt;&lt; HTMLEndElement( &nbsp;_TableHeader&nbsp;)
</div>
<div class="code">                 &lt;&lt; HTMLBeginElement( &nbsp;_TableCell&nbsp;)
</div>
<div class="code">                 &lt;&lt; section_description &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000871"></a>     871  void CCCC_Html_Stream::Put_Header_Cell( &nbsp;string label, &nbsp; int width&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            fstr  &lt;&lt; HTMLBeginElement( &nbsp;_TableHeader, &nbsp; "header_cell sortable", &nbsp; width&nbsp;)
</div>
<div class="code">                  &lt;&lt; HTMLBeginElement( &nbsp;_Div&nbsp;) &lt;&lt; HTMLEscapeLiteral( &nbsp;label.c_str( &nbsp;&nbsp;)&nbsp;) &lt;&lt; HTMLEndElement( &nbsp;_Div&nbsp;)
</div>
<div class="code">                  &lt;&lt; HTMLEndElement( &nbsp;_TableHeader&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000878"></a>     878  void CCCC_Html_Stream::Put_Label_Cell( &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000879"></a>     879  				      string label, &nbsp; int width, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000880"></a>     880  				      string ref_name, &nbsp; string ref_href, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000881"></a>     881  				      CCCC_Record *rec_ptr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableCell, &nbsp; "label", &nbsp; width&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;ref_name.size( &nbsp;&nbsp;) &gt; 0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                // we need to insert an HTML "&lt;A NAME=...&gt; tag for the current cell
</div>
<div class="code">                // this enables other locations to jump in
</div>
<div class="code">                fstr &lt;&lt; "&lt;a name=\"" &lt;&lt; ref_name &lt;&lt; "\"&gt;&lt;/a&gt;" &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;ref_href.size( &nbsp;&nbsp;) &gt; 0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                // we need to insert an HTML &lt;A HREF=...&gt; tag for the current cell
</div>
<div class="code">                // this enables this cell to be a link to jump out
</div>
<div class="code">                fstr &lt;&lt; "&lt;a href=\"" &lt;&lt; ref_href &lt;&lt; "\"&gt;" &lt;&lt; endl;
</div>
<div class="code">                // this anchor will need to be closed after the label has been displayed
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; label;
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;ref_href.size( &nbsp;&nbsp;) &gt; 0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                // closing the anchor we opened above
</div>
<div class="code">                fstr &lt;&lt; "&lt;/a&gt;" &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;rec_ptr != 0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                fstr &lt;&lt; _HTMLLineBreak &lt;&lt; endl;
</div>
<div class="code">                Put_Extent_List( &nbsp;*rec_ptr, &nbsp;true&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableCell&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000918"></a>     918  void CCCC_Html_Stream::Put_Metric_Cell( &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000919"></a>     919  				       int count, &nbsp; string tag, &nbsp; int width&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            CCCC_Metric m( &nbsp;count, &nbsp; tag.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;m, &nbsp; width&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000925"></a>     925  void CCCC_Html_Stream::Put_Metric_Cell( &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000926"></a>     926  				       int num, &nbsp; int denom, &nbsp; string tag, &nbsp; int width&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            CCCC_Metric m( &nbsp;num, &nbsp;denom, &nbsp; tag.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;m, &nbsp; width&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000932"></a>     932  void  CCCC_Html_Stream::Put_Metric_Cell( &nbsp;const CCCC_Metric&amp; metric, &nbsp; int width&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">              const char* clasName = "metric";
</div>
<div class="code">              switch( &nbsp;metric.emphasis_level( &nbsp;&nbsp;)&nbsp;) {
</div>
<div class="code">              case elLOW: 	clasName = "metric_low"; break;
</div>
<div class="code">              case elMEDIUM: 	clasName = "metric_medium"; break;
</div>
<div class="code">              case elHIGH: 	clasName = "metric_high"; break;
</div>
<div class="code">              }
</div>
<div class="code">              fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableCell, &nbsp; clasName, &nbsp; width&nbsp;);
</div>
<div class="code">              *this &lt;&lt; metric;
</div>
<div class="code">              fstr &lt;&lt; HTMLEndElement( &nbsp;_TableCell&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000945"></a>     945  void CCCC_Html_Stream::Put_Extent_URL( &nbsp;const CCCC_Extent&amp; extent&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            string filename=extent.name( &nbsp;nlFILENAME&nbsp;);
</div>
<div class="code">            int linenumber=atoi( &nbsp;extent.name( &nbsp;nlLINENUMBER&nbsp;).c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            Source_Anchor anchor( &nbsp;filename, &nbsp; linenumber&nbsp;);
</div>
<div class="code">            string key=anchor.key( &nbsp;&nbsp;);
</div>
<div class="code">            source_anchor_map_t::value_type anchor_value( &nbsp;key, &nbsp; anchor&nbsp;);
</div>
<div class="code">            source_anchor_map.insert( &nbsp;anchor_value&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            anchor.Emit_HREF( &nbsp;fstr&nbsp;);
</div>
<div class="code">            fstr
</div>
<div class="code">          	// &lt;&lt; extent.name( &nbsp;nlDESCRIPTION&nbsp;)
</div>
<div class="code">          	&lt;&lt; _HTMLLineBreak &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000961"></a>     961  void CCCC_Html_Stream::Put_Extent_Cell( &nbsp;const CCCC_Extent&amp; extent, &nbsp; int width, &nbsp; bool withDescription&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">              fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableCell, &nbsp; "extent", &nbsp; width&nbsp;);
</div>
<div class="code">              if( &nbsp;withDescription&nbsp;)
</div>
<div class="code">                  fstr &lt;&lt; extent.name( &nbsp;nlDESCRIPTION&nbsp;) &lt;&lt; " &amp;nbsp;" &lt;&lt; endl;
</div>
<div class="code">              Put_Extent_URL( &nbsp;extent&nbsp;);
</div>
<div class="code">              fstr &lt;&lt; HTMLEndElement( &nbsp;_TableCell&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000970"></a>     970  void CCCC_Html_Stream::Put_Extent_List( &nbsp;CCCC_Record&amp; record, &nbsp; bool withDescription&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            CCCC_Extent *ext_ptr=record.extent_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;ext_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                if( &nbsp;withDescription&nbsp;)
</div>
<div class="code">                {
</div>
<div class="code">                    fstr &lt;&lt; ext_ptr-&gt;name( &nbsp;nlDESCRIPTION&nbsp;) &lt;&lt; " &amp;nbsp;" &lt;&lt; endl;
</div>
<div class="code">                }
</div>
<div class="code">                Put_Extent_URL( &nbsp;*ext_ptr&nbsp;);
</div>
<div class="code">                ext_ptr=record.extent_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            fstr &lt;&lt; _HTMLLineBreak &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000985"></a>     985  CCCC_Html_Stream&amp; operator &lt;&lt;( &nbsp;CCCC_Html_Stream&amp; os, &nbsp; const string&amp; stg&nbsp;)
</div>
<div class="code">          	{ os.fstr &lt;&lt; CCCC_Html_Stream::HTMLEscapeLiteral( &nbsp;stg.c_str( &nbsp;&nbsp;)&nbsp;); }
</div>
<div class="code">          
</div>
<div class="code">          // the next two methods define the two basic output operations through which
</div>
<div class="code">          // all of the higher level output operations are composed
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00000991"></a>     991  CCCC_Html_Stream&amp; operator &lt;&lt;( &nbsp;CCCC_Html_Stream&amp; os, &nbsp; const CCCC_Metric&amp; mtc&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            const char *emphasis_prefix[]={"&lt;span class=\"metric_low\"&gt;", &nbsp;"&lt;span class=\"metric_medium\"&gt;", &nbsp;"&lt;span class=\"metric_high\"&gt;"};
</div>
<div class="code">            const char *emphasis_suffix[]={"&lt;/span&gt;", &nbsp;"&lt;/span&gt;", &nbsp;"&lt;/span&gt;"};
</div>
<div class="code">          
</div>
<div class="code">            // by writing to the underlying ostream object, &nbsp; we avoid the escape
</div>
<div class="code">            // functionality
</div>
<div class="code">            os.fstr &lt;&lt; emphasis_prefix[mtc.emphasis_level( &nbsp;&nbsp;)]
</div>
<div class="code">          	  &lt;&lt; mtc.value_string( &nbsp;&nbsp;)
</div>
<div class="code">          	  &lt;&lt; emphasis_suffix[mtc.emphasis_level( &nbsp;&nbsp;)];
</div>
<div class="code">            return os;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001004"></a>    1004  void CCCC_Html_Stream::Separate_Modules( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // this function generates a separate HTML report for each non-trivial
</div>
<div class="code">            // module in the database
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module* mod_ptr=prjptr-&gt;module_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;mod_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                int trivial_module=mod_ptr-&gt;is_trivial( &nbsp;&nbsp;);
</div>
<div class="code">                if( &nbsp;trivial_module==FALSE&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  string info="Detailed report on module " + mod_ptr-&gt;key( &nbsp;&nbsp;);
</div>
<div class="code">          	  string filename=outdir;
</div>
<div class="code">          	  filename+="/";
</div>
<div class="code">          	  filename+=mod_ptr-&gt;key( &nbsp;&nbsp;)+".html";
</div>
<div class="code">          	  CCCC_Html_Stream module_html_str( &nbsp;filename, &nbsp;info.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  module_html_str.Put_Section_Heading( &nbsp;info.c_str( &nbsp;&nbsp;), &nbsp;"summary", &nbsp;1&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  module_html_str.Module_Summary( &nbsp;mod_ptr&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  module_html_str.Put_Section_Heading( &nbsp;"Definitions and Declarations", &nbsp;
</div>
<div class="code">          										  "modext", &nbsp;2&nbsp;);
</div>
<div class="code">          	  module_html_str.fstr &lt;&lt; HTMLBeginElement( &nbsp;_Table, &nbsp; "summary"&nbsp;)
</div>
<div class="code">          			  	  	  	   &lt;&lt; HTMLBeginElement( &nbsp;_TableHead&nbsp;)
</div>
<div class="code">          						   &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	  module_html_str.Put_Label_Cell( &nbsp;"Description", &nbsp;50&nbsp;);
</div>
<div class="code">          	  module_html_str.Put_Header_Cell( &nbsp;"LOC", &nbsp;10&nbsp;);
</div>
<div class="code">          	  module_html_str.Put_Header_Cell( &nbsp;"MVG", &nbsp;10&nbsp;);
</div>
<div class="code">          	  module_html_str.Put_Header_Cell( &nbsp;"COM", &nbsp;10&nbsp;);
</div>
<div class="code">          	  module_html_str.Put_Header_Cell( &nbsp;"L_C", &nbsp;10&nbsp;);
</div>
<div class="code">          	  module_html_str.Put_Header_Cell( &nbsp;"M_C", &nbsp;10&nbsp;);
</div>
<div class="code">          	  module_html_str.fstr
</div>
<div class="code">          	  	  	  &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;)
</div>
<div class="code">          			  &lt;&lt; HTMLEndElement( &nbsp;_TableHead&nbsp;);
</div>
<div class="code">          	  module_html_str.Module_Detail( &nbsp;mod_ptr&nbsp;);
</div>
<div class="code">          	  module_html_str.fstr &lt;&lt; HTMLEndElement( &nbsp;_Table&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  module_html_str.Put_Section_Heading( &nbsp;"Functions", &nbsp;"proc", &nbsp;2&nbsp;);
</div>
<div class="code">          	  module_html_str.fstr &lt;&lt; HTMLBeginElement( &nbsp;_Table, &nbsp; "summary"&nbsp;)
</div>
<div class="code">          	  	  	  	  	  	   &lt;&lt; HTMLBeginElement( &nbsp;_TableHead&nbsp;)
</div>
<div class="code">          						   &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	  module_html_str.Put_Label_Cell( &nbsp;"Function prototype", &nbsp;50&nbsp;);
</div>
<div class="code">          	  module_html_str.Put_Header_Cell( &nbsp;"LOC", &nbsp;10&nbsp;);
</div>
<div class="code">          	  module_html_str.Put_Header_Cell( &nbsp;"MVG", &nbsp;10&nbsp;);
</div>
<div class="code">          	  module_html_str.Put_Header_Cell( &nbsp;"COM", &nbsp;10&nbsp;);
</div>
<div class="code">          	  module_html_str.Put_Header_Cell( &nbsp;"L_C", &nbsp;10&nbsp;);
</div>
<div class="code">          	  module_html_str.Put_Header_Cell( &nbsp;"M_C", &nbsp;10&nbsp;);
</div>
<div class="code">          	  module_html_str.fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;)
</div>
<div class="code">          						   &lt;&lt; HTMLEndElement( &nbsp;_TableHead&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	  module_html_str.Procedural_Detail( &nbsp;mod_ptr&nbsp;);
</div>
<div class="code">          	  module_html_str.fstr &lt;&lt; HTMLEndElement( &nbsp;_Table&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  module_html_str.Put_Section_Heading( &nbsp;"Relationships", &nbsp;"structdet", &nbsp;2&nbsp;);
</div>
<div class="code">          	  module_html_str.fstr &lt;&lt; HTMLBeginElement( &nbsp;_Table, &nbsp; "summary"&nbsp;)
</div>
<div class="code">          			  &lt;&lt; HTMLBeginElement( &nbsp;_TableHead&nbsp;)
</div>
<div class="code">          			  &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;)
</div>
<div class="code">          			  &lt;&lt; HTMLBeginElement( &nbsp;_TableHeader, &nbsp; "", &nbsp; 50&nbsp;) &lt;&lt; "Clients" &lt;&lt; HTMLEndElement( &nbsp;_TableHeader&nbsp;)
</div>
<div class="code">          			  &lt;&lt; HTMLBeginElement( &nbsp;_TableHeader, &nbsp; "", &nbsp; 50&nbsp;) &lt;&lt; "Suppliers" &lt;&lt; HTMLEndElement( &nbsp;_TableHeader&nbsp;)
</div>
<div class="code">          			  &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl
</div>
<div class="code">          			  &lt;&lt; HTMLEndElement( &nbsp;_TableHead&nbsp;) &lt;&lt; endl
</div>
<div class="code">          			  &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	  module_html_str.Structural_Detail( &nbsp;mod_ptr&nbsp;);
</div>
<div class="code">          	  module_html_str.fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; HTMLEndElement( &nbsp;_Table&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          	}
</div>
<div class="code">                else
</div>
<div class="code">          	{
</div>
<div class="code">          #if 0
</div>
<div class="code">          	  cerr &lt;&lt; mod_ptr-&gt;module_type &lt;&lt; " " &lt;&lt; mod_ptr-&gt;key( &nbsp;&nbsp;)
</div>
<div class="code">          	       &lt;&lt; " is trivial" &lt;&lt; endl;
</div>
<div class="code">          #endif
</div>
<div class="code">          	}
</div>
<div class="code">                mod_ptr=prjptr-&gt;module_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001082"></a>    1082  void CCCC_Html_Stream::Module_Detail( &nbsp;CCCC_Module *module_ptr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // this function generates the contents of the table of definition
</div>
<div class="code">            // and declaration extents for a single module
</div>
<div class="code">          
</div>
<div class="code">            // the output needs to be enveloped in a pair of &lt;TABLE&gt;&lt;/TABLE&gt; tags
</div>
<div class="code">            // these have not been put within the function because it is designed
</div>
<div class="code">            // to be used in two contexts:
</div>
<div class="code">            // 1. within the Separate_Modules function, &nbsp; wrapped directly in the table
</div>
<div class="code">            //    tags
</div>
<div class="code">            // 2. within the Module_Detail function, &nbsp; where the table tags are
</div>
<div class="code">            //    around the output of many calls to this function ( &nbsp;not yet implemented&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Record::Extent_Table::iterator eIter = module_ptr-&gt;extent_table.begin( &nbsp;&nbsp;);
</div>
<div class="code">            if( &nbsp;eIter==module_ptr-&gt;extent_table.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                fstr 	&lt;&lt; HTMLSingleEntryRow( &nbsp;6, &nbsp; "No module extents have been identified for this module"&nbsp;) &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                while( &nbsp;eIter!=module_ptr-&gt;extent_table.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  CCCC_Extent *ext_ptr=( &nbsp;*eIter&nbsp;).second;
</div>
<div class="code">          	  fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	  Put_Extent_Cell( &nbsp;*ext_ptr, &nbsp;0, &nbsp;true&nbsp;);
</div>
<div class="code">          	  int loc=ext_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;);
</div>
<div class="code">          	  int mvg=ext_ptr-&gt;get_count( &nbsp;COUNT_TAG_CYCLOMATIC_NUMBER&nbsp;);
</div>
<div class="code">          	  int com=ext_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_COMMENT&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;loc, &nbsp; "LOCf"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;mvg, &nbsp; "MVGf"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;com&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;loc, &nbsp; com, &nbsp; "L_C"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;mvg, &nbsp; com, &nbsp; "M_C"&nbsp;)&nbsp;);
</div>
<div class="code">          	  fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          	  eIter++;
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001123"></a>    1123  void CCCC_Html_Stream::Procedural_Detail( &nbsp;CCCC_Module *module_ptr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // this function generates the contents of the procedural detail table
</div>
<div class="code">            // relating to a single module
</div>
<div class="code">          
</div>
<div class="code">            // the output needs to be enveloped in a pair of &lt;TABLE&gt;&lt;/TABLE&gt; tags
</div>
<div class="code">            // these have not been put within the function because it is designed
</div>
<div class="code">            // to be used in two contexts:
</div>
<div class="code">            // 1. within the Separate_Modules function, &nbsp; wrapped directly in the table
</div>
<div class="code">            //    tags
</div>
<div class="code">            // 2. within the Procedural_Detail function, &nbsp; where the table tags are
</div>
<div class="code">            //    around the output of many calls to this function
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module::member_map_t::iterator iter = module_ptr-&gt;member_map.begin( &nbsp;&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;iter==module_ptr-&gt;member_map.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">                fstr &lt;&lt; HTMLSingleEntryRow( &nbsp;6, &nbsp; "No member functions have been identified for this module"&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                while( &nbsp;iter!=module_ptr-&gt;member_map.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  CCCC_Member *mem_ptr=( &nbsp;*iter&nbsp;).second;
</div>
<div class="code">          	  fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	  Put_Label_Cell( &nbsp;mem_ptr-&gt;name( &nbsp;nlLOCAL&nbsp;).c_str( &nbsp;&nbsp;), &nbsp;0, &nbsp;"", &nbsp;"", &nbsp;mem_ptr&nbsp;);
</div>
<div class="code">          	  int loc=mem_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;);
</div>
<div class="code">          	  int mvg=mem_ptr-&gt;get_count( &nbsp;COUNT_TAG_CYCLOMATIC_NUMBER&nbsp;);
</div>
<div class="code">          	  int com=mem_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_COMMENT&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;loc, &nbsp; "LOCf"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;mvg, &nbsp; "MVGf"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;com&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;loc, &nbsp; com, &nbsp; "L_C"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Cell( &nbsp;CCCC_Metric( &nbsp;mvg, &nbsp; com, &nbsp; "M_C"&nbsp;)&nbsp;);
</div>
<div class="code">          	  fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          	  iter++;
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001163"></a>    1163  void CCCC_Html_Stream::Metric_Description( &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001164"></a>    1164  					  string abbreviation, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001165"></a>    1165  					  string name, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001166"></a>    1166  					  string description&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // this is intended to be called in the context of an unnumbered list
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_ListItem&nbsp;)
</div>
<div class="code">                 &lt;&lt; abbreviation;
</div>
<div class="code">            if ( &nbsp;!name.empty( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">                fstr  &lt;&lt; " = " &lt;&lt; name;
</div>
<div class="code">            fstr &lt;&lt; HTMLParagraph( &nbsp;description.c_str( &nbsp;&nbsp;)&nbsp;) &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; HTMLEndElement( &nbsp;_ListItem&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001177"></a>    1177  void CCCC_Html_Stream::Structural_Detail( &nbsp;CCCC_Module *module_ptr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            Put_Structural_Details_Cell( &nbsp;module_ptr, &nbsp; prjptr, &nbsp; rmeCLIENT, &nbsp; nlCLIENT&nbsp;);
</div>
<div class="code">            Put_Structural_Details_Cell( &nbsp;module_ptr, &nbsp; prjptr, &nbsp; rmeSUPPLIER, &nbsp; nlSUPPLIER&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001183"></a>    1183  void CCCC_Html_Stream::Module_Summary( &nbsp;CCCC_Module *module_ptr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // calculate the counts on which all displayed data will be based
</div>
<div class="code">            // int nof=module_ptr-&gt;member_table.records( &nbsp;&nbsp;); // Number of functions
</div>
<div class="code">            int nof=0;
</div>
<div class="code">            int loc=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;);
</div>
<div class="code">            int mvg=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_CYCLOMATIC_NUMBER&nbsp;);
</div>
<div class="code">            int com=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_COMMENT&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            // the variants of IF4 measure information flow and couplings
</div>
<div class="code">            int if4=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4&nbsp;);
</div>
<div class="code">            int if4v=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4 COUNT_TAG_VISIBLE_SUFFIX&nbsp;);
</div>
<div class="code">            int if4c=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4 COUNT_TAG_CONCRETE_SUFFIX&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            int wmc1=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_WEIGHTED_METHODS_PER_CLASS_UNITY&nbsp;);
</div>
<div class="code">            int wmcv=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_WEIGHTED_METHODS_PER_CLASS COUNT_TAG_VISIBLE_SUFFIX&nbsp;);
</div>
<div class="code">            int dit=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_INHERITANCE_TREE_DEPTH&nbsp;);
</div>
<div class="code">            int noc=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_NUMBER_OF_CHILDREN&nbsp;);
</div>
<div class="code">            int cbo=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_COUPLING_BETWEEN_OBJECTS&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_Table, &nbsp; "summary"&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableHead&nbsp;)
</div>
<div class="code">                 &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Metric", &nbsp;70&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Tag", &nbsp;10&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Overall", &nbsp;10&nbsp;);
</div>
<div class="code">            Put_Header_Cell( &nbsp;"Per Function", &nbsp;10&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;)
</div>
<div class="code">                 &lt;&lt; HTMLEndElement( &nbsp;_TableHead&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Lines of Code"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"LOC"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;loc, &nbsp;"LOCm"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;loc, &nbsp;nof, &nbsp;"LOCg"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"McCabe's Cyclomatic Number"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"MVG"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;mvg, &nbsp;"MVGm"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;mvg, &nbsp;nof, &nbsp;"MVGf"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Lines of Comment"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"COM"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;com, &nbsp;"COMm"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;com, &nbsp;nof, &nbsp;"8.3"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"LOC/COM"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"L_C"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;loc, &nbsp;com, &nbsp;"L_C"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLTableCell( &nbsp;"&amp;nbsp;"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"MVG/COM"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"M_C"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;mvg, &nbsp;com, &nbsp;"M_C"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLTableCell( &nbsp;"&amp;nbsp;"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Weighted Methods per Class ( &nbsp;weighting = unity&nbsp;)"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"WMC1"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;wmc1&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLTableCell( &nbsp;"&amp;nbsp;"&nbsp;); // wmc1 should be identical to nof
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Weighted Methods per Class ( &nbsp;weighting = visible&nbsp;)"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"WMCv"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;wmcv&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLTableCell( &nbsp;"&amp;nbsp;"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Depth of Inheritance Tree"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"DIT"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;dit&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLTableCell( &nbsp;"&amp;nbsp;"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Number of Children"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"NOC"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;noc&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLTableCell( &nbsp;"&amp;nbsp;"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Coupling between objects"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"CBO"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;cbo&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLTableCell( &nbsp;"&amp;nbsp;"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Information Flow measure ( &nbsp;inclusive&nbsp;)"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"IF4"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;if4, &nbsp;1, &nbsp;"IF4"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;if4, &nbsp;nof, &nbsp;"8.3"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Information Flow measure ( &nbsp;visible&nbsp;)"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"IF4v"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;if4v, &nbsp;1, &nbsp;"IF4v"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;if4v, &nbsp;nof, &nbsp;"8.3"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLBeginElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"Information Flow measure ( &nbsp;concrete&nbsp;)"&nbsp;);
</div>
<div class="code">            Put_Label_Cell( &nbsp;"IF4c"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;if4c, &nbsp;1, &nbsp;"IF4c"&nbsp;);
</div>
<div class="code">            Put_Metric_Cell( &nbsp;if4c, &nbsp;nof, &nbsp;"8.3"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_TableRow&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; HTMLEndElement( &nbsp;_Table&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001309"></a>    1309  CCCC_Html_Stream::CCCC_Html_Stream( &nbsp;const string&amp; fname, &nbsp; const string&amp; info&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // cerr &lt;&lt; "Attempting to open file in directory " &lt;&lt; outdir.c_str( &nbsp;&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            fstr.open( &nbsp;fname.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            if( &nbsp;fstr.good( &nbsp;&nbsp;) != TRUE&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                cerr &lt;&lt; "failed to open " &lt;&lt; fname.c_str( &nbsp;&nbsp;)
</div>
<div class="code">          	   &lt;&lt; " for output in directory " &lt;&lt; outdir.c_str( &nbsp;&nbsp;) &lt;&lt; endl;
</div>
<div class="code">                exit( &nbsp;1&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                // cerr &lt;&lt; "File: " &lt;&lt; fname &lt;&lt; " Info: " &lt;&lt; info &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            string top = _HTMLBoilerplateTop;
</div>
<div class="code">            for ( &nbsp;size_t s = 0; ( &nbsp;s = top.find( &nbsp;"${TITLE}", &nbsp; s&nbsp;)&nbsp;) != string::npos; s += info.size( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	  top.replace( &nbsp;s, &nbsp; 8, &nbsp; info&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; top;
</div>
<div class="code">            PopulateJSTooltipMap( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001331"></a>    1331  int setup_anchor_data( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int i=0;
</div>
<div class="code">            Source_Anchor a1( &nbsp;"cccc_use.h", &nbsp;12&nbsp;);
</div>
<div class="code">            Source_Anchor a2( &nbsp;"cccc_htm.h", &nbsp;15&nbsp;);
</div>
<div class="code">            i++;
</div>
<div class="code">            string key1=a1.key( &nbsp;&nbsp;), &nbsp; key2=a2.key( &nbsp;&nbsp;);
</div>
<div class="code">            i++;
</div>
<div class="code">            source_anchor_map_t::value_type v1( &nbsp;key1, &nbsp;a1&nbsp;);
</div>
<div class="code">            source_anchor_map_t::value_type v2( &nbsp;key2, &nbsp;a2&nbsp;);
</div>
<div class="code">            i++;
</div>
<div class="code">            source_anchor_map.insert( &nbsp;v1&nbsp;);
</div>
<div class="code">            source_anchor_map.insert( &nbsp;v2&nbsp;);
</div>
<div class="code">            return i;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001348"></a>    1348  void CCCC_Html_Stream::Source_Listing( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // The variable stream src_str used to be an instance
</div>
<div class="code">            // of fstream which gets reopened many times.
</div>
<div class="code">            // this worked under Linux but broke under Win32, &nbsp; so
</div>
<div class="code">            // this variable is now a pointer which is repeatedly
</div>
<div class="code">            // deleted and new'ed
</div>
<div class="code">          
</div>
<div class="code">            string current_filename;
</div>
<div class="code">            int current_line=0;
</div>
<div class="code">            int next_anchor_required=0;
</div>
<div class="code">            ifstream *src_str=NULL;
</div>
<div class="code">            string style_open = HTMLBeginElement( &nbsp;_Div, &nbsp; "code"&nbsp;), &nbsp; style_close = HTMLEndElement( &nbsp;_Div&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            string filename=outdir;
</div>
<div class="code">            filename+="/cccc_src.html";
</div>
<div class="code">            CCCC_Html_Stream source_html_str( &nbsp;filename.c_str( &nbsp;&nbsp;), &nbsp;"source file"&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            source_anchor_map_t::iterator iter=source_anchor_map.begin( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;iter!=source_anchor_map.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                char linebuf[1024];
</div>
<div class="code">                Source_Anchor&amp; nextAnchor=( &nbsp;*iter&nbsp;).second;
</div>
<div class="code">                if( &nbsp;current_filename!=nextAnchor.get_file( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  current_filename=nextAnchor.get_file( &nbsp;&nbsp;);
</div>
<div class="code">          	  current_line=0;
</div>
<div class="code">          	  delete src_str;
</div>
<div class="code">          	  src_str=new ifstream( &nbsp;current_filename.c_str( &nbsp;&nbsp;), &nbsp;std::ios::in&nbsp;);
</div>
<div class="code">          	  src_str-&gt;getline( &nbsp;linebuf, &nbsp;1023&nbsp;);
</div>
<div class="code">          	  source_html_str.Put_Section_Heading( &nbsp;current_filename.c_str( &nbsp;&nbsp;), &nbsp; current_filename.c_str( &nbsp;&nbsp;), &nbsp; 1&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">          
</div>
<div class="code">                while( &nbsp;src_str-&gt;good( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  current_line++;
</div>
<div class="code">                    source_html_str.fstr &lt;&lt; style_open;
</div>
<div class="code">          	  if( &nbsp;
</div>
<div class="code">          	     ( &nbsp;iter!=source_anchor_map.end( &nbsp;&nbsp;)&nbsp;) &amp;&amp;
</div>
<div class="code">          	     ( &nbsp;current_filename==( &nbsp;*iter&nbsp;).second.get_file( &nbsp;&nbsp;)&nbsp;) &amp;&amp;
</div>
<div class="code">          	     ( &nbsp;current_line==( &nbsp;*iter&nbsp;).second.get_line( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	     &nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      ( &nbsp;*iter&nbsp;).second.Emit_NAME( &nbsp;source_html_str.fstr&nbsp;);
</div>
<div class="code">          	      iter++;
</div>
<div class="code">          	    }
</div>
<div class="code">          	  else
</div>
<div class="code">          	    {
</div>
<div class="code">          	      ( &nbsp;*iter&nbsp;).second.Emit_SPACE( &nbsp;source_html_str.fstr&nbsp;);
</div>
<div class="code">          	    }
</div>
<div class="code">           	  source_html_str &lt;&lt; linebuf;
</div>
<div class="code">           	  source_html_str.fstr &lt;&lt; endl;
</div>
<div class="code">                    source_html_str.fstr &lt;&lt; style_close &lt;&lt; endl;
</div>
<div class="code">          	  src_str-&gt;getline( &nbsp;linebuf, &nbsp;1023&nbsp;);
</div>
<div class="code">           	}
</div>
<div class="code">          
</div>
<div class="code">                // if there are any remaining anchors for this file the sorting
</div>
<div class="code">                // by line number must be wrong
</div>
<div class="code">                // complain and ignore
</div>
<div class="code">                while( &nbsp;
</div>
<div class="code">          	    ( &nbsp;iter!=source_anchor_map.end( &nbsp;&nbsp;)&nbsp;) &amp;&amp;
</div>
<div class="code">          	    ( &nbsp;current_filename==( &nbsp;*iter&nbsp;).second.get_file( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	    &nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">                    source_html_str.fstr &lt;&lt; style_open;
</div>
<div class="code">          	  ( &nbsp;*iter&nbsp;).second.Emit_NAME( &nbsp;source_html_str.fstr&nbsp;);
</div>
<div class="code">                    source_html_str.fstr &lt;&lt; style_close;
</div>
<div class="code">          	  iter++;
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            // delete the last input stream created
</div>
<div class="code">            delete src_str;
</div>
<div class="code">          
</div>
<div class="code">            source_html_str.fstr &lt;&lt; _HTMLBoilerplateBottom;
</div>
<div class="code">          
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001426"></a>    1426  static string pad_string( &nbsp;int target_width, &nbsp; string the_string, &nbsp; string padding&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int spaces_required=target_width-the_string.size( &nbsp;&nbsp;);
</div>
<div class="code">            string pad_string;
</div>
<div class="code">            while( &nbsp;spaces_required&gt;0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                pad_string+=padding;
</div>
<div class="code">                spaces_required--;
</div>
<div class="code">              }
</div>
<div class="code">            return pad_string+the_string;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001439"></a>    1439  string Source_Anchor::key( &nbsp;&nbsp;) const
</div>
<div class="code">          {
</div>
<div class="code">            char linebuf[16];
</div>
<div class="code">            snprintf( &nbsp;linebuf, &nbsp; sizeof( &nbsp;linebuf&nbsp;), &nbsp; "%08d", &nbsp; line_&nbsp;);
</div>
<div class="code">            return file_ + ":" + linebuf;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001447"></a>    1447  void Source_Anchor::Emit_HREF( &nbsp;ofstream&amp; fstr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            string anchor_key=key( &nbsp;&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; "&lt;a class=\"sourceAnchor\" href=\"cccc_src.html#" &lt;&lt; anchor_key.c_str( &nbsp;&nbsp;) &lt;&lt; "\"&gt;"
</div>
<div class="code">                 &lt;&lt; file_.c_str( &nbsp;&nbsp;) &lt;&lt; ":" &lt;&lt; line_
</div>
<div class="code">                 &lt;&lt; "&lt;/a&gt;";
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001456"></a>    1456  void Source_Anchor::Emit_NAME( &nbsp;ofstream&amp; fstr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            string anchor_key=key( &nbsp;&nbsp;);
</div>
<div class="code">            char ln_buf[32];
</div>
<div class="code">            snprintf( &nbsp;ln_buf, &nbsp; sizeof( &nbsp;ln_buf&nbsp;), &nbsp; "%d", &nbsp; line_&nbsp;);
</div>
<div class="code">            string ln_string=pad_string( &nbsp;8, &nbsp; ln_buf, &nbsp; " "&nbsp;);
</div>
<div class="code">            string space_string=pad_string( &nbsp;2, &nbsp; "", &nbsp;" "&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; "&lt;a name=\"" &lt;&lt; anchor_key.c_str( &nbsp;&nbsp;) &lt;&lt; "\"&gt;&lt;/a&gt;"
</div>
<div class="code">                 &lt;&lt; ln_string.c_str( &nbsp;&nbsp;) &lt;&lt; space_string.c_str( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001467"></a>    1467  void Source_Anchor::Emit_SPACE( &nbsp;ofstream&amp; fstr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            string space_string=pad_string( &nbsp;10, &nbsp; "", &nbsp; " "&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; space_string.c_str( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          /*****************************************************************************
</div>
<div class="code">           * The below calls and constants are dedicated to isolating the raw HTML
</div>
<div class="code">           * text from the code proper.
</div>
<div class="code">           */
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001477"></a>    1477  string CCCC_Html_Stream::HTMLSingleEntryRow( &nbsp;int columnCount, &nbsp; const char* txt, &nbsp; int height&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">              stringstream buf;
</div>
<div class="code">              buf &lt;&lt; "&lt;tr";
</div>
<div class="code">              if ( &nbsp;height &gt;= 0&nbsp;)
</div>
<div class="code">                  buf &lt;&lt; " style=\"height: \"" &lt;&lt; height &lt;&lt; "px;\"";
</div>
<div class="code">              buf &lt;&lt; "&gt;&lt;td colspan=\"" &lt;&lt; columnCount &lt;&lt; "\"&gt;" &lt;&lt; txt &lt;&lt; "&lt;/td&gt;&lt;/tr&gt;";
</div>
<div class="code">              return buf.str( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001487"></a>    1487  string CCCC_Html_Stream::HTMLMultiColumnHeaderCell( &nbsp;const char* text, &nbsp; int columnCount&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">              stringstream buf;
</div>
<div class="code">              buf &lt;&lt; "&lt;th";
</div>
<div class="code">              if ( &nbsp;columnCount &gt; 1&nbsp;)
</div>
<div class="code">                  buf &lt;&lt; " colspan=\"" &lt;&lt; columnCount &lt;&lt; "\"";
</div>
<div class="code">              buf &lt;&lt; "&gt;" &lt;&lt; text &lt;&lt; "&lt;/th&gt;";
</div>
<div class="code">              return buf.str( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001497"></a>    1497  string CCCC_Html_Stream::HTMLBeginElement( &nbsp;const char* nam, &nbsp; const char* clas, &nbsp; int width&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">              stringstream buf;
</div>
<div class="code">              buf &lt;&lt; "&lt;" &lt;&lt; nam;
</div>
<div class="code">              if ( &nbsp;clas[0] != 0&nbsp;)
</div>
<div class="code">                  buf &lt;&lt; " class=\"" &lt;&lt; clas &lt;&lt; "\"";
</div>
<div class="code">              if ( &nbsp;width &gt;= 0&nbsp;)
</div>
<div class="code">                  buf &lt;&lt; " style=\"width: " &lt;&lt; width &lt;&lt; "%;\"";
</div>
<div class="code">              buf &lt;&lt; "&gt;";
</div>
<div class="code">              return buf.str( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001509"></a>    1509  string CCCC_Html_Stream::HTMLTableCell( &nbsp;const char* txt, &nbsp; const char* clasName, &nbsp; int width&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">              stringstream buf;
</div>
<div class="code">              buf &lt;&lt; HTMLBeginElement( &nbsp;_TableCell, &nbsp; clasName, &nbsp; width&nbsp;)
</div>
<div class="code">          	        &lt;&lt; txt
</div>
<div class="code">          	        &lt;&lt; HTMLEndElement( &nbsp;_TableCell&nbsp;);
</div>
<div class="code">              return buf.str( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001518"></a>    1518  string CCCC_Html_Stream::HTMLParagraph( &nbsp;const char* txt&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">              stringstream buf;
</div>
<div class="code">              buf &lt;&lt; "&lt;p&gt;" &lt;&lt; txt &lt;&lt; "&lt;/p&gt;";
</div>
<div class="code">              return buf.str( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001525"></a>    1525  string CCCC_Html_Stream::HTMLEndElement( &nbsp;const char* nam&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">              stringstream buf;
</div>
<div class="code">              buf &lt;&lt; "&lt;/" &lt;&lt; nam &lt;&lt; "&gt;";
</div>
<div class="code">              return buf.str( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001532"></a>    1532  string CCCC_Html_Stream::JSEscapeStringLiteral( &nbsp;const char* inp&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">              stringstream ret;
</div>
<div class="code">              for ( &nbsp;const char* p = inp; *p != 0; ++p&nbsp;) {
</div>
<div class="code">                  switch ( &nbsp;*p&nbsp;) {
</div>
<div class="code">                  case '\'': ret &lt;&lt; "\\'"; break;
</div>
<div class="code">                  case '\\': ret &lt;&lt; "\\\\"; break;
</div>
<div class="code">                  case '\r': break;
</div>
<div class="code">                  case '\n': ret &lt;&lt; "\\n\\\n"; break;
</div>
<div class="code">                  default: ret &lt;&lt; *p; break;
</div>
<div class="code">                  }
</div>
<div class="code">              }
</div>
<div class="code">              return ret.str( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001547"></a>    1547  string CCCC_Html_Stream::HTMLEscapeLiteral( &nbsp;const char* inp&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">              stringstream buf;
</div>
<div class="code">              for ( &nbsp;const char* cptr = inp; *cptr != 0; ++cptr&nbsp;) {
</div>
<div class="code">                  // the purpose of this is to filter out the characters which
</div>
<div class="code">                  // must be escaped in HTML
</div>
<div class="code">                  switch( &nbsp;*cptr&nbsp;) {
</div>
<div class="code">                  case '&gt;': buf &lt;&lt; "&amp;gt;" ; break;
</div>
<div class="code">                  case '&lt;': buf &lt;&lt; "&amp;lt;" ; break;
</div>
<div class="code">                  case '&amp;': buf &lt;&lt; "&amp;amp;"; break;
</div>
<div class="code">                  // commas and parentheses do not need to be escaped, &nbsp; but
</div>
<div class="code">                  // we want to allow line breaking just inside
</div>
<div class="code">                  // parameter lists and after commas
</div>
<div class="code">                  // we insert a non-breaking space to guarantee a small indent
</div>
<div class="code">                  // on the new line, &nbsp; and one before the right parenthesis for
</div>
<div class="code">                  // symmetry
</div>
<div class="code">                  case ', &nbsp;': buf &lt;&lt; ", &nbsp; &amp;nbsp;" ; break;
</div>
<div class="code">                  case '( &nbsp;': buf &lt;&lt; "( &nbsp; &amp;nbsp;" ; break;
</div>
<div class="code">                  case '&nbsp;)': buf &lt;&lt; "&amp;nbsp;&nbsp;)" ; break;
</div>
<div class="code">                  default : buf &lt;&lt; ( &nbsp;*cptr&nbsp;);
</div>
<div class="code">                  }
</div>
<div class="code">              }
</div>
<div class="code">              return buf.str( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001572"></a>    1572  void CCCC_Html_Stream::PopulateJSTooltipMap( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">              const metric_description_t* ptrs[] = { &amp;ProjectSummaryMetrics[0], &nbsp; &amp;OODesignMetrics[0], &nbsp; &amp;StructuralSummaryMetrics[0] };
</div>
<div class="code">              int counts[] = { COUNTOF( &nbsp;ProjectSummaryMetrics&nbsp;), &nbsp; COUNTOF( &nbsp;OODesignMetrics&nbsp;), &nbsp; COUNTOF( &nbsp;StructuralSummaryMetrics&nbsp;) };
</div>
<div class="code">              fstr &lt;&lt; "&lt;script type=\"text/javascript\"&gt;";
</div>
<div class="code">              for ( &nbsp;int k = 0; k &lt; COUNTOF( &nbsp;ptrs&nbsp;); ++k&nbsp;) {
</div>
<div class="code">                  for ( &nbsp;int j = 0; j &lt; counts[k]; ++j&nbsp;)
</div>
<div class="code">                      fstr &lt;&lt; "  window.g_Glossary['"
</div>
<div class="code">                           &lt;&lt; JSEscapeStringLiteral( &nbsp;ptrs[k][j].abbreviation&nbsp;) &lt;&lt; "'] = {"
</div>
<div class="code">                              "  name: '" &lt;&lt; JSEscapeStringLiteral( &nbsp;( &nbsp;strlen( &nbsp;ptrs[k][j].name&nbsp;) == 0&nbsp;) ? ptrs[k][j].abbreviation : ptrs[k][j].name&nbsp;) &lt;&lt; "', &nbsp; "
</div>
<div class="code">                              "  description: '" &lt;&lt; JSEscapeStringLiteral( &nbsp;ptrs[k][j].description&nbsp;) &lt;&lt; "' };\n";
</div>
<div class="code">              }
</div>
<div class="code">              fstr &lt;&lt; "&lt;/script&gt;" &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          const char* CCCC_Html_Stream::_Table = "table";
</div>
<div class="code">          const char* CCCC_Html_Stream::_TableHead = "thead";
</div>
<div class="code">          const char* CCCC_Html_Stream::_TableFoot = "tfoot";
</div>
<div class="code">          const char* CCCC_Html_Stream::_TableRow = "tr";
</div>
<div class="code">          const char* CCCC_Html_Stream::_TableHeader = "th";
</div>
<div class="code">          const char* CCCC_Html_Stream::_TableCell = "td";
</div>
<div class="code">          const char* CCCC_Html_Stream::_Anchor = "a";
</div>
<div class="code">          const char* CCCC_Html_Stream::_ListItem = "li";
</div>
<div class="code">          const char* CCCC_Html_Stream::_Span = "span";
</div>
<div class="code">          const char* CCCC_Html_Stream::_Div = "div";
</div>
<div class="code">          const char* CCCC_Html_Stream::_UnorderedList = "ul";
</div>
<div class="code">          const char* CCCC_Html_Stream::_HTMLLineBreak = "&lt;br /&gt;";
</div>
<div class="code">          
</div>
<div class="code">          const char* CCCC_Html_Stream::_HTMLBoilerplateTop =
</div>
<div class="code">                  "&lt;!DOCTYPE html&gt;\n"
</div>
<div class="code">                  "&lt;html&gt;\n"
</div>
<div class="code">                  "  &lt;head&gt;\n"
</div>
<div class="code">                  "    &lt;title&gt;${TITLE}&lt;/title&gt;\n"
</div>
<div class="code">                  "  &lt;/head&gt;\n"
</div>
<div class="code">                  "  &lt;style type=\"text/css\"&gt;\n"
</div>
<div class="code">                  "      body {\n"
</div>
<div class="code">                  "          font-family: sans-serif;\n"
</div>
<div class="code">                  "          margin-left: 8pt;\n"
</div>
<div class="code">                  "          margin-right: 8pt;\n"
</div>
<div class="code">                  "          width: 98%;\n"
</div>
<div class="code">                  "          position: relative;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      p {\n"
</div>
<div class="code">                  "          margin-top: 8pt;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      table {\n"
</div>
<div class="code">                  "           width: 100%;\n"
</div>
<div class="code">                  "           border-top: 1px solid black;\n"
</div>
<div class="code">                  "           border-spacing: 0;\n"
</div>
<div class="code">                  "           border-collapse: collapse;\n"
</div>
<div class="code">                  "           border-left: 1px solid black;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      table.toc th {\n"
</div>
<div class="code">                  "           background-color: aqua;\n"
</div>
<div class="code">                  "           padding: 3pt;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      table.toc td {\n"
</div>
<div class="code">                  "           padding: 2pt;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      table td, &nbsp; table th {\n"
</div>
<div class="code">                  "           border-bottom: 1px solid black;\n"
</div>
<div class="code">                  "           border-right: 1px solid black;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      td.toc_entry_name {\n"
</div>
<div class="code">                  "           text-align: left;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      table.summary th {\n"
</div>
<div class="code">                  "           background-color: aqua;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      table.summary td {\n"
</div>
<div class="code">                  "           font-family: monospace;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      *.code {\n"
</div>
<div class="code">                  "           font-family: monospace;\n"
</div>
<div class="code">                  "           white-space: pre;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      span.metric_low {\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      span.metric_medium {\n"
</div>
<div class="code">                  "           font-style: italic;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      span.metric_high {\n"
</div>
<div class="code">                  "           font-weight: bold;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      td.metric_low, &nbsp; td.metric_medium, &nbsp; td.metric_high {\n"
</div>
<div class="code">                  "           text-align: right;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      td.metric_low {\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      td.metric_medium {\n"
</div>
<div class="code">                  "          background-color: yellow;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      td.metric_high {\n"
</div>
<div class="code">                  "          background-color: red;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      a {\n"
</div>
<div class="code">                  "          text-decoration: none;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      a:visited {\n"
</div>
<div class="code">                  "          color: purple;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      a:hover {\n"
</div>
<div class="code">                  "          color: red;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      *.label {\n"
</div>
<div class="code">                  "          background-color: #eee;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      li p {\n"
</div>
<div class="code">                  "          margin-top: 2pt;\n"
</div>
<div class="code">                  "          margin-bottom: 4pt;\n"
</div>
<div class="code">                  "          padding-left: 10pt;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      div.tooltip {\n"
</div>
<div class="code">                  "          display: none;\n"
</div>
<div class="code">                  "          position: fixed;\n"
</div>
<div class="code">                  "          border: 1px solid black;\n"
</div>
<div class="code">                  "          background-color: #ddffdd;\n"
</div>
<div class="code">                  "          width: 300px;\n"
</div>
<div class="code">                  "          z-index: 2;\n"
</div>
<div class="code">                  "          font-size: smaller;\n"
</div>
<div class="code">                  "          padding: 5pt;\n"
</div>
<div class="code">                  "          text-align: justify;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      div.stickyHead {\n"
</div>
<div class="code">                  "         display: none;\n"
</div>
<div class="code">                  "         width: 98%;\n"
</div>
<div class="code">                  "         position: fixed;\n"
</div>
<div class="code">                  "         top: 0pt;\n"
</div>
<div class="code">                  "         z-index: 1;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      div.ttname {\n"
</div>
<div class="code">                  "          font-weight: bold;\n"
</div>
<div class="code">                  "          margin-bottom: 5pt;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "      #debug {\n"
</div>
<div class="code">                  "          border: 1px solid black;\n"
</div>
<div class="code">                  "          background-color: red;\n"
</div>
<div class="code">                  "          position: fixed;\n"
</div>
<div class="code">                  "          top: 100pt;\n"
</div>
<div class="code">                  "          padding: 8pt;\n"
</div>
<div class="code">                  "          width: 80%;\n"
</div>
<div class="code">                  "          display: none;\n"
</div>
<div class="code">                  "      }\n"
</div>
<div class="code">                  "  &lt;/style&gt;\n"
</div>
<div class="code">                  "  &lt;body&gt;\n"
</div>
<div class="code">                  "  &lt;div id=\"debug\"&gt;&lt;/div&gt;\n"
</div>
<div class="code">                  "  &lt;script type=\"text/javascript\"&gt;\n"
</div>
<div class="code">                  "     window.g_Glossary = {}; // list of objects with name, &nbsp; description attributes for use in tooltips\n"
</div>
<div class="code">                  "\n"
</div>
<div class="code">                  "     function GetText( &nbsp;elem&nbsp;) {\n"
</div>
<div class="code">                  "         var ret = \"\";\n"
</div>
<div class="code">                  "         for ( &nbsp;var cld = elem.firstChild; cld != null; cld = cld.nextSibling&nbsp;) {\n"
</div>
<div class="code">                  "             switch ( &nbsp;cld.nodeType&nbsp;) {\n"
</div>
<div class="code">                  "             case 1: ret += GetText( &nbsp;cld&nbsp;); break;\n"
</div>
<div class="code">                  "             case 3: ret += cld.nodeValue; break;\n"
</div>
<div class="code">                  "             }\n"
</div>
<div class="code">                  "         }\n"
</div>
<div class="code">                  "         return ret.trim( &nbsp;&nbsp;);\n"
</div>
<div class="code">                  "     }\n"
</div>
<div class="code">                  "     function GetElementPosition( &nbsp;elem&nbsp;) {\n"
</div>
<div class="code">                  "         // return element position in page coords\n"
</div>
<div class="code">                  "         var ret = { left: 0, &nbsp; top: 0 };\n"
</div>
<div class="code">                  "         while ( &nbsp;elem != null &amp;&amp; elem != undefined&nbsp;) {\n"
</div>
<div class="code">                  "             ret.left += elem.offsetLeft;\n"
</div>
<div class="code">                  "             ret.top  += elem.offsetTop;\n"
</div>
<div class="code">                  "             elem = elem.offsetParent;\n"
</div>
<div class="code">                  "         }\n"
</div>
<div class="code">                  "         return ret;\n"
</div>
<div class="code">                  "     }\n"
</div>
<div class="code">                  "     function SetupTooltip( &nbsp;elem, &nbsp; description&nbsp;) {\n"
</div>
<div class="code">                  "         var div = document.createElement( &nbsp;\"div\"&nbsp;);\n"
</div>
<div class="code">                  "         div.className = \"tooltip\";\n"
</div>
<div class="code">                  "         div.innerHTML = \"&lt;div class=\\\"ttname\\\"&gt;\" + description.name + \"&lt;/div&gt;\\n&lt;div class=\\\"ttdescr\\\"&gt;\" + description.description + \"&lt;/div&gt;\";\n"
</div>
<div class="code">                  "         document.body.appendChild( &nbsp;div&nbsp;);\n"
</div>
<div class="code">                  "         elem.addEventListener( &nbsp;\"mousemove\", &nbsp; function( &nbsp;ev&nbsp;) {\n"
</div>
<div class="code">                  "             div.style.display = \"block\";\n"
</div>
<div class="code">                  "             div.style.top = ( &nbsp;ev.clientY + 5&nbsp;) + \"px\";\n"
</div>
<div class="code">                  "             div.style.left = ( &nbsp;ev.clientX - 305&nbsp;) + \"px\";\n"
</div>
<div class="code">                  "         }&nbsp;);\n"
</div>
<div class="code">                  "         elem.addEventListener( &nbsp;\"mouseout\", &nbsp; function( &nbsp;ev&nbsp;) {\n"
</div>
<div class="code">                  "             div.style.display = \"none\";\n"
</div>
<div class="code">                  "         }&nbsp;);\n"
</div>
<div class="code">                  "     }\n"
</div>
<div class="code">                  "     // Expect a th here. Assign a callback to it on-click such that it sorts all the rows in the table body\n"
</div>
<div class="code">                  "     // according to the th.cellIndex'th element of the row.\n"
</div>
<div class="code">                  "     function GetParentWithName( &nbsp;elem, &nbsp; name&nbsp;) {\n"
</div>
<div class="code">                  "         var ret = elem;\n"
</div>
<div class="code">                  "         while ( &nbsp;ret != null &amp;&amp; ret.nodeName.match( &nbsp;name&nbsp;) == null&nbsp;)\n"
</div>
<div class="code">                  "             ret = ret.parentNode;\n"
</div>
<div class="code">                  "         return ret;\n"
</div>
<div class="code">                  "     }\n"
</div>
<div class="code">                  "     function GetTableRows( &nbsp;elemInTable&nbsp;) {\n"
</div>
<div class="code">                  "         var ret = [];\n"
</div>
<div class="code">                  "         var tbody = GetParentWithName( &nbsp;elemInTable, &nbsp; /table/i&nbsp;);\n"
</div>
<div class="code">                  "         // Sticky head support: Use original table if present\n"
</div>
<div class="code">                  "         if ( &nbsp;tbody.Original&nbsp;)\n"
</div>
<div class="code">                  "             tbody = tbody.Original;\n"
</div>
<div class="code">                  "         for ( &nbsp;tbody = tbody.firstChild; tbody != null &amp;&amp; tbody.nodeName.match( &nbsp;/tbody/i&nbsp;) == null; tbody = tbody.nextSibling&nbsp;);\n"
</div>
<div class="code">                  "         for ( &nbsp;var tr = tbody.firstChild; tr != null; tr = tr.nextSibling&nbsp;) {\n"
</div>
<div class="code">                  "             if ( &nbsp;tr.nodeName.match( &nbsp;/tr/i&nbsp;)&nbsp;)\n"
</div>
<div class="code">                  "                 ret.push( &nbsp;tr&nbsp;);\n"
</div>
<div class="code">                  "         }\n"
</div>
<div class="code">                  "         return { 'tbody': tbody, &nbsp; 'rows': ret };\n"
</div>
<div class="code">                  "     }\n"
</div>
<div class="code">                  "     function GetColumn( &nbsp;elem&nbsp;) {\n"
</div>
<div class="code">                  "         /* FIXME I think you can still foil this with some pathlogical layouts - like staggering\n"
</div>
<div class="code">                  "            multi-row squares in a stair-step pattern. Not intending to do that today, &nbsp; though. */\n"
</div>
<div class="code">                  "         var column = 0, &nbsp; rowInd = 1;\n"
</div>
<div class="code">                  "         for ( &nbsp;var cell = elem.previousSibling; cell != null; cell = cell.previousSibling&nbsp;) {\n"
</div>
<div class="code">                  "             if ( &nbsp;cell.nodeType == 1&nbsp;)\n"
</div>
<div class="code">                  "                 column += cell.colSpan;\n"
</div>
<div class="code">                  "         }\n"
</div>
<div class="code">                  "         for ( &nbsp;var row = elem.parentNode.previousSibling; row != null; row = row.previousSibling&nbsp;) {\n"
</div>
<div class="code">                  "             if ( &nbsp;row.nodeType != 1&nbsp;)\n"
</div>
<div class="code">                  "                 continue;\n"
</div>
<div class="code">                  "             var colInd = 0, &nbsp; insertCols = 0;\n"
</div>
<div class="code">                  "             for ( &nbsp;var cell = row.firstChild; cell != null &amp;&amp; colInd &lt;= column; cell = cell.nextSibling&nbsp;) {\n"
</div>
<div class="code">                  "                 if ( &nbsp;cell.nodeType != 1&nbsp;)\n"
</div>
<div class="code">                  "                     continue;\n"
</div>
<div class="code">                  "                 if ( &nbsp;cell != elem &amp;&amp; cell.rowSpan - rowInd &gt; 0 /* this element contributes to this column offset */&nbsp;)\n"
</div>
<div class="code">                  "                     insertCols += cell.colSpan;\n"
</div>
<div class="code">                  "                 colInd += cell.colSpan;\n"
</div>
<div class="code">                  "             }\n"
</div>
<div class="code">                  "             column += insertCols;\n"
</div>
<div class="code">                  "             rowInd += 1;\n"
</div>
<div class="code">                  "         }\n"
</div>
<div class="code">                  "         return column;\n"
</div>
<div class="code">                  "     }\n"
</div>
<div class="code">                  "     function SetupSortColumn( &nbsp;elem&nbsp;) {\n"
</div>
<div class="code">                  "         elem.firstChild.addEventListener( &nbsp;\"click\", &nbsp; function( &nbsp;ev&nbsp;) {\n"
</div>
<div class="code">                  "             var z = GetTableRows( &nbsp;elem&nbsp;);\n"
</div>
<div class="code">                  "             var column = GetColumn( &nbsp;elem&nbsp;);\n"
</div>
<div class="code">                  "             elem.SortDescending = ( &nbsp;elem.SortDescending ? false : true&nbsp;);\n"
</div>
<div class="code">                  "             z.rows.sort( &nbsp;function( &nbsp;a, &nbsp; b&nbsp;) {\n"
</div>
<div class="code">                  "                 var ret = 0;\n"
</div>
<div class="code">                  "                 var a_text = GetText( &nbsp;a.cells[column]&nbsp;);\n"
</div>
<div class="code">                  "                 var b_text = GetText( &nbsp;b.cells[column]&nbsp;);\n"
</div>
<div class="code">                  "                 var a_num = parseFloat( &nbsp;a_text&nbsp;);\n"
</div>
<div class="code">                  "                 var b_num = parseFloat( &nbsp;b_text&nbsp;);\n"
</div>
<div class="code">                  "                 if ( &nbsp;isNaN( &nbsp;a_num&nbsp;) &amp;&amp; isNaN( &nbsp;b_num&nbsp;)&nbsp;)\n"
</div>
<div class="code">                  "                     ret = ( &nbsp;a_text &gt; b_text&nbsp;) ?  1 :\n"
</div>
<div class="code">                  "                           ( &nbsp;a_text &lt; b_text&nbsp;) ? -1 :\n"
</div>
<div class="code">                  "                           ( &nbsp;a_text &gt;= b_text&nbsp;) ? 1 :\n"
</div>
<div class="code">                  "                           -1;\n"
</div>
<div class="code">                  "                 else if ( &nbsp;isNaN( &nbsp;a_num&nbsp;)&nbsp;)\n"
</div>
<div class="code">                  "                     ret = -1;\n"
</div>
<div class="code">                  "                 else if ( &nbsp;isNaN( &nbsp;b_num&nbsp;)&nbsp;)\n"
</div>
<div class="code">                  "                     ret =  1;\n"
</div>
<div class="code">                  "                 else\n"
</div>
<div class="code">                  "                     ret = a_num - b_num;\n"
</div>
<div class="code">                  "                 // tiebreakers\n"
</div>
<div class="code">                  "                 return elem.SortDescending ? -ret : ret;\n"
</div>
<div class="code">                  "             }&nbsp;);\n"
</div>
<div class="code">                  "             for ( &nbsp;var k = 0; k &lt; z.rows.length; ++k&nbsp;)\n"
</div>
<div class="code">                  "                 z.tbody.removeChild( &nbsp;z.rows[k]&nbsp;);\n"
</div>
<div class="code">                  "             for ( &nbsp;var k = 0; k &lt; z.rows.length; ++k&nbsp;)\n"
</div>
<div class="code">                  "                 z.tbody.appendChild( &nbsp;z.rows[k]&nbsp;);\n"
</div>
<div class="code">                  "         }&nbsp;);\n"
</div>
<div class="code">                  "     }\n"
</div>
<div class="code">                  "     function GetScrollOffset( &nbsp;&nbsp;) {\n"
</div>
<div class="code">                  "         return ( &nbsp;!isNaN( &nbsp;window.pageYOffset&nbsp;)&nbsp;) ? { 'X': window.pageXOffset, &nbsp;       'Y': window.pageYOffset } :\n"
</div>
<div class="code">                  "                                               { 'X': document.body.scrollLeft, &nbsp; 'Y': document.body.scrollTop };\n"
</div>
<div class="code">                  "     }\n"
</div>
<div class="code">                  "     function StickyHead( &nbsp;table, &nbsp; thead&nbsp;) {\n"
</div>
<div class="code">                  "         if ( &nbsp;table.Original&nbsp;)\n"
</div>
<div class="code">                  "             return;\n"
</div>
<div class="code">                  "         var dupl = thead.cloneNode( &nbsp;true&nbsp;);\n"
</div>
<div class="code">                  "         var div = document.createElement( &nbsp;\"div\"&nbsp;);\n"
</div>
<div class="code">                  "         div.className = \"stickyHead\";\n"
</div>
<div class="code">                  "         var newTable = table.cloneNode( &nbsp;false&nbsp;);\n"
</div>
<div class="code">                  "         newTable.Original = table;\n"
</div>
<div class="code">                  "         div.appendChild( &nbsp;newTable&nbsp;);\n"
</div>
<div class="code">                  "         newTable.appendChild( &nbsp;dupl&nbsp;);\n"
</div>
<div class="code">                  "         document.body.appendChild( &nbsp;div&nbsp;);\n"
</div>
<div class="code">                  "         window.addEventListener( &nbsp;\"scroll\", &nbsp; function( &nbsp;&nbsp;) {\n"
</div>
<div class="code">                  "             var headPos = GetElementPosition( &nbsp;thead&nbsp;);\n"
</div>
<div class="code">                  "             var bodyPos = GetElementPosition( &nbsp;table&nbsp;);\n"
</div>
<div class="code">                  "             var scrolly = GetScrollOffset( &nbsp;&nbsp;).Y;\n"
</div>
<div class="code">                  "             if ( &nbsp;headPos.top &lt; scrolly &amp;&amp; bodyPos.top + table.scrollHeight &gt; scrolly&nbsp;) {\n"
</div>
<div class="code">                  "                 div.style.display = \"block\";\n"
</div>
<div class="code">                  "             } else {\n"
</div>
<div class="code">                  "                 div.style.display = \"none\";\n"
</div>
<div class="code">                  "             }\n"
</div>
<div class="code">                  "         }&nbsp;);\n"
</div>
<div class="code">                  "     }\n"
</div>
<div class="code">                  // Add tooltips from the glossary, &nbsp; sort capabilities
</div>
<div class="code">                  "     function EnhanceTable( &nbsp;table&nbsp;) {\n"
</div>
<div class="code">                  "         var headerNodes = table.getElementsByTagName( &nbsp;\"th\"&nbsp;);\n"
</div>
<div class="code">                  "         for( &nbsp;var k = 0; k &lt; headerNodes.length; ++k&nbsp;) {\n"
</div>
<div class="code">                  "             var th = headerNodes[k];\n"
</div>
<div class="code">                  "             var possibleAbbr = GetText( &nbsp;th&nbsp;);\n"
</div>
<div class="code">                  "             if ( &nbsp;th.className.indexOf( &nbsp;\"sortable\"&nbsp;) != -1&nbsp;)\n"
</div>
<div class="code">                  "                 SetupSortColumn( &nbsp;th, &nbsp; th&nbsp;);\n"
</div>
<div class="code">                  "             if ( &nbsp;possibleAbbr in window.g_Glossary&nbsp;)\n"
</div>
<div class="code">                  "                 SetupTooltip( &nbsp;th, &nbsp; window.g_Glossary[possibleAbbr]&nbsp;);\n"
</div>
<div class="code">                  "         }\n"
</div>
<div class="code">                  // Stickify any theads
</div>
<div class="code">                  "         headerNodes = table.getElementsByTagName( &nbsp;\"thead\"&nbsp;);\n"
</div>
<div class="code">                  "         for ( &nbsp;var k = 0; k &lt; headerNodes.length; ++k&nbsp;) {\n"
</div>
<div class="code">                  "             var thead = headerNodes[k];\n"
</div>
<div class="code">                  "             StickyHead( &nbsp;table, &nbsp; thead&nbsp;);\n"
</div>
<div class="code">                  "         }\n"
</div>
<div class="code">                  "     }\n"
</div>
<div class="code">                  "\n"
</div>
<div class="code">                  "     window.addEventListener( &nbsp;\"load\", &nbsp; function( &nbsp;&nbsp;) {\n"
</div>
<div class="code">                  "         var tables = document.getElementsByTagName( &nbsp;\"table\"&nbsp;);\n"
</div>
<div class="code">                  "         for ( &nbsp;var k = 0; k &lt; tables.length; ++k&nbsp;) {\n"
</div>
<div class="code">                  "             var table = tables[k];\n"
</div>
<div class="code">                  "             if ( &nbsp;table.className.indexOf( &nbsp;\"summary\"&nbsp;) != -1&nbsp;)\n"
</div>
<div class="code">                  "                 EnhanceTable( &nbsp;table&nbsp;);\n"
</div>
<div class="code">                  "         }\n"
</div>
<div class="code">                  "     }&nbsp;);\n"
</div>
<div class="code">                  "  &lt;/script&gt;\n";
</div>
<div class="code">          
</div>
<div class="code">          const char* CCCC_Html_Stream::_HTMLBoilerplateBottom =
</div>
<div class="code">                  "  &lt;/body&gt;\n"
</div>
<div class="code">                  "&lt;/html&gt;";
</div>
<div class="code">          
</div>
<div class="code">          #ifdef UNIT_TEST
</div>
<div class="code"><a name="./cccc/cccc_htm.cc:00001891"></a>    1891  int main( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            CCCC_Project *prj_ptr=test_project_ptr( &nbsp;&nbsp;);
</div>
<div class="code">            CCCC_Html_Stream os( &nbsp;*prj_ptr, &nbsp;"cccc.htm", &nbsp;"."&nbsp;);
</div>
<div class="code">            return 0;
</div>
<div class="code">          }
</div>
<div class="code">          #endif
</div>
<a name="./cccc/cccc_itm.cc"></a><h1>./cccc/cccc_itm.cc</h1>
<div class="code"><a name="./cccc/cccc_itm.cc:00000001"></a>       1  // cccc_itm.cc
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc.h"
</div>
<div class="code">          #include &lt;fstream&gt;
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include &lt;cstdio&gt;
</div>
<div class="code">          #include &lt;cmath&gt;
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_itm.cc:00000010"></a>      10  CCCC_Item::CCCC_Item( &nbsp;const string&amp; s, &nbsp; char c&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            buffer=s;
</div>
<div class="code">            delimiter=c;
</div>
<div class="code">            good=true;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_itm.cc:00000017"></a>      17  CCCC_Item::CCCC_Item( &nbsp;const string&amp; s&nbsp;) 
</div>
<div class="code">          {
</div>
<div class="code">            buffer=s;
</div>
<div class="code">            delimiter='@';
</div>
<div class="code">            good=true;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_itm.cc:00000024"></a>      24  CCCC_Item::CCCC_Item( &nbsp;&nbsp;) 
</div>
<div class="code">          {
</div>
<div class="code">            buffer="";
</div>
<div class="code">            delimiter='@';
</div>
<div class="code">            good=true;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_itm.cc:00000031"></a>      31  bool CCCC_Item::Insert( &nbsp;const string&amp; s&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            buffer+=s;
</div>
<div class="code">            buffer+=delimiter;
</div>
<div class="code">          #if 0
</div>
<div class="code">            cerr &lt;&lt; buffer &lt;&lt; endl;
</div>
<div class="code">          #endif
</div>
<div class="code">            return good;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_itm.cc:00000041"></a>      41  bool CCCC_Item::Insert( &nbsp;const char* cptr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            string s( &nbsp;cptr&nbsp;);
</div>
<div class="code">            return Insert( &nbsp;s&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">           
</div>
<div class="code"><a name="./cccc/cccc_itm.cc:00000047"></a>      47  bool CCCC_Item::Extract( &nbsp;string&amp; s&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            size_t delimiter_position=buffer.find( &nbsp;delimiter&nbsp;);
</div>
<div class="code">            if( &nbsp;delimiter_position!=string::npos&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                good=true;
</div>
<div class="code">                s=buffer.substr( &nbsp;0, &nbsp;delimiter_position&nbsp;);
</div>
<div class="code">                string tempBuffer=buffer.substr( &nbsp;delimiter_position+1&nbsp;);
</div>
<div class="code">          	  buffer=tempBuffer;
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              { 
</div>
<div class="code">                good=false;
</div>
<div class="code">              }
</div>
<div class="code">            return good;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_itm.cc:00000064"></a>      64  bool CCCC_Item::Insert( &nbsp;int n&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            char numbuf[64];
</div>
<div class="code">            sprintf( &nbsp;numbuf, &nbsp;"%d", &nbsp;n&nbsp;);
</div>
<div class="code">            return Insert( &nbsp;numbuf&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_itm.cc:00000071"></a>      71  bool CCCC_Item::Extract( &nbsp;int&amp; n&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            string numstr;
</div>
<div class="code">            bool retval=Extract( &nbsp;numstr&nbsp;);
</div>
<div class="code">            n=atoi( &nbsp;numstr.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_itm.cc:00000079"></a>      79  bool CCCC_Item::Insert( &nbsp;char c&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            char charbuf[2];
</div>
<div class="code">            sprintf( &nbsp;charbuf, &nbsp;"%c", &nbsp;c&nbsp;);
</div>
<div class="code">            return Insert( &nbsp;charbuf&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_itm.cc:00000086"></a>      86  bool CCCC_Item::Extract( &nbsp;char&amp; c&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            string charstr;
</div>
<div class="code">            bool retval=Extract( &nbsp;charstr&nbsp;);
</div>
<div class="code">            if( &nbsp;charstr.size( &nbsp;&nbsp;)==1&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                c=charstr[0];
</div>
<div class="code">              }
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_itm.cc:00000097"></a>      97  bool CCCC_Item::Insert( &nbsp;float f&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            char numbuf[64];
</div>
<div class="code">            sprintf( &nbsp;numbuf, &nbsp;"%f", &nbsp;f&nbsp;);
</div>
<div class="code">            return Insert( &nbsp;numbuf&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_itm.cc:00000104"></a>     104  bool CCCC_Item::Extract( &nbsp;float&amp; f&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            string numstr;
</div>
<div class="code">            bool retval=Extract( &nbsp;numstr&nbsp;);
</div>
<div class="code">            f=atof( &nbsp;numstr.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_itm.cc:00000112"></a>     112  bool CCCC_Item::ToFile( &nbsp;ofstream&amp; ofstr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            ofstr &lt;&lt; buffer &lt;&lt; endl;
</div>
<div class="code">            good=ofstr.good( &nbsp;&nbsp;);
</div>
<div class="code">            return good;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_itm.cc:00000119"></a>     119  bool CCCC_Item::FromFile( &nbsp;ifstream&amp; ifstr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            good=false;
</div>
<div class="code">            char line_buffer[1024];
</div>
<div class="code">            ifstr.getline( &nbsp;line_buffer, &nbsp;1023&nbsp;);
</div>
<div class="code">            buffer=line_buffer;
</div>
<div class="code">            if( &nbsp;ifstr.good( &nbsp;&nbsp;) &amp;&amp; buffer.size( &nbsp;&nbsp;)&gt;0 &amp;&amp; buffer.size( &nbsp;&nbsp;)&lt;1023&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                delimiter=buffer[buffer.size( &nbsp;&nbsp;)-1];
</div>
<div class="code">                good=true;
</div>
<div class="code">          #if 0
</div>
<div class="code">                cerr &lt;&lt; "Delimiter is " &lt;&lt; delimiter &lt;&lt; endl;
</div>
<div class="code">          #endif
</div>
<div class="code">              }
</div>
<div class="code">            return good;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">            
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./cccc/cccc_mem.cc"></a><h1>./cccc/cccc_mem.cc</h1>
<div class="code"><a name="./cccc/cccc_mem.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          // cccc_mem.cc
</div>
<div class="code">          
</div>
<div class="code">          // implementation file for class CCCC_Member
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc.h"
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include "cccc_mem.h"
</div>
<div class="code">          #include "cccc_db.h"
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_mem.cc:00000029"></a>      29  CCCC_Member::CCCC_Member( &nbsp;&nbsp;)
</div>
<div class="code">            : parent( &nbsp;NULL&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            visibility=vDONTKNOW;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_mem.cc:00000035"></a>      35  int CCCC_Member::get_count( &nbsp;const char* count_tag&nbsp;) {
</div>
<div class="code">            int retval=0;
</div>
<div class="code">            string count_tag_str=count_tag;
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;count_tag_str==COUNT_TAG_WEIGHTED_METHODS_PER_CLASS_UNITY&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval=1;
</div>
<div class="code">              }
</div>
<div class="code">            else if( &nbsp;count_tag_str==COUNT_TAG_WEIGHTED_METHODS_PER_CLASS COUNT_TAG_VISIBLE_SUFFIX&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                switch( &nbsp;get_visibility( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	case vPUBLIC:
</div>
<div class="code">          	case vPROTECTED:
</div>
<div class="code">          	  retval=1;
</div>
<div class="code">          	  break;
</div>
<div class="code">          	default:
</div>
<div class="code">          	  NULL;
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                retval=extent_table.get_count( &nbsp;count_tag&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_mem.cc:00000064"></a>      64  int CCCC_Member::ToFile( &nbsp;ofstream&amp; ofstr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval=FALSE;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Item member_line;
</div>
<div class="code">            member_line.Insert( &nbsp;MEMBER_PREFIX&nbsp;);
</div>
<div class="code">            member_line.Insert( &nbsp;parent-&gt;key( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            member_line.Insert( &nbsp;member_name&nbsp;);
</div>
<div class="code">            member_line.Insert( &nbsp;member_type&nbsp;);
</div>
<div class="code">            member_line.Insert( &nbsp;param_list&nbsp;);
</div>
<div class="code">            member_line.ToFile( &nbsp;ofstr&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Extent *extent_ptr=extent_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;extent_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Item extent_line;
</div>
<div class="code">                extent_line.Insert( &nbsp;MEMEXT_PREFIX&nbsp;);
</div>
<div class="code">                extent_line.Insert( &nbsp;parent-&gt;key( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">                extent_line.Insert( &nbsp;member_name&nbsp;);
</div>
<div class="code">                extent_line.Insert( &nbsp;member_type&nbsp;);
</div>
<div class="code">                extent_line.Insert( &nbsp;param_list&nbsp;);
</div>
<div class="code">                extent_ptr-&gt;AddToItem( &nbsp;extent_line&nbsp;);
</div>
<div class="code">                extent_line.ToFile( &nbsp;ofstr&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">                extent_ptr=extent_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;ofstr.good( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval=TRUE;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_mem.cc:00000099"></a>      99  string CCCC_Member::name( &nbsp;int name_level&nbsp;) const
</div>
<div class="code">          {
</div>
<div class="code">            string namestr;
</div>
<div class="code">          
</div>
<div class="code">            switch( &nbsp;name_level&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">              case nlRANK:
</div>
<div class="code">              case nlSEARCH:
</div>
<div class="code">                // there is no scoping for C-style functions ...
</div>
<div class="code">                if( &nbsp;parent==NULL&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">                    namestr.append( &nbsp;"&lt;NULL&gt;::"&nbsp;);
</div>
<div class="code">                  }
</div>
<div class="code">                else if( &nbsp;
</div>
<div class="code">          	      ( &nbsp;parent-&gt;name( &nbsp;nlMODULE_NAME&nbsp;)!=""&nbsp;) &amp;&amp;
</div>
<div class="code">          	      ( &nbsp;parent-&gt;name( &nbsp;nlMODULE_TYPE&nbsp;)!="file"&nbsp;)
</div>
<div class="code">          	      &nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  namestr.append( &nbsp;parent-&gt;name( &nbsp;nlMODULE_NAME&nbsp;)&nbsp;);
</div>
<div class="code">                    namestr.append( &nbsp;"::"&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">                namestr.append( &nbsp;member_name&nbsp;);
</div>
<div class="code">                namestr.append( &nbsp;param_list&nbsp;);
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case nlMEMBER_NAME:
</div>
<div class="code">              case nlSIMPLE:
</div>
<div class="code">                namestr=member_name;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case nlMEMBER_TYPE:
</div>
<div class="code">                namestr=member_type;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case nlMEMBER_PARAMS:
</div>
<div class="code">                namestr=param_list;
</div>
<div class="code">                break;
</div>
<div class="code">              case nlLOCAL:
</div>
<div class="code">                namestr.append( &nbsp;member_name&nbsp;);
</div>
<div class="code">                namestr.append( &nbsp;param_list&nbsp;);
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              default:
</div>
<div class="code">                cerr &lt;&lt; "unexpected name level" &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return namestr.c_str( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_mem.cc:00000148"></a>     148  int CCCC_Member::FromFile( &nbsp;ifstream&amp; ifstr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval=RECORD_ERROR;
</div>
<div class="code">            enum MemberFromFileStatuses { MEMBER_RECORD_NO_PARENT_FOUND=3 };
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Item next_line;
</div>
<div class="code">            next_line.FromFile( &nbsp;ifstr&nbsp;);
</div>
<div class="code">            ifstr_line++;
</div>
<div class="code">          
</div>
<div class="code">            string line_keyword_dummy;
</div>
<div class="code">            string parent_name;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Member *found_mptr=NULL;
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;
</div>
<div class="code">               next_line.Extract( &nbsp;line_keyword_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">               next_line.Extract( &nbsp;parent_name&nbsp;) &amp;&amp;
</div>
<div class="code">               next_line.Extract( &nbsp;this-&gt;member_name&nbsp;) &amp;&amp;
</div>
<div class="code">               next_line.Extract( &nbsp;this-&gt;member_type&nbsp;) &amp;&amp;
</div>
<div class="code">               next_line.Extract( &nbsp;this-&gt;param_list&nbsp;)
</div>
<div class="code">               &nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                parent=current_loading_project-&gt;module_table.find( &nbsp;parent_name&nbsp;);
</div>
<div class="code">                if( &nbsp;parent!=NULL&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  found_mptr=
</div>
<div class="code">          	    current_loading_project-&gt;member_table.find_or_insert( &nbsp;this&nbsp;);
</div>
<div class="code">          	  if( &nbsp;found_mptr==this&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      // the newly created instance of the module is the first
</div>
<div class="code">          	      // and has taken its place in the database, &nbsp; so we protect
</div>
<div class="code">          	      // it from deletion
</div>
<div class="code">          	      retval=RECORD_ADDED;
</div>
<div class="code">          	    }
</div>
<div class="code">          	  else
</div>
<div class="code">          	    {
</div>
<div class="code">          	      retval=RECORD_TRANSCRIBED;
</div>
<div class="code">          	    }
</div>
<div class="code">          
</div>
<div class="code">          	  // process extent records
</div>
<div class="code">          	  while( &nbsp;PeekAtNextLinePrefix( &nbsp;ifstr, &nbsp;MEMEXT_PREFIX&nbsp;)&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      CCCC_Extent *new_extent=new CCCC_Extent;
</div>
<div class="code">          	      next_line.FromFile( &nbsp;ifstr&nbsp;);
</div>
<div class="code">          	      ifstr_line++;
</div>
<div class="code">          	      string parent_key_dummy, &nbsp; member_name_dummy, &nbsp;
</div>
<div class="code">          		member_type_dummy, &nbsp; param_list_dummy;
</div>
<div class="code">          
</div>
<div class="code">          	      if( &nbsp;
</div>
<div class="code">          		 next_line.Extract( &nbsp;line_keyword_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">          		 next_line.Extract( &nbsp;parent_key_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">          		 next_line.Extract( &nbsp;member_name_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">          		 next_line.Extract( &nbsp;member_type_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">          		 next_line.Extract( &nbsp;param_list_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">          		 new_extent-&gt;GetFromItem( &nbsp;next_line&nbsp;)
</div>
<div class="code">          		 &nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		  // We don't ever expect to find duplicated extent records
</div>
<div class="code">          		  // but just in case...
</div>
<div class="code">          		  CCCC_Extent *found_eptr=
</div>
<div class="code">          		    found_mptr-&gt;extent_table.find_or_insert( &nbsp;new_extent&nbsp;);
</div>
<div class="code">          		  if( &nbsp;found_eptr!=new_extent&nbsp;)
</div>
<div class="code">          		    {
</div>
<div class="code">          		      cerr &lt;&lt; "Failed to add extent for member "
</div>
<div class="code">          			   &lt;&lt; found_mptr-&gt;key( &nbsp;&nbsp;) &lt;&lt; " at line " &lt;&lt; ifstr_line
</div>
<div class="code">          			   &lt;&lt; endl;
</div>
<div class="code">          		      delete new_extent;
</div>
<div class="code">          		    }
</div>
<div class="code">          		}
</div>
<div class="code">          	    }
</div>
<div class="code">          
</div>
<div class="code">          	}
</div>
<div class="code">                else // parent record not found
</div>
<div class="code">          	{
</div>
<div class="code">          	  retval=MEMBER_RECORD_NO_PARENT_FOUND;
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            else // extraction of module intial line failed
</div>
<div class="code">              {
</div>
<div class="code">                // unexpected problem with the input
</div>
<div class="code">                retval=RECORD_ERROR;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            // If the import was successful, &nbsp; we will also have imported all dependent
</div>
<div class="code">            // extent records following the main record.
</div>
<div class="code">            // If not, &nbsp; we must skip them.
</div>
<div class="code">            while( &nbsp;PeekAtNextLinePrefix( &nbsp;ifstr, &nbsp;MEMEXT_PREFIX&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Item next_line;
</div>
<div class="code">                next_line.FromFile( &nbsp;ifstr&nbsp;);
</div>
<div class="code">                ifstr_line++;
</div>
<div class="code">                cerr &lt;&lt; "Ignoring member extent on line " &lt;&lt; ifstr_line &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_mem.cc:00000245"></a>     245  Visibility CCCC_Member::get_visibility( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            return visibility;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./cccc/cccc_met.cc"></a><h1>./cccc/cccc_met.cc</h1>
<div class="code"><a name="./cccc/cccc_met.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          // cccc_met.cc
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc.h"
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include "cccc_met.h"
</div>
<div class="code">          #include &lt;sstream&gt;
</div>
<div class="code">          using std::ostringstream;
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_opt.h"
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_met.cc:00000029"></a>      29  Metric_Treatment::Metric_Treatment( &nbsp;CCCC_Item&amp; treatment_line&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            lower_threshold=0;
</div>
<div class="code">            upper_threshold=0;
</div>
<div class="code">            numerator_threshold=0;
</div>
<div class="code">            width=0;
</div>
<div class="code">            precision=0;
</div>
<div class="code">          
</div>
<div class="code">            string option_dummy, &nbsp; treatment_dummy, &nbsp; lothresh_str, &nbsp;
</div>
<div class="code">              hithresh_str, &nbsp; numthresh_str, &nbsp; width_str, &nbsp; precision_str;
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;
</div>
<div class="code">               // treatment_line.Extract( &nbsp;option_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">               // treatment_line.Extract( &nbsp;treatment_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">               treatment_line.Extract( &nbsp;code&nbsp;) &amp;&amp;
</div>
<div class="code">               treatment_line.Extract( &nbsp;lothresh_str&nbsp;) &amp;&amp;
</div>
<div class="code">               treatment_line.Extract( &nbsp;hithresh_str&nbsp;) &amp;&amp;
</div>
<div class="code">               treatment_line.Extract( &nbsp;numerator_threshold&nbsp;) &amp;&amp;
</div>
<div class="code">               treatment_line.Extract( &nbsp;width&nbsp;) &amp;&amp;
</div>
<div class="code">               treatment_line.Extract( &nbsp;precision&nbsp;) &amp;&amp;
</div>
<div class="code">               treatment_line.Extract( &nbsp;name&nbsp;)
</div>
<div class="code">               &nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                lower_threshold=atof( &nbsp;lothresh_str.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">                upper_threshold=atof( &nbsp;hithresh_str.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_met.cc:00000057"></a>      57  CCCC_Metric::CCCC_Metric( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            set_ratio( &nbsp;0, &nbsp;0&nbsp;);
</div>
<div class="code">            set_treatment( &nbsp;""&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_met.cc:00000063"></a>      63  CCCC_Metric::CCCC_Metric( &nbsp;int n, &nbsp; const char* treatment_tag&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            set_ratio( &nbsp;n, &nbsp;1&nbsp;); set_treatment( &nbsp;treatment_tag&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_met.cc:00000068"></a>      68  CCCC_Metric::CCCC_Metric( &nbsp;int n, &nbsp; int d, &nbsp; const char* treatment_tag&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            set_ratio( &nbsp;n, &nbsp;d&nbsp;); set_treatment( &nbsp;treatment_tag&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_met.cc:00000073"></a>      73  void CCCC_Metric::set_treatment( &nbsp;const char* code&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            treatment=CCCC_Options::getMetricTreatment( &nbsp;code&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_met.cc:00000078"></a>      78  void CCCC_Metric::set_ratio( &nbsp;float _num, &nbsp; float _denom&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            numerator=_num; denominator=_denom;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_met.cc:00000083"></a>      83  EmphasisLevel CCCC_Metric::emphasis_level( &nbsp;&nbsp;) const
</div>
<div class="code">          {
</div>
<div class="code">            EmphasisLevel retval=elLOW;
</div>
<div class="code">            if( &nbsp;denominator &gt; 0 &amp;&amp; treatment!=NULL &amp;&amp; numerator&gt;treatment-&gt;numerator_threshold&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                if( &nbsp; numerator &gt; ( &nbsp;treatment-&gt;upper_threshold*denominator&nbsp;) &nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  retval=elHIGH;
</div>
<div class="code">          	}
</div>
<div class="code">                else if( &nbsp;numerator&gt; ( &nbsp;treatment-&gt;lower_threshold*denominator&nbsp;) &nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  retval=elMEDIUM;
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_met.cc:00000100"></a>     100  string CCCC_Metric::code( &nbsp;&nbsp;) const
</div>
<div class="code">          {
</div>
<div class="code">            string retval;
</div>
<div class="code">            if( &nbsp;treatment != NULL&nbsp;) { retval=treatment-&gt;code; }
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_met.cc:00000107"></a>     107  string CCCC_Metric::name( &nbsp;&nbsp;) const
</div>
<div class="code">          {
</div>
<div class="code">            string retval;
</div>
<div class="code">            if( &nbsp;treatment != NULL&nbsp;) { retval=treatment-&gt;name; }
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_met.cc:00000114"></a>     114  string CCCC_Metric::value_string( &nbsp;&nbsp;) const
</div>
<div class="code">          {
</div>
<div class="code">            string retval;
</div>
<div class="code">            char numerator_too_low='-';
</div>
<div class="code">            char infinity='*';
</div>
<div class="code">          
</div>
<div class="code">            ostringstream valuestr;
</div>
<div class="code">            valuestr.setf( &nbsp;std::ios::fixed&nbsp;);
</div>
<div class="code">            int width=6, &nbsp; precision=0;
</div>
<div class="code">            float n_threshold=0, &nbsp; low_threshold=1e9, &nbsp; high_threshold=1e9;
</div>
<div class="code">            if( &nbsp;treatment!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                width=treatment-&gt;width;
</div>
<div class="code">                precision=treatment-&gt;precision;
</div>
<div class="code">                n_threshold=treatment-&gt;numerator_threshold;
</div>
<div class="code">                low_threshold=treatment-&gt;lower_threshold;
</div>
<div class="code">                high_threshold=treatment-&gt;upper_threshold;
</div>
<div class="code">              }
</div>
<div class="code">            valuestr.width( &nbsp;width&nbsp;);
</div>
<div class="code">            valuestr.precision( &nbsp;precision&nbsp;);
</div>
<div class="code">            if( &nbsp;numerator&lt;n_threshold&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                string too_low_string( &nbsp;width, &nbsp;numerator_too_low&nbsp;);
</div>
<div class="code">                valuestr &lt;&lt; too_low_string;
</div>
<div class="code">              }
</div>
<div class="code">            else if( &nbsp;denominator==0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                string infinity_string( &nbsp;width, &nbsp;infinity&nbsp;);
</div>
<div class="code">                valuestr &lt;&lt; infinity_string;
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                double result=numerator;
</div>
<div class="code">                result/=denominator;
</div>
<div class="code">                if( &nbsp;result!=0.0L&nbsp;)
</div>
<div class="code">                {
</div>
<div class="code">                   // Visual C++ and GCC appear to give different behaviours
</div>
<div class="code">                   // when rounding a value which is exactly half way between
</div>
<div class="code">                   // two points representable in the desired format.
</div>
<div class="code">                   // An example of this occurs results from prn14, &nbsp; where the
</div>
<div class="code">                   // numerator 21 and denominator 16 are combined to give the
</div>
<div class="code">                   // value 1.2125 exactly, &nbsp; which Visual Studio renders as 1.213, &nbsp;
</div>
<div class="code">                   // GCC renders as 1.212.  For consistency with the existing
</div>
<div class="code">                   // reference data, &nbsp; I choose to apply a very small downward
</div>
<div class="code">                   // rounding factor.  The rounding factor is only applied if
</div>
<div class="code">                   // the value is not exactly equal to zero, &nbsp; as applying it
</div>
<div class="code">                   // to zero causes the value to be displayed as -0.0 instead
</div>
<div class="code">                   // of 0.0.
</div>
<div class="code">                   const double ROUNDING_FACTOR = 1.0e-9;
</div>
<div class="code">                   result-=ROUNDING_FACTOR;
</div>
<div class="code">                }
</div>
<div class="code">                valuestr &lt;&lt; result;
</div>
<div class="code">              }
</div>
<div class="code">            retval=valuestr.str( &nbsp;&nbsp;);
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          const char *internal_treatments[] =
</div>
<div class="code">          {
</div>
<div class="code">            "LOCf@30@100@0@6@0@Lines of code/function@", &nbsp;
</div>
<div class="code">            "LOCm@500@2000@0@6@0@Lines of code/module @", &nbsp;
</div>
<div class="code">            "LOCp@999999@999999@0@6@0@Lines of code/project @", &nbsp;
</div>
<div class="code">            "MVGf@10@30@0@6@0@Cyclomatic complexity/function@", &nbsp;
</div>
<div class="code">            "MVGm@200@1000@0@6@0@Cyclomatic complexity/module@", &nbsp;
</div>
<div class="code">            "MVGp@999999@999999@0@6@0@Cyclomatic complexity/project@", &nbsp;
</div>
<div class="code">            "COM@999999@999999@0@6@0@Comment lines@", &nbsp;
</div>
<div class="code">            "M_C@5@10@5@6@3@MVG/COM McCabe/comment line@", &nbsp;
</div>
<div class="code">            "L_C@7@30@20@6@3@LOC/COM Lines of code/comment line@", &nbsp;
</div>
<div class="code">            "FI@12@20@0@6@0@Fan in ( &nbsp;overall&nbsp;)@", &nbsp;
</div>
<div class="code">            "FIv@6@12@0@6@0@Fan in ( &nbsp;visible uses only&nbsp;)@", &nbsp;
</div>
<div class="code">            "FIc@6@12@0@6@0@Fan in ( &nbsp;concrete uses only&nbsp;)@", &nbsp;
</div>
<div class="code">            "FO@12@20@0@6@0@Fan out ( &nbsp;overall&nbsp;)@", &nbsp;
</div>
<div class="code">            "FOv@6@12@0@6@0@Fan out ( &nbsp;visible uses only&nbsp;)@", &nbsp;
</div>
<div class="code">            "FOc@6@12@0@6@0@Fan out ( &nbsp;concrete uses only&nbsp;)@", &nbsp;
</div>
<div class="code">            "IF4@100@1000@0@6@0@Henry-Kafura/Shepperd measure ( &nbsp;overall&nbsp;)@", &nbsp;
</div>
<div class="code">            "IF4v@30@100@0@6@0@Henry-Kafura/Shepperd measure ( &nbsp;visible only&nbsp;)@", &nbsp;
</div>
<div class="code">            "IF4c@30@100@0@6@0@Henry-Kafura/Shepperd measure ( &nbsp;concrete only&nbsp;)@", &nbsp;
</div>
<div class="code">            "WMC1@30@100@0@6@0@Weighting function = 1 unit per method@", &nbsp;
</div>
<div class="code">            "WMCv@10@30@0@6@0@Weighting function = 1 unit per visible method@", &nbsp;
</div>
<div class="code">            "DIT@3@60@6@0@Depth of Inheritance Tree@", &nbsp;
</div>
<div class="code">            "NOC@4@15@0@6@0@Number of children@", &nbsp;
</div>
<div class="code">            "CBO@12@30@0@6@0@Coupling between objects@", &nbsp;
</div>
<div class="code">            NULL
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./cccc/cccc_mod.cc"></a><h1>./cccc/cccc_mod.cc</h1>
<div class="code"><a name="./cccc/cccc_mod.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          // cccc_mod.cc
</div>
<div class="code">          
</div>
<div class="code">          // implementation file for CCCC_Module class
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc.h"
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include "cccc_mod.h"
</div>
<div class="code">          #include "cccc_db.h"
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_mod.cc:00000029"></a>      29  CCCC_Module::CCCC_Module( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            project=get_active_project( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_mod.cc:00000035"></a>      35  string CCCC_Module::name( &nbsp;int name_level&nbsp;) const
</div>
<div class="code">          {
</div>
<div class="code">            string retval;
</div>
<div class="code">          
</div>
<div class="code">            switch( &nbsp;name_level&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">              case nlMODULE_TYPE:
</div>
<div class="code">                retval=module_type;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case nlMODULE_NAME:
</div>
<div class="code">                retval=module_name;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case nlMODULE_TYPE_AND_NAME:
</div>
<div class="code">                retval=module_type;
</div>
<div class="code">                if( &nbsp;retval.size( &nbsp;&nbsp;)&gt;0&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  retval=retval+" ";
</div>
<div class="code">          	}
</div>
<div class="code">                retval=retval+module_name;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              default:
</div>
<div class="code">                retval=module_name;
</div>
<div class="code">              }
</div>
<div class="code">            return retval.c_str( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_mod.cc:00000064"></a>      64  int CCCC_Module::get_count( &nbsp;const char* count_tag&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval=0;
</div>
<div class="code">            if( &nbsp;strcmp( &nbsp;count_tag, &nbsp; COUNT_TAG_NUMBER_OF_MODULES&nbsp;)==0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                if( &nbsp;is_trivial( &nbsp;&nbsp;)==FALSE&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  retval=1;
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            else if( &nbsp;strcmp( &nbsp;count_tag, &nbsp; COUNT_TAG_COUPLING_BETWEEN_OBJECTS&nbsp;)==0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval=client_map.size( &nbsp;&nbsp;)+supplier_map.size( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            else if( &nbsp;strcmp( &nbsp;count_tag, &nbsp; COUNT_TAG_NUMBER_OF_CHILDREN&nbsp;)==0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval=0;
</div>
<div class="code">          
</div>
<div class="code">                relationship_map_t::iterator iter;
</div>
<div class="code">                iter=client_map.begin( &nbsp;&nbsp;);
</div>
<div class="code">                while( &nbsp;iter!=client_map.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  if( &nbsp;( &nbsp;*iter&nbsp;).second-&gt;get_usetype( &nbsp;&nbsp;)==utINHERITS&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      retval++;
</div>
<div class="code">          	    }
</div>
<div class="code">          	  iter++;
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            else if( &nbsp;strcmp( &nbsp;count_tag, &nbsp; COUNT_TAG_INHERITANCE_TREE_DEPTH&nbsp;)==0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval=0;
</div>
<div class="code">          
</div>
<div class="code">                // cyclical inheritance relationships in code would
</div>
<div class="code">                // never compile, &nbsp; but this is no excuse for us allowing them
</div>
<div class="code">                // to cause us to overflow the stack
</div>
<div class="code">                static int recursion_depth=0;
</div>
<div class="code">                recursion_depth++;
</div>
<div class="code">                if( &nbsp;recursion_depth&gt;100&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  cerr &lt;&lt; "Recursion overflow attempting to calculate DIT for "
</div>
<div class="code">          	       &lt;&lt; key( &nbsp;&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	  retval=1000;
</div>
<div class="code">          	}
</div>
<div class="code">                else
</div>
<div class="code">          	{
</div>
<div class="code">          	  relationship_map_t::iterator iter;
</div>
<div class="code">          	  iter=supplier_map.begin( &nbsp;&nbsp;);
</div>
<div class="code">          	  while( &nbsp;iter!=supplier_map.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      if( &nbsp;( &nbsp;*iter&nbsp;).second-&gt;get_usetype( &nbsp;&nbsp;)==utINHERITS&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		  int parent_depth=
</div>
<div class="code">          		    ( &nbsp;*iter&nbsp;).second-&gt;supplier_module_ptr( &nbsp;project&nbsp;)-&gt;get_count( &nbsp;COUNT_TAG_INHERITANCE_TREE_DEPTH&nbsp;);
</div>
<div class="code">          		  if( &nbsp;retval&lt;parent_depth+1&nbsp;)
</div>
<div class="code">          		    {
</div>
<div class="code">          		      retval=parent_depth+1;
</div>
<div class="code">          		    }
</div>
<div class="code">          		}
</div>
<div class="code">          	      iter++;
</div>
<div class="code">          	    }
</div>
<div class="code">          	}
</div>
<div class="code">                recursion_depth--;
</div>
<div class="code">              }
</div>
<div class="code">            else if( &nbsp;strncmp( &nbsp;count_tag, &nbsp; COUNT_TAG_FAN_IN, &nbsp; 2&nbsp;)==0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                relationship_map_t::iterator iter;
</div>
<div class="code">                iter=supplier_map.begin( &nbsp;&nbsp;);
</div>
<div class="code">                while( &nbsp;iter!=supplier_map.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  retval+=( &nbsp;*iter&nbsp;).second-&gt;get_count( &nbsp;count_tag&nbsp;);
</div>
<div class="code">          	  iter++;
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            else if( &nbsp;strncmp( &nbsp;count_tag, &nbsp; COUNT_TAG_FAN_OUT, &nbsp; 2&nbsp;)==0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                relationship_map_t::iterator iter;
</div>
<div class="code">                iter=client_map.begin( &nbsp;&nbsp;);
</div>
<div class="code">                while( &nbsp;iter!=client_map.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  retval+=( &nbsp;*iter&nbsp;).second-&gt;get_count( &nbsp;count_tag&nbsp;);
</div>
<div class="code">          	  iter++;
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            else if( &nbsp;strncmp( &nbsp;count_tag, &nbsp; COUNT_TAG_INTERMODULE_COMPLEXITY4, &nbsp; 3&nbsp;)==0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                char if4_suffix=count_tag[3];
</div>
<div class="code">                string fi_variant="FI", &nbsp; fo_variant="FO";
</div>
<div class="code">                if( &nbsp;if4_suffix!=0&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  fi_variant+=if4_suffix;
</div>
<div class="code">          	  fo_variant+=if4_suffix;
</div>
<div class="code">          	}
</div>
<div class="code">                retval=get_count( &nbsp;fi_variant.c_str( &nbsp;&nbsp;)&nbsp;)*get_count( &nbsp;fo_variant.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          	  retval*=retval;
</div>
<div class="code">              }
</div>
<div class="code">            else if ( &nbsp;strcmp( &nbsp;count_tag, &nbsp; COUNT_TAG_MAX_LINES_OF_CODE_PER_METHOD&nbsp;) == 0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval = 0;
</div>
<div class="code">                for ( &nbsp;member_map_t::iterator z = member_map.begin( &nbsp;&nbsp;); z != member_map.end( &nbsp;&nbsp;); ++z&nbsp;) {
</div>
<div class="code">                    int loc = z-&gt;second-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;);
</div>
<div class="code">                    if ( &nbsp;retval &lt; loc&nbsp;)
</div>
<div class="code">                        retval = loc;
</div>
<div class="code">                }
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Extent *extPtr=extent_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">                while( &nbsp;extPtr!=NULL&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  int extent_count=extPtr-&gt;get_count( &nbsp;count_tag&nbsp;);
</div>
<div class="code">          	  retval+=extent_count;
</div>
<div class="code">          	  extPtr=extent_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">          
</div>
<div class="code">                member_map_t::iterator memIter=member_map.begin( &nbsp;&nbsp;);
</div>
<div class="code">                while( &nbsp;memIter!=member_map.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  int member_count=( &nbsp;*memIter&nbsp;).second-&gt;get_count( &nbsp;count_tag&nbsp;);
</div>
<div class="code">          	  retval+=member_count;
</div>
<div class="code">          	  memIter++;
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_mod.cc:00000190"></a>     190  int CCCC_Module::is_trivial( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval=FALSE;
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;
</div>
<div class="code">               ( &nbsp;module_type=="builtin"&nbsp;) ||
</div>
<div class="code">               ( &nbsp;module_type=="enum"&nbsp;) ||
</div>
<div class="code">               ( &nbsp;module_type=="struct"&nbsp;) ||
</div>
<div class="code">               ( &nbsp;module_type=="trivial"&nbsp;)
</div>
<div class="code">               &nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval=TRUE;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_mod.cc:00000207"></a>     207  int CCCC_Module::ToFile( &nbsp;ofstream&amp; ofstr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval=FALSE;
</div>
<div class="code">            CCCC_Item module_line;
</div>
<div class="code">            module_line.Insert( &nbsp;MODULE_PREFIX&nbsp;);
</div>
<div class="code">            module_line.Insert( &nbsp;module_name&nbsp;);
</div>
<div class="code">            module_line.Insert( &nbsp;module_type&nbsp;);
</div>
<div class="code">            module_line.ToFile( &nbsp;ofstr&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Extent *extent_ptr=extent_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;extent_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Item extent_line;
</div>
<div class="code">                extent_line.Insert( &nbsp;MODEXT_PREFIX&nbsp;);
</div>
<div class="code">                extent_line.Insert( &nbsp;module_name&nbsp;);
</div>
<div class="code">                extent_line.Insert( &nbsp;module_type&nbsp;);
</div>
<div class="code">                extent_ptr-&gt;AddToItem( &nbsp;extent_line&nbsp;);
</div>
<div class="code">                extent_line.ToFile( &nbsp;ofstr&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">                extent_ptr=extent_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;ofstr.good( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval=TRUE;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_mod.cc:00000237"></a>     237  int CCCC_Module::FromFile( &nbsp;ifstream&amp; ifstr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval=RECORD_ERROR;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Item next_line;
</div>
<div class="code">            next_line.FromFile( &nbsp;ifstr&nbsp;);
</div>
<div class="code">            ifstr_line++;
</div>
<div class="code">          
</div>
<div class="code">            string line_keyword_dummy;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module *found_mptr=NULL;
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;
</div>
<div class="code">               next_line.Extract( &nbsp;line_keyword_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">               next_line.Extract( &nbsp;this-&gt;module_name&nbsp;) &amp;&amp;
</div>
<div class="code">               next_line.Extract( &nbsp;this-&gt;module_type&nbsp;)
</div>
<div class="code">               &nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                found_mptr=
</div>
<div class="code">          	current_loading_project-&gt;module_table.find_or_insert( &nbsp;this&nbsp;);
</div>
<div class="code">                if( &nbsp;found_mptr==this&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  // the newly created instance of the module is the first
</div>
<div class="code">          	  // and has taken its place in the database, &nbsp; so we protect
</div>
<div class="code">          	  // it from deletion
</div>
<div class="code">          	  retval=RECORD_ADDED;
</div>
<div class="code">          	}
</div>
<div class="code">                else
</div>
<div class="code">          	{
</div>
<div class="code">          	  retval=RECORD_TRANSCRIBED;
</div>
<div class="code">          	}
</div>
<div class="code">          
</div>
<div class="code">                // process extent records
</div>
<div class="code">                while( &nbsp;PeekAtNextLinePrefix( &nbsp;ifstr, &nbsp;MODEXT_PREFIX&nbsp;)&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  CCCC_Extent *new_extent=new CCCC_Extent;
</div>
<div class="code">          	  next_line.FromFile( &nbsp;ifstr&nbsp;);
</div>
<div class="code">          	  ifstr_line++;
</div>
<div class="code">          	  string module_name_dummy, &nbsp; module_type_dummy;
</div>
<div class="code">          
</div>
<div class="code">          	  if( &nbsp;
</div>
<div class="code">          	     next_line.Extract( &nbsp;line_keyword_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">          	     next_line.Extract( &nbsp;module_name_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">          	     next_line.Extract( &nbsp;module_type_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">          	     new_extent-&gt;GetFromItem( &nbsp;next_line&nbsp;)
</div>
<div class="code">          	     &nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      // We don't ever expect to find duplicated extent records
</div>
<div class="code">          	      // but just in case...
</div>
<div class="code">          	      CCCC_Extent *found_eptr=
</div>
<div class="code">          		found_mptr-&gt;extent_table.find_or_insert( &nbsp;new_extent&nbsp;);
</div>
<div class="code">          	      if( &nbsp;found_eptr!=new_extent&nbsp;)
</div>
<div class="code">                 		{
</div>
<div class="code">          		  cerr &lt;&lt; "Failed to add extent for module "
</div>
<div class="code">          		       &lt;&lt; found_mptr-&gt;key( &nbsp;&nbsp;) &lt;&lt; " at line " &lt;&lt; ifstr_line
</div>
<div class="code">          		       &lt;&lt; endl;
</div>
<div class="code">          		  delete new_extent;
</div>
<div class="code">          		}
</div>
<div class="code">          	    }
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                // unexpected problem with the input
</div>
<div class="code">                retval=RECORD_ERROR;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            // If the import was successful, &nbsp; we will also have imported all dependent
</div>
<div class="code">            // extent records following the main record.
</div>
<div class="code">            // If not, &nbsp; we must skip them.
</div>
<div class="code">            while( &nbsp;PeekAtNextLinePrefix( &nbsp;ifstr, &nbsp;MODEXT_PREFIX&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Item next_line;
</div>
<div class="code">                next_line.FromFile( &nbsp;ifstr&nbsp;);
</div>
<div class="code">                ifstr_line++;
</div>
<div class="code">                cerr &lt;&lt; "Ignoring member extent on line " &lt;&lt; ifstr_line &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<a name="./cccc/cccc_new.cc"></a><h1>./cccc/cccc_new.cc</h1>
<div class="code"><a name="./cccc/cccc_new.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          // cccc_new.cc
</div>
<div class="code">          
</div>
<div class="code">          // we are having some problems with heap corruption, &nbsp; so I am making sure that
</div>
<div class="code">          // all class news and deletes are done by the malloc subsystem, &nbsp; and adding 
</div>
<div class="code">          // logging and deletion suppression
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc.h"
</div>
<div class="code">          
</div>
<div class="code">          #include &lt;stdlib.h&gt;
</div>
<div class="code">          #include &lt;memory.h&gt;
</div>
<div class="code">          #ifdef CCCC_CONF_W32VC
</div>
<div class="code">          #include &lt;time.h&gt;
</div>
<div class="code">          #else
</div>
<div class="code">          #ifdef CCCC_CONF_W32BC
</div>
<div class="code">          #include &lt;time.h&gt;
</div>
<div class="code">          #else
</div>
<div class="code">          #include &lt;sys/time.h&gt;
</div>
<div class="code">          #endif
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          #define USE_SYSTEM_NEW
</div>
<div class="code">          #ifndef USE_SYSTEM_NEW
</div>
<div class="code">          extern int dont_free;
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_new.cc:00000043"></a>      43  ofstream str( &nbsp;"cccc_new.log"&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          void *
</div>
<div class="code"><a name="./cccc/cccc_new.cc:00000046"></a>      46  operator new( &nbsp;size_t n&nbsp;) 
</div>
<div class="code">          {
</div>
<div class="code">            void *retval=malloc( &nbsp;n&nbsp;);
</div>
<div class="code">            memset( &nbsp;retval, &nbsp;0xFA, &nbsp;n&nbsp;);
</div>
<div class="code">            str &lt;&lt; hex &lt;&lt; retval &lt;&lt; "@" &lt;&lt; time( &nbsp;NULL&nbsp;) &lt;&lt; "+" &lt;&lt; n &lt;&lt; endl;
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          void *
</div>
<div class="code"><a name="./cccc/cccc_new.cc:00000055"></a>      55  operator new[]( &nbsp;size_t n&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            void *retval=malloc( &nbsp;n&nbsp;);
</div>
<div class="code">            memset( &nbsp;retval, &nbsp;0xFB, &nbsp;n&nbsp;);
</div>
<div class="code">            str &lt;&lt; hex &lt;&lt; retval &lt;&lt; "@" &lt;&lt; time( &nbsp;NULL&nbsp;) &lt;&lt; "*" &lt;&lt; n &lt;&lt; endl;
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          void
</div>
<div class="code"><a name="./cccc/cccc_new.cc:00000064"></a>      64  operator delete( &nbsp;void * cp&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            str &lt;&lt; hex &lt;&lt; cp &lt;&lt; "@" &lt;&lt; time( &nbsp;NULL&nbsp;) &lt;&lt; "-" &lt;&lt; endl;
</div>
<div class="code">            memset( &nbsp;cp, &nbsp;0xFC, &nbsp;1&nbsp;);
</div>
<div class="code">            if( &nbsp;dont_free==0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                free( &nbsp;cp&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          void
</div>
<div class="code"><a name="./cccc/cccc_new.cc:00000075"></a>      75  operator delete[]( &nbsp;void * cp&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            str &lt;&lt; hex &lt;&lt; cp &lt;&lt; "@" &lt;&lt; time( &nbsp;NULL&nbsp;) &lt;&lt; "/" &lt;&lt; endl;
</div>
<div class="code">            memset( &nbsp;cp, &nbsp;0xFD, &nbsp;1&nbsp;);
</div>
<div class="code">            if( &nbsp;dont_free==0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                free( &nbsp;cp&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./cccc/cccc_opt.cc"></a><h1>./cccc/cccc_opt.cc</h1>
<div class="code"><a name="./cccc/cccc_opt.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          // cccc_opt.cc
</div>
<div class="code">          #include "cccc.h"
</div>
<div class="code">          #include &lt;fstream&gt;
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_opt.h"
</div>
<div class="code">          #include "cccc_utl.h"
</div>
<div class="code">          #include "cccc_met.h"
</div>
<div class="code">          
</div>
<div class="code">          #include &lt;map&gt;
</div>
<div class="code">          
</div>
<div class="code">          typedef std::map&lt;string, &nbsp;string&gt; file_extension_language_map_t;
</div>
<div class="code">          typedef std::map&lt;string, &nbsp;Metric_Treatment*&gt; metric_treatment_map_t;
</div>
<div class="code">          typedef std::pair&lt;string, &nbsp;string&gt; dialect_keyword_t;
</div>
<div class="code">          typedef std::map&lt;dialect_keyword_t, &nbsp;string&gt; dialect_keyword_map_t;
</div>
<div class="code">          
</div>
<div class="code">          static file_extension_language_map_t extension_map;
</div>
<div class="code">          static metric_treatment_map_t treatment_map;
</div>
<div class="code">          static dialect_keyword_map_t dialect_keyword_map;
</div>
<div class="code">          
</div>
<div class="code">          // these are declared extern so that it can be defined later in the file
</div>
<div class="code">          extern const char *default_fileext_options[];
</div>
<div class="code">          extern const char *default_treatment_options[];
</div>
<div class="code">          extern const char *default_dialect_options[];
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_opt.cc:00000043"></a>      43  static void add_file_extension( &nbsp;CCCC_Item&amp; fileext_line&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          	string ext, &nbsp; lang;
</div>
<div class="code">          	if( &nbsp;
</div>
<div class="code">          		fileext_line.Extract( &nbsp;ext&nbsp;) &amp;&amp;
</div>
<div class="code">          		fileext_line.Extract( &nbsp;lang&nbsp;)
</div>
<div class="code">          		&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		file_extension_language_map_t::value_type extension_pair( &nbsp;ext, &nbsp;lang&nbsp;);
</div>
<div class="code">          		extension_map.insert( &nbsp;extension_pair&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_opt.cc:00000056"></a>      56  void add_treatment( &nbsp;CCCC_Item&amp; treatment_line&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          	Metric_Treatment *new_treatment=new Metric_Treatment( &nbsp;treatment_line&nbsp;);
</div>
<div class="code">          	metric_treatment_map_t::iterator iter=
</div>
<div class="code">          		treatment_map.find( &nbsp;new_treatment-&gt;code&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	if( &nbsp;iter!=treatment_map.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		delete ( &nbsp;*iter&nbsp;).second;
</div>
<div class="code">          		( &nbsp;*iter&nbsp;).second=new_treatment;
</div>
<div class="code">              }
</div>
<div class="code">          	else
</div>
<div class="code">              {
</div>
<div class="code">          		metric_treatment_map_t::value_type
</div>
<div class="code">          			treatment_pair( &nbsp;new_treatment-&gt;code, &nbsp;new_treatment&nbsp;);
</div>
<div class="code">          		treatment_map.insert( &nbsp;treatment_pair&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_opt.cc:00000075"></a>      75  static void add_dialect_keyword( &nbsp;CCCC_Item&amp; dialect_keyword_line&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          	string dialect, &nbsp; keyword, &nbsp; policy;
</div>
<div class="code">          	if( &nbsp;
</div>
<div class="code">          		dialect_keyword_line.Extract( &nbsp;dialect&nbsp;) &amp;&amp;
</div>
<div class="code">          		dialect_keyword_line.Extract( &nbsp;keyword&nbsp;) &amp;&amp;
</div>
<div class="code">          		dialect_keyword_line.Extract( &nbsp;policy&nbsp;)
</div>
<div class="code">          		&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		dialect_keyword_map_t::key_type kt( &nbsp;dialect, &nbsp;keyword&nbsp;);
</div>
<div class="code">          		dialect_keyword_map_t::value_type vt( &nbsp;kt, &nbsp;policy&nbsp;);
</div>
<div class="code">          		dialect_keyword_map.insert( &nbsp;vt&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_opt.cc:00000090"></a>      90  void CCCC_Options::Add_Option( &nbsp;CCCC_Item&amp; option&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          	string first_token;
</div>
<div class="code">          	bool retval=option.Extract( &nbsp;first_token&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	if( &nbsp;retval==false&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		// do nothing
</div>
<div class="code">              }
</div>
<div class="code">          	else if( &nbsp;first_token=="CCCC_FileExt"&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		add_file_extension( &nbsp;option&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          	else if( &nbsp;first_token=="CCCC_MetTmnt"&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		add_treatment( &nbsp;option&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          	else if( &nbsp;first_token=="CCCC_Dialect"&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		add_dialect_keyword( &nbsp;option&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          	else
</div>
<div class="code">              {
</div>
<div class="code">          		retval=false;
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_opt.cc:00000118"></a>     118  void CCCC_Options::Save_Options( &nbsp;const string&amp; filename&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          	ofstream optstr( &nbsp;filename.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          	file_extension_language_map_t::iterator felIter;
</div>
<div class="code">          	for( &nbsp;felIter=extension_map.begin( &nbsp;&nbsp;);
</div>
<div class="code">          	felIter!=extension_map.end( &nbsp;&nbsp;);
</div>
<div class="code">          	++felIter&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		CCCC_Item extLine;
</div>
<div class="code">          		extLine.Insert( &nbsp;"CCCC_FileExt"&nbsp;);
</div>
<div class="code">          		extLine.Insert( &nbsp;( &nbsp;*felIter&nbsp;).first.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          		extLine.Insert( &nbsp;( &nbsp;*felIter&nbsp;).second.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          		extLine.ToFile( &nbsp;optstr&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">          	metric_treatment_map_t::iterator tIter;
</div>
<div class="code">          	for( &nbsp;tIter=treatment_map.begin( &nbsp;&nbsp;);
</div>
<div class="code">          	tIter!=treatment_map.end( &nbsp;&nbsp;);
</div>
<div class="code">          	++tIter&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		CCCC_Item tmtLine;
</div>
<div class="code">          		tmtLine.Insert( &nbsp;"CCCC_MetTmnt"&nbsp;);
</div>
<div class="code">          		tmtLine.Insert( &nbsp;( &nbsp;*tIter&nbsp;).second-&gt;code&nbsp;);
</div>
<div class="code">          		tmtLine.Insert( &nbsp;( &nbsp;*tIter&nbsp;).second-&gt;lower_threshold&nbsp;);
</div>
<div class="code">          		tmtLine.Insert( &nbsp;( &nbsp;*tIter&nbsp;).second-&gt;upper_threshold&nbsp;);
</div>
<div class="code">          		tmtLine.Insert( &nbsp;( &nbsp;*tIter&nbsp;).second-&gt;numerator_threshold&nbsp;);
</div>
<div class="code">          		tmtLine.Insert( &nbsp;( &nbsp;*tIter&nbsp;).second-&gt;width&nbsp;);
</div>
<div class="code">          		tmtLine.Insert( &nbsp;( &nbsp;*tIter&nbsp;).second-&gt;precision&nbsp;);
</div>
<div class="code">          		tmtLine.Insert( &nbsp;( &nbsp;*tIter&nbsp;).second-&gt;name&nbsp;);
</div>
<div class="code">          		tmtLine.ToFile( &nbsp;optstr&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">          	dialect_keyword_map_t::iterator dkIter;
</div>
<div class="code">          	for( &nbsp;dkIter=dialect_keyword_map.begin( &nbsp;&nbsp;);
</div>
<div class="code">          	dkIter!=dialect_keyword_map.end( &nbsp;&nbsp;);
</div>
<div class="code">          	++dkIter&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		CCCC_Item dkLine;
</div>
<div class="code">          		dkLine.Insert( &nbsp;"CCCC_Dialect"&nbsp;);
</div>
<div class="code">          		dkLine.Insert( &nbsp;( &nbsp;*dkIter&nbsp;).first.first&nbsp;);
</div>
<div class="code">          		dkLine.Insert( &nbsp;( &nbsp;*dkIter&nbsp;).first.second&nbsp;);
</div>
<div class="code">          		dkLine.Insert( &nbsp;( &nbsp;*dkIter&nbsp;).second&nbsp;);
</div>
<div class="code">          		dkLine.ToFile( &nbsp;optstr&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_opt.cc:00000164"></a>     164  void CCCC_Options::Load_Options( &nbsp;const string&amp; filename&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          	ifstream optstr( &nbsp;filename.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	while( &nbsp;optstr.good( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		CCCC_Item option_line;
</div>
<div class="code">          		if( &nbsp;optstr.good( &nbsp;&nbsp;) &amp;&amp;
</div>
<div class="code">          			option_line.FromFile( &nbsp;optstr&nbsp;)
</div>
<div class="code">          			&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          			Add_Option( &nbsp;option_line&nbsp;);
</div>
<div class="code">          		}
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          // initialise using hard-coded defaults
</div>
<div class="code"><a name="./cccc/cccc_opt.cc:00000182"></a>     182  void CCCC_Options::Load_Options( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          	int i=0;
</div>
<div class="code">          
</div>
<div class="code">          	const char **option_ptr;
</div>
<div class="code">          
</div>
<div class="code">          	option_ptr=default_fileext_options;
</div>
<div class="code">          	while( &nbsp; ( &nbsp;*option_ptr&nbsp;)!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		string option_string="CCCC_FileExt@";
</div>
<div class="code">          		option_string+=( &nbsp;*option_ptr&nbsp;);
</div>
<div class="code">          		CCCC_Item option_line( &nbsp;option_string&nbsp;);
</div>
<div class="code">          		Add_Option( &nbsp;option_line&nbsp;);
</div>
<div class="code">          		option_ptr++;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">          	option_ptr=default_treatment_options;
</div>
<div class="code">          	while( &nbsp; ( &nbsp;*option_ptr&nbsp;)!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		string option_string="CCCC_MetTmnt@";
</div>
<div class="code">          		option_string+=( &nbsp;*option_ptr&nbsp;);
</div>
<div class="code">          		CCCC_Item option_line( &nbsp;option_string&nbsp;);
</div>
<div class="code">          		Add_Option( &nbsp;option_line&nbsp;);
</div>
<div class="code">          		option_ptr++;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">          	option_ptr=default_dialect_options;
</div>
<div class="code">          	while( &nbsp; ( &nbsp;*option_ptr&nbsp;)!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		string option_string="CCCC_Dialect@";
</div>
<div class="code">          		option_string+=( &nbsp;*option_ptr&nbsp;);
</div>
<div class="code">          		CCCC_Item option_line( &nbsp;option_string&nbsp;);
</div>
<div class="code">          		Add_Option( &nbsp;option_line&nbsp;);
</div>
<div class="code">          		option_ptr++;
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          // map a filename to a language
</div>
<div class="code"><a name="./cccc/cccc_opt.cc:00000220"></a>     220  string CCCC_Options::getFileLanguage( &nbsp;const string&amp; filename&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          	string retval;
</div>
<div class="code">          	string extension;
</div>
<div class="code">          	file_extension_language_map_t::iterator iter;
</div>
<div class="code">          
</div>
<div class="code">          	unsigned int extpos=filename.rfind( &nbsp;"."&nbsp;);
</div>
<div class="code">          	if( &nbsp;extpos!=string::npos&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		extension=filename.substr( &nbsp;extpos&nbsp;);
</div>
<div class="code">          		iter=extension_map.find( &nbsp;extension&nbsp;);
</div>
<div class="code">          		if( &nbsp;iter!=extension_map.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          			retval=( &nbsp;*iter&nbsp;).second;
</div>
<div class="code">          		}
</div>
<div class="code">              }
</div>
<div class="code">          	if( &nbsp;retval.size( &nbsp;&nbsp;)==0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		iter=extension_map.find( &nbsp;""&nbsp;);
</div>
<div class="code">          		if( &nbsp;iter!=extension_map.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          			retval=( &nbsp;*iter&nbsp;).second;
</div>
<div class="code">          		}
</div>
<div class="code">          		else
</div>
<div class="code">          		{
</div>
<div class="code">          			// could not find language for extension
</div>
<div class="code">          			cerr &lt;&lt; "No language found for extension " &lt;&lt; extension.c_str( &nbsp;&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          		}
</div>
<div class="code">              }
</div>
<div class="code">          	return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          // map a metric name to a Metric_Treatment object
</div>
<div class="code"><a name="./cccc/cccc_opt.cc:00000253"></a>     253  Metric_Treatment *CCCC_Options::getMetricTreatment( &nbsp;const string&amp; metric_tag&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          	Metric_Treatment *retval=NULL;
</div>
<div class="code">          	metric_treatment_map_t::iterator iter=treatment_map.find( &nbsp;metric_tag&nbsp;);
</div>
<div class="code">          	if( &nbsp;iter!=treatment_map.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		retval=( &nbsp;*iter&nbsp;).second;
</div>
<div class="code">              }
</div>
<div class="code">          	return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_opt.cc:00000264"></a>     264  string CCCC_Options::dialectKeywordPolicy( &nbsp;const string&amp; lang, &nbsp; const string&amp; kw&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          	string retval;
</div>
<div class="code">          	dialect_keyword_map_t::key_type kt( &nbsp;lang, &nbsp;kw&nbsp;);
</div>
<div class="code">          	dialect_keyword_map_t::const_iterator iter=dialect_keyword_map.find( &nbsp;kt&nbsp;);
</div>
<div class="code">          	if( &nbsp;iter!=dialect_keyword_map.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          		retval=( &nbsp;*iter&nbsp;).second;
</div>
<div class="code">              }
</div>
<div class="code">          	return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          const char *default_fileext_options[]=
</div>
<div class="code">          {
</div>
<div class="code">          	// file extensions
</div>
<div class="code">          	".c@c.ansi@", &nbsp;
</div>
<div class="code">          
</div>
<div class="code">          		".h@c++.ansi@", &nbsp;
</div>
<div class="code">          		".cc@c++.ansi@", &nbsp;
</div>
<div class="code">          		".cpp@c++.ansi@", &nbsp;
</div>
<div class="code">          		".cxx@c++.ansi@", &nbsp;
</div>
<div class="code">          		".c++@c++.ansi@", &nbsp;
</div>
<div class="code">          		".C@c++.ansi@", &nbsp;
</div>
<div class="code">          		".CC@c++.ansi@", &nbsp;
</div>
<div class="code">          		".CPP@c++.ansi@", &nbsp;
</div>
<div class="code">          		".CXX@c++.ansi@", &nbsp;
</div>
<div class="code">          		".hh@c++.ansi@", &nbsp;
</div>
<div class="code">          		".hpp@c++.ansi@", &nbsp;
</div>
<div class="code">          		".hxx@c++.ansi@", &nbsp;
</div>
<div class="code">          		".h++@c++.ansi@", &nbsp;
</div>
<div class="code">          		".H@c++.ansi@", &nbsp;
</div>
<div class="code">          		".HH@c++.ansi@", &nbsp;
</div>
<div class="code">          		".HPP@c++.ansi@", &nbsp;
</div>
<div class="code">          		".HXX@c++.ansi@", &nbsp;
</div>
<div class="code">          		".H++@c++.ansi@", &nbsp;
</div>
<div class="code">          
</div>
<div class="code">          		".j@java@", &nbsp;
</div>
<div class="code">          		".jav@java@", &nbsp;
</div>
<div class="code">          		".java@java@", &nbsp;
</div>
<div class="code">          		".J@java@", &nbsp;
</div>
<div class="code">          		".JAV@java@", &nbsp;
</div>
<div class="code">          		".JAVA@java@", &nbsp;
</div>
<div class="code">          
</div>
<div class="code">          		".ada@ada.95@", &nbsp;
</div>
<div class="code">          		".ads@ada.95@", &nbsp;
</div>
<div class="code">          		".adb@ada.95@", &nbsp;
</div>
<div class="code">          
</div>
<div class="code">          		".ADA@ada.95@", &nbsp;
</div>
<div class="code">          		".ADS@ada.95@", &nbsp;
</div>
<div class="code">          		".ADB@ada.95@", &nbsp;
</div>
<div class="code">          
</div>
<div class="code">          		// The language associated with the empty file extension would be used as a default
</div>
<div class="code">          		// if defined.
</div>
<div class="code">          		// This is presently disabled so that we don't process files in
</div>
<div class="code">          		// MSVC projects like .rc, &nbsp; .odl which are not in C++.
</div>
<div class="code">          		// "@c++.ansi@", &nbsp;
</div>
<div class="code">          
</div>
<div class="code">          		NULL
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          const char *default_treatment_options[] =
</div>
<div class="code">          {
</div>
<div class="code">          	// metric treatments
</div>
<div class="code">          	// all metric values are displayed using the class CCCC_Metric, &nbsp; which may be
</div>
<div class="code">          	// viewed as ratio of two integers associated with a character string tag
</div>
<div class="code">          	// the denominator of the ratio defaults to 1, &nbsp; allowing simple counts to
</div>
<div class="code">          	// be handled by the same code as is used for ratios
</div>
<div class="code">          	//
</div>
<div class="code">          	// the tag associated with a metric is used as a key to lookup a record
</div>
<div class="code">          	// describing a policy for its display ( &nbsp;class Metric_Treatment&nbsp;)
</div>
<div class="code">          	//
</div>
<div class="code">          	// the fields of each treatment record are as follows:
</div>
<div class="code">          	// TAG     the short string of characters used as the lookup key.
</div>
<div class="code">          	// T1, &nbsp; T2  two numeric thresholds which are the lower bounds for the ratio of
</div>
<div class="code">          	// the metric's numerator and denominator beyond which the
</div>
<div class="code">          	//  value is treated as high or extreme by the analyser
</div>
<div class="code">          	//  these will be displayed in emphasized fonts, &nbsp; and if the browser
</div>
<div class="code">          	//  supports the BGCOLOR attribute, &nbsp; extreme values will have a red
</div>
<div class="code">          	//  background, &nbsp; while high values will have a yellow background.
</div>
<div class="code">          	//  The intent is that high values should be treated as suspicious but
</div>
<div class="code">          	//  tolerable in moderation, &nbsp; whereas extreme values should almost
</div>
<div class="code">          	//  always be regarded as defects ( &nbsp;not necessarily that you will fix
</div>
<div class="code">          	//  them&nbsp;).
</div>
<div class="code">          	// NT  a third threshold which supresses calculation of ratios where
</div>
<div class="code">          	//     the numerator is lower than NT.
</div>
<div class="code">          	//     The principal reason for doing this is to prevent ratios like L_C
</div>
<div class="code">          	//  being shown as *** ( &nbsp;infinity&nbsp;) and displayed as extreme when the
</div>
<div class="code">          	//  denominator is 0, &nbsp; providing the numerator is sufficiently low.
</div>
<div class="code">          	//  Suitable values are probably similar to those for T1.
</div>
<div class="code">          	// W       the width of the metric ( &nbsp;total number of digits&nbsp;).
</div>
<div class="code">          	// P       the precision of the metric ( &nbsp;digits after the decimal point&nbsp;).
</div>
<div class="code">          	// Comment a free form field extending to the end of the line.
</div>
<div class="code">          
</div>
<div class="code">          	// TAG      T1      T2   NT  W  P Comment
</div>
<div class="code">          	"LOCf@      30@    100@   0@ 6@ 0@Lines of code/function@", &nbsp;
</div>
<div class="code">          	"LOCm@     500@   2000@   0@ 6@ 0@Lines of code/single module@", &nbsp;
</div>
<div class="code">          	"LOCper@   500@   2000@   0@ 6@ 3@Lines of code/average module@", &nbsp;
</div>
<div class="code">          	"LOCp@  999999@ 999999@   0@ 6@ 0@Lines of code/project@", &nbsp;
</div>
<div class="code">          	"MVGf@      10@     30@   0@ 6@ 0@Cyclomatic complexity/function@", &nbsp;
</div>
<div class="code">          	"MVGm@     200@   1000@   0@ 6@ 0@Cyclomatic complexity/single module@", &nbsp;
</div>
<div class="code">          	"MVGper@   200@   1000@   0@ 6@ 3@Cyclomatic complexity/average module@", &nbsp;
</div>
<div class="code">          	"MVGp@  999999@ 999999@   0@ 6@ 0@Cyclomatic complexity/project@", &nbsp;
</div>
<div class="code">          	"COM@   999999@ 999999@   0@ 6@ 0@Comment lines@", &nbsp;
</div>
<div class="code">          	"COMper@999999@ 999999@   0@ 6@ 3@Comment lines ( &nbsp;averaged&nbsp;)@", &nbsp;
</div>
<div class="code">          	"M_C@        5@     10@   5@ 6@ 3@MVG/COM McCabe/comment line@", &nbsp;
</div>
<div class="code">          	"L_C@        7@     30@  20@ 6@ 3@LOC/COM Lines of code/comment line@", &nbsp;
</div>
<div class="code">          	"FI@        12@     20@   0@ 6@ 0@Fan in ( &nbsp;overall&nbsp;)@", &nbsp;
</div>
<div class="code">          	"FIv@        6@     12@   0@ 6@ 0@Fan in ( &nbsp;visible uses only&nbsp;)@", &nbsp;
</div>
<div class="code">          	"FIc@        6@     12@   0@ 6@ 0@Fan in ( &nbsp;concrete uses only&nbsp;)@", &nbsp;
</div>
<div class="code">          	"FO@        12@     20@   0@ 6@ 0@Fan out ( &nbsp;overall&nbsp;)@", &nbsp;
</div>
<div class="code">          	"FOv@	       6@     12@   0@ 6@ 0@Fan out ( &nbsp;visible uses only&nbsp;)@", &nbsp;
</div>
<div class="code">          	"FOc@        6@     12@   0@ 6@ 0@Fan out ( &nbsp;concrete uses only&nbsp;)@", &nbsp;
</div>
<div class="code">          	"IF4@      100@   1000@   0@ 6@ 0@Henry-Kafura/Shepperd measure ( &nbsp;overall&nbsp;)@", &nbsp;
</div>
<div class="code">          	"IF4v@      30@    100@   0@ 6@ 0@Henry-Kafura/Shepperd measure ( &nbsp;visible&nbsp;)@", &nbsp;
</div>
<div class="code">          	"IF4c@      30@    100@   0@ 6@ 0@Henry-Kafura/Shepperd measure ( &nbsp;concrete&nbsp;)@", &nbsp;
</div>
<div class="code">          	 // WMC stands for weighted methods per class, &nbsp;
</div>
<div class="code">          	 // the suffix distinguishes the weighting function
</div>
<div class="code">          	 "WMC1@      30@    100@   0@ 6@ 0@Weighting function=1 unit per method@", &nbsp;
</div>
<div class="code">          	 "WMCv@      10@     30@   0@ 6@ 0@Weighting function=1 unit per visible method@", &nbsp;
</div>
<div class="code">          	 "DIT@	       3@      6@   0@ 6@ 0@Depth of Inheritance Tree@", &nbsp;
</div>
<div class="code">          	 "NOC@	       4@     15@   0@ 6@ 0@Number of children@", &nbsp;
</div>
<div class="code">          	 "CBO@	      12@     30@   0@ 6@ 0@Coupling between objects@", &nbsp;
</div>
<div class="code">          	 "8.3@    999999@ 999999@   0@ 8@ 3@General format for fixed precision 3 d.p.@", &nbsp;
</div>
<div class="code">          	 NULL
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          const char *default_dialect_options[] =
</div>
<div class="code">          {
</div>
<div class="code">          	// This configuration item allows the description of
</div>
<div class="code">          	// dialects in which C/C++ identifiers get treated
</div>
<div class="code">          	// as supplementary keyword.  The rules specified
</div>
<div class="code">          	// here ( &nbsp;or in the runtime option file, &nbsp; if specified&nbsp;)
</div>
<div class="code">          	// allow the parser to make the call
</div>
<div class="code">          	// CCCC_Options::dialect_keyword_policy( &nbsp;lang, &nbsp;kw&nbsp;) which
</div>
<div class="code">          	// returns a string.  If nothing is known about the
</div>
<div class="code">          	// pair &lt;lang, &nbsp;kw&gt;, &nbsp; an empty string is returned.  If
</div>
<div class="code">          	// an entry is specified here the associated string is
</div>
<div class="code">          	// returned, &nbsp; which is called the policy, &nbsp; which the
</div>
<div class="code">          	// parser uses to guide its actions.  The most common
</div>
<div class="code">          	// policy is to ignore, &nbsp; but any string can be
</div>
<div class="code">          	// specified, &nbsp; providing the person implementing
</div>
<div class="code">          	// the parser can think of an intelligent way to
</div>
<div class="code">          	// proceed.
</div>
<div class="code">          	"c++.mfc@BEGIN_MESSAGE_MAP@start_skipping@", &nbsp;
</div>
<div class="code">          		"c++.mfc@END_MESSAGE_MAP@stop_skipping@", &nbsp;
</div>
<div class="code">          		"c++.stl@__STL_BEGIN_NAMESPACE@ignore@", &nbsp;
</div>
<div class="code">          		"c++.stl@__STL_END_NAMESPACE@ignore@", &nbsp;
</div>
<div class="code">          		NULL
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./cccc/cccc_prj.cc"></a><h1>./cccc/cccc_prj.cc</h1>
<div class="code"><a name="./cccc/cccc_prj.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          // cccc_prj.cc
</div>
<div class="code">          
</div>
<div class="code">          // We have some debugging messages specifically for looking at how
</div>
<div class="code">          // use relationships are being handled.
</div>
<div class="code">          #define DEBUG_USEREL 0
</div>
<div class="code">          
</div>
<div class="code">          // implementation file for class CCCC_Project
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc.h"
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include "cccc_prj.h"
</div>
<div class="code">          #include "cccc_db.h"
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_prj.cc:00000033"></a>      33  CCCC_Project::CCCC_Project( &nbsp;const string&amp; name&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // we prime the database with knowledge of the builtin base types
</div>
<div class="code">            // we also add a record for the anonymous class which we will treat
</div>
<div class="code">            // as the parent of all non-member functions
</div>
<div class="code">            const char *builtin_type_info[]=
</div>
<div class="code">            {
</div>
<div class="code">              "void@builtin@&lt;nofile&gt;@0@builtin definition@d?????@@0@d@", &nbsp;
</div>
<div class="code">              "int@builtin@&lt;nofile&gt;@0@builtin definition@d?????@@0@d@", &nbsp;
</div>
<div class="code">              "char@builtin@&lt;nofile&gt;@0@builtin definition@d?????@@0@d@", &nbsp;
</div>
<div class="code">              "long@builtin@&lt;nofile&gt;@0@builtin definition@d?????@@0@d@", &nbsp;
</div>
<div class="code">              "float@builtin@&lt;nofile&gt;@0@builtin definition@d?????@@0@d@", &nbsp;
</div>
<div class="code">              "double@builtin@&lt;nofile&gt;@0@builtin definition@d?????@@0@d@", &nbsp;
</div>
<div class="code">              NULL
</div>
<div class="code">            };
</div>
<div class="code">            for( &nbsp;const char **ptr=builtin_type_info; *ptr!=NULL; ptr++&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Item type_info( &nbsp;*ptr&nbsp;);
</div>
<div class="code">                add_module( &nbsp;type_info&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_prj.cc:00000056"></a>      56  void CCCC_Project::add_module( &nbsp;CCCC_Item&amp; module_line&nbsp;) {
</div>
<div class="code">            char linebuf[1024];
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module *module_ptr=new CCCC_Module;
</div>
<div class="code">            CCCC_Extent *extent_ptr=new CCCC_Extent;
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;
</div>
<div class="code">               module_line.Extract( &nbsp;module_ptr-&gt;module_name&nbsp;) &amp;&amp;
</div>
<div class="code">               module_line.Extract( &nbsp;module_ptr-&gt;module_type&nbsp;) &amp;&amp;
</div>
<div class="code">               extent_ptr-&gt;GetFromItem( &nbsp;module_line&nbsp;)
</div>
<div class="code">               &nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Module *lookup_module_ptr=module_table.find_or_insert( &nbsp;module_ptr&nbsp;);
</div>
<div class="code">                if( &nbsp;lookup_module_ptr != NULL&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  lookup_module_ptr-&gt;extent_table.find_or_insert( &nbsp;extent_ptr&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  if( &nbsp;lookup_module_ptr!=module_ptr&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      // do some work to transfer knowledge from the new module object
</div>
<div class="code">          	      // then delete it
</div>
<div class="code">          	      Resolve_Fields( &nbsp;lookup_module_ptr-&gt;module_type, &nbsp;module_ptr-&gt;module_type&nbsp;);
</div>
<div class="code">          	      delete module_ptr;
</div>
<div class="code">          	    }
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                cerr &lt;&lt; "CCCC_Project::add_module_extent: extraction failed" &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_prj.cc:00000088"></a>      88  void CCCC_Project::add_member( &nbsp;CCCC_Item&amp; member_data_line&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            CCCC_Module *new_module_ptr=new CCCC_Module;
</div>
<div class="code">            CCCC_Member *new_member_ptr=new CCCC_Member;
</div>
<div class="code">            if( &nbsp;
</div>
<div class="code">               member_data_line.Extract( &nbsp;new_module_ptr-&gt;module_name&nbsp;) &amp;&amp;
</div>
<div class="code">               member_data_line.Extract( &nbsp;new_member_ptr-&gt;member_name&nbsp;) &amp;&amp;
</div>
<div class="code">               member_data_line.Extract( &nbsp;new_member_ptr-&gt;member_type&nbsp;) &amp;&amp;
</div>
<div class="code">               member_data_line.Extract( &nbsp;new_member_ptr-&gt;param_list&nbsp;)
</div>
<div class="code">               &nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Module *found_module_ptr=module_table.find_or_insert( &nbsp;new_module_ptr&nbsp;);
</div>
<div class="code">                if( &nbsp;found_module_ptr==new_module_ptr&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  // protect the new module from deletion at the end of this function
</div>
<div class="code">          	  new_module_ptr=NULL;
</div>
<div class="code">          	}
</div>
<div class="code">          
</div>
<div class="code">                new_member_ptr-&gt;parent=found_module_ptr;
</div>
<div class="code">                CCCC_Member *found_member_ptr=member_table.find_or_insert( &nbsp;new_member_ptr&nbsp;);
</div>
<div class="code">                if( &nbsp;found_member_ptr==new_member_ptr&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  new_member_ptr=NULL;
</div>
<div class="code">          	}
</div>
<div class="code">                found_member_ptr-&gt;add_extent( &nbsp;member_data_line&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                cerr &lt;&lt; "CCCC_Project::add_module extraction failed" &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            // clean up newly allocated records if they have not been accepted
</div>
<div class="code">            // into the database
</div>
<div class="code">            delete new_module_ptr;
</div>
<div class="code">            delete new_member_ptr;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_prj.cc:00000125"></a>     125  void CCCC_Project::add_userel( &nbsp;CCCC_Item&amp; userel_data_line&nbsp;) {
</div>
<div class="code">            CCCC_UseRelationship *new_userel_ptr =
</div>
<div class="code">              new CCCC_UseRelationship( &nbsp;userel_data_line&nbsp;);
</div>
<div class="code">            CCCC_UseRelationship *lookup_userel_ptr =
</div>
<div class="code">              userel_table.find_or_insert( &nbsp;new_userel_ptr&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;lookup_userel_ptr != NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                if( &nbsp;new_userel_ptr != lookup_userel_ptr&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  delete new_userel_ptr;
</div>
<div class="code">          	}
</div>
<div class="code">                lookup_userel_ptr-&gt;add_extent( &nbsp;userel_data_line&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          #if DEBUG_USEREL
</div>
<div class="code">            cerr &lt;&lt; "Adding " &lt;&lt; lookup_userel_ptr-&gt;client &lt;&lt; " uses "
</div>
<div class="code">                 &lt;&lt; lookup_userel_ptr-&gt;supplier &lt;&lt; endl;
</div>
<div class="code">          #endif
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_prj.cc:00000145"></a>     145  void CCCC_Project::add_rejected_extent( &nbsp;CCCC_Item&amp; rejected_data_line&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            CCCC_Extent *new_extent=new CCCC_Extent( &nbsp;rejected_data_line&nbsp;);
</div>
<div class="code">            rejected_extent_table.find_or_insert( &nbsp;new_extent&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_prj.cc:00000151"></a>     151  void CCCC_Project::reindex( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            CCCC_Member *member_ptr=member_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;member_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                if( &nbsp;member_ptr-&gt;parent!=NULL&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  CCCC_Module::member_map_t::value_type
</div>
<div class="code">          	    new_pair( &nbsp;member_ptr-&gt;key( &nbsp;&nbsp;), &nbsp;member_ptr&nbsp;);
</div>
<div class="code">          	  member_ptr-&gt;parent-&gt;member_map.insert( &nbsp;new_pair&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">                else
</div>
<div class="code">          	{
</div>
<div class="code">          	  cerr &lt;&lt; "Member " &lt;&lt; member_ptr-&gt;key( &nbsp;&nbsp;) &lt;&lt; " has no parent"
</div>
<div class="code">          	       &lt;&lt; endl;
</div>
<div class="code">          	}
</div>
<div class="code">          
</div>
<div class="code">                CCCC_Extent *extent_ptr=member_ptr-&gt;extent_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">                while( &nbsp;extent_ptr!=NULL&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  Visibility extent_visibility=extent_ptr-&gt;get_visibility( &nbsp;&nbsp;);
</div>
<div class="code">          	  Visibility member_visibility=member_ptr-&gt;get_visibility( &nbsp;&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  if( &nbsp;member_ptr-&gt;visibility==vDONTKNOW&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      member_ptr-&gt;visibility=extent_visibility;
</div>
<div class="code">          	    }
</div>
<div class="code">          	  else if( &nbsp;
</div>
<div class="code">          		  ( &nbsp;extent_visibility!=vDONTKNOW&nbsp;) &amp;&amp;
</div>
<div class="code">          		  ( &nbsp;member_visibility!=extent_visibility&nbsp;)
</div>
<div class="code">          		  &nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      member_ptr-&gt;visibility=vINVALID;
</div>
<div class="code">          	    }
</div>
<div class="code">          
</div>
<div class="code">          	  extent_ptr=member_ptr-&gt;extent_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">          
</div>
<div class="code">                member_ptr=member_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            CCCC_UseRelationship *userel_ptr=userel_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;userel_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Module *supplier_ptr=new CCCC_Module;
</div>
<div class="code">                supplier_ptr-&gt;module_name=userel_ptr-&gt;supplier;
</div>
<div class="code">                CCCC_Module *found_supplier_ptr=
</div>
<div class="code">          	module_table.find_or_insert( &nbsp;supplier_ptr&nbsp;);
</div>
<div class="code">                if( &nbsp;found_supplier_ptr!=supplier_ptr&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  delete supplier_ptr;
</div>
<div class="code">          	  supplier_ptr=found_supplier_ptr;
</div>
<div class="code">          	}
</div>
<div class="code">          
</div>
<div class="code">                CCCC_Module *client_ptr=new CCCC_Module;
</div>
<div class="code">                client_ptr-&gt;module_name=userel_ptr-&gt;client;
</div>
<div class="code">                CCCC_Module *found_client_ptr=module_table.find_or_insert( &nbsp;client_ptr&nbsp;);
</div>
<div class="code">                if( &nbsp;found_client_ptr!=client_ptr&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  delete client_ptr;
</div>
<div class="code">          	  client_ptr=found_client_ptr;
</div>
<div class="code">          	}
</div>
<div class="code">          
</div>
<div class="code">                if( &nbsp;
</div>
<div class="code">          	 ( &nbsp;userel_ptr-&gt;supplier==userel_ptr-&gt;client&nbsp;) ||
</div>
<div class="code">          	 userel_ptr-&gt;supplier=="" ||
</div>
<div class="code">          	 userel_ptr-&gt;client=="" ||
</div>
<div class="code">          	 supplier_ptr-&gt;is_trivial( &nbsp;&nbsp;) ||
</div>
<div class="code">          	 client_ptr-&gt;is_trivial( &nbsp;&nbsp;)
</div>
<div class="code">          	 &nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          #if DEBUG_USEREL
</div>
<div class="code">          	  cerr &lt;&lt; "Removing relationship between "
</div>
<div class="code">          	       &lt;&lt; userel_ptr-&gt;supplier.c_str( &nbsp;&nbsp;)
</div>
<div class="code">          	       &lt;&lt; " and "
</div>
<div class="code">          	       &lt;&lt; userel_ptr-&gt;client.c_str( &nbsp;&nbsp;)
</div>
<div class="code">          	       &lt;&lt; endl;
</div>
<div class="code">          #endif
</div>
<div class="code">          	  userel_table.remove( &nbsp;userel_ptr&nbsp;);
</div>
<div class="code">          	  delete userel_ptr;
</div>
<div class="code">          	}
</div>
<div class="code">                else
</div>
<div class="code">          	{
</div>
<div class="code">          	  // create links from the client and supplier modules to the
</div>
<div class="code">          	  // relationship object
</div>
<div class="code">          #if DEBUG_USEREL
</div>
<div class="code">          	  std::cerr &lt;&lt; "Creating links for "
</div>
<div class="code">          		    &lt;&lt; client_ptr-&gt;key( &nbsp;&nbsp;)
</div>
<div class="code">          		    &lt;&lt; " ( &nbsp;" &lt;&lt; client_ptr &lt;&lt; "&nbsp;) uses "
</div>
<div class="code">          		    &lt;&lt; supplier_ptr-&gt;key( &nbsp;&nbsp;)
</div>
<div class="code">          		    &lt;&lt; " ( &nbsp;" &lt;&lt; supplier_ptr &lt;&lt; "&nbsp;)" &lt;&lt; std::endl;
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          	  CCCC_Module::relationship_map_t::value_type
</div>
<div class="code">          	    new_supplier_pair( &nbsp;supplier_ptr-&gt;key( &nbsp;&nbsp;), &nbsp; userel_ptr&nbsp;), &nbsp;
</div>
<div class="code">          	    new_client_pair( &nbsp;client_ptr-&gt;key( &nbsp;&nbsp;), &nbsp; userel_ptr&nbsp;);
</div>
<div class="code">          	  client_ptr-&gt;supplier_map.insert( &nbsp;new_supplier_pair&nbsp;);
</div>
<div class="code">          	  supplier_ptr-&gt;client_map.insert( &nbsp;new_client_pair&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  // calculate the visibility and concreteness of the
</div>
<div class="code">          	  // relationship
</div>
<div class="code">          	  AugmentedBool visible=abDONTKNOW;
</div>
<div class="code">          	  AugmentedBool concrete=abDONTKNOW;
</div>
<div class="code">          
</div>
<div class="code">          	  CCCC_Extent *extent_ptr=userel_ptr-&gt;extent_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">          	  while( &nbsp;extent_ptr!=NULL&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      switch( &nbsp;extent_ptr-&gt;get_visibility( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		case vPRIVATE:
</div>
<div class="code">          		case vIMPLEMENTATION:
</div>
<div class="code">          		  if( &nbsp;visible!=abTRUE&nbsp;)
</div>
<div class="code">          		    {
</div>
<div class="code">          		      visible=abFALSE;
</div>
<div class="code">          		    }
</div>
<div class="code">          		  break;
</div>
<div class="code">          		case vPROTECTED:
</div>
<div class="code">          		case vPUBLIC:
</div>
<div class="code">          		  visible=abTRUE;
</div>
<div class="code">          		  break;
</div>
<div class="code">          		default:
</div>
<div class="code">          		  // nothing to do
</div>
<div class="code">          		  ;
</div>
<div class="code">          		}
</div>
<div class="code">          
</div>
<div class="code">          	      switch( &nbsp;extent_ptr-&gt;get_usetype( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		case utPARBYREF:
</div>
<div class="code">          		case utHASBYREF:
</div>
<div class="code">          		  if( &nbsp;concrete!=abTRUE&nbsp;)
</div>
<div class="code">          		    {
</div>
<div class="code">          		      concrete=abFALSE;
</div>
<div class="code">          		    }
</div>
<div class="code">          		  break;
</div>
<div class="code">          
</div>
<div class="code">          		case utINHERITS:
</div>
<div class="code">          		case utPARBYVAL:
</div>
<div class="code">          		case utHASBYVAL:
</div>
<div class="code">          		  concrete=abTRUE;
</div>
<div class="code">          		  break;
</div>
<div class="code">          
</div>
<div class="code">          		default:
</div>
<div class="code">          		  // nothing to do
</div>
<div class="code">          		  ;
</div>
<div class="code">          		}
</div>
<div class="code">          
</div>
<div class="code">          	      extent_ptr=userel_ptr-&gt;extent_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">          	    }
</div>
<div class="code">          	  userel_ptr-&gt;visible=visible;
</div>
<div class="code">          	  userel_ptr-&gt;concrete=concrete;
</div>
<div class="code">          	}
</div>
<div class="code">          
</div>
<div class="code">                userel_ptr=userel_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_prj.cc:00000308"></a>     308  int CCCC_Project::get_count( &nbsp;const char* count_tag&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval=0;
</div>
<div class="code">            retval+=module_table.get_count( &nbsp;count_tag&nbsp;);
</div>
<div class="code">            retval+=rejected_extent_table.get_count( &nbsp;count_tag&nbsp;);
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_prj.cc:00000317"></a>     317  int CCCC_Project::ToFile( &nbsp;ofstream&amp; ofstr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // this function could be rewritten much more elegantly using
</div>
<div class="code">            // STL output iterators, &nbsp; and one day will be ...
</div>
<div class="code">          
</div>
<div class="code">            int retval=FALSE;
</div>
<div class="code">            CCCC_Module *module_ptr=module_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;module_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                module_ptr-&gt;ToFile( &nbsp;ofstr&nbsp;);
</div>
<div class="code">                module_ptr=module_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Member *member_ptr=member_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;member_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                member_ptr-&gt;ToFile( &nbsp;ofstr&nbsp;);
</div>
<div class="code">                member_ptr=member_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            CCCC_UseRelationship *userel_ptr=userel_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;userel_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                userel_ptr-&gt;ToFile( &nbsp;ofstr&nbsp;);
</div>
<div class="code">                userel_ptr=userel_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Extent *rejext_ptr=rejected_extent_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;rejext_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Item extent_line;
</div>
<div class="code">                extent_line.Insert( &nbsp;REJEXT_PREFIX&nbsp;);
</div>
<div class="code">                rejext_ptr-&gt;AddToItem( &nbsp;extent_line&nbsp;);
</div>
<div class="code">                extent_line.ToFile( &nbsp;ofstr&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">                rejext_ptr=rejected_extent_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;ofstr.good( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval=TRUE;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_prj.cc:00000364"></a>     364  int CCCC_Project::FromFile( &nbsp;ifstream&amp; ifstr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval=FALSE;
</div>
<div class="code">          
</div>
<div class="code">            set_active_project( &nbsp;this&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            while( &nbsp;PeekAtNextLinePrefix( &nbsp;ifstr, &nbsp;MODULE_PREFIX&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Module *new_module=new CCCC_Module;
</div>
<div class="code">                int fromfile_status=new_module-&gt;FromFile( &nbsp;ifstr&nbsp;);
</div>
<div class="code">                DisposeOfImportRecord( &nbsp;new_module, &nbsp;fromfile_status&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            while( &nbsp;PeekAtNextLinePrefix( &nbsp;ifstr, &nbsp;MEMBER_PREFIX&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Member *new_member=new CCCC_Member;
</div>
<div class="code">                int fromfile_status=new_member-&gt;FromFile( &nbsp;ifstr&nbsp;);
</div>
<div class="code">                DisposeOfImportRecord( &nbsp;new_member, &nbsp;fromfile_status&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            while( &nbsp;PeekAtNextLinePrefix( &nbsp;ifstr, &nbsp;USEREL_PREFIX&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_UseRelationship *new_userel=new CCCC_UseRelationship;
</div>
<div class="code">                int fromfile_status=new_userel-&gt;FromFile( &nbsp;ifstr&nbsp;);
</div>
<div class="code">                DisposeOfImportRecord( &nbsp;new_userel, &nbsp;fromfile_status&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            while( &nbsp;PeekAtNextLinePrefix( &nbsp;ifstr, &nbsp;REJEXT_PREFIX&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Extent *new_rejext=new CCCC_Extent;
</div>
<div class="code">                CCCC_Item next_line;
</div>
<div class="code">                next_line.FromFile( &nbsp;ifstr&nbsp;);
</div>
<div class="code">                int fromfile_status=RECORD_ERROR;
</div>
<div class="code">                if( &nbsp;
</div>
<div class="code">          	 new_rejext-&gt;GetFromItem( &nbsp;next_line&nbsp;) &amp;&amp;
</div>
<div class="code">          	 new_rejext==rejected_extent_table.find_or_insert( &nbsp;new_rejext&nbsp;)
</div>
<div class="code">          	 &nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  fromfile_status=RECORD_ADDED;
</div>
<div class="code">          	}
</div>
<div class="code">                DisposeOfImportRecord( &nbsp;new_rejext, &nbsp;fromfile_status&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            set_active_project( &nbsp;NULL&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_prj.cc:00000412"></a>     412  string CCCC_Project::name( &nbsp;int level&nbsp;) const
</div>
<div class="code">          {
</div>
<div class="code">            return "";
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./cccc/cccc_rec.cc"></a><h1>./cccc/cccc_rec.cc</h1>
<div class="code"><a name="./cccc/cccc_rec.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          /*
</div>
<div class="code">           * cccc_rec.cc
</div>
<div class="code">           */
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include "cccc_rec.h"
</div>
<div class="code">          #include "cccc_db.h"
</div>
<div class="code">          
</div>
<div class="code">          CCCC_Project* CCCC_Record::active_project=NULL;
</div>
<div class="code"><a name="./cccc/cccc_rec.cc:00000028"></a>      28  CCCC_Project* CCCC_Record::get_active_project( &nbsp;&nbsp;) { return active_project; }
</div>
<div class="code"><a name="./cccc/cccc_rec.cc:00000029"></a>      29  void CCCC_Record::set_active_project( &nbsp;CCCC_Project* prj&nbsp;) { active_project=prj; }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_rec.cc:00000031"></a>      31  void CCCC_Record::merge_flags( &nbsp;string&amp; new_flags&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            const char *new_flag_array=new_flags.c_str( &nbsp;&nbsp;);
</div>
<div class="code">            const char *flag_array=flags.c_str( &nbsp;&nbsp;);
</div>
<div class="code">            unsigned int len=strlen( &nbsp;flag_array&nbsp;);
</div>
<div class="code">            if( &nbsp;strlen( &nbsp;new_flag_array&nbsp;)==len&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                char buf[100];
</div>
<div class="code">                unsigned int i;
</div>
<div class="code">                for( &nbsp;i=0; i&lt;len;i++&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  if( &nbsp;flag_array[i]=='?'&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      buf[i]=new_flag_array[i];
</div>
<div class="code">          	    }
</div>
<div class="code">          	  else
</div>
<div class="code">          	    {
</div>
<div class="code">          	      buf[i]=flag_array[i];
</div>
<div class="code">          	    }
</div>
<div class="code">          	}
</div>
<div class="code">                buf[len]='\0';
</div>
<div class="code">                flags=buf;
</div>
<div class="code">              } 
</div>
<div class="code">            else 
</div>
<div class="code">              {
</div>
<div class="code">                // if the parent record has just been created it may have
</div>
<div class="code">                // an empty flags member, &nbsp; so we use Resolve_Fields to copy
</div>
<div class="code">                // the flags from the first extent
</div>
<div class="code">                Resolve_Fields( &nbsp;flags, &nbsp;new_flags&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_rec.cc:00000063"></a>      63  void CCCC_Record::add_extent( &nbsp;CCCC_Item&amp; is&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            CCCC_Extent *new_extent=new CCCC_Extent;
</div>
<div class="code">            new_extent-&gt;GetFromItem( &nbsp;is&nbsp;);
</div>
<div class="code">            CCCC_Extent *inserted_extent=extent_table.find_or_insert( &nbsp;new_extent&nbsp;);
</div>
<div class="code">            if( &nbsp;new_extent != inserted_extent&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                delete new_extent;
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_rec.cc:00000075"></a>      75  string CCCC_Record::name( &nbsp;int /* level */&nbsp;) const { return ""; }
</div>
<div class="code"><a name="./cccc/cccc_rec.cc:00000076"></a>      76  string CCCC_Record::key( &nbsp;&nbsp;) const { return name( &nbsp;nlRANK&nbsp;); }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./cccc/cccc_tbl.cc"></a><h1>./cccc/cccc_tbl.cc</h1>
<div class="code"><a name="./cccc/cccc_tbl.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          // cccc_tbl.cc
</div>
<div class="code">          #ifndef _CCCC_TBL_BODY
</div>
<div class="code">          #define _CCCC_TBL_BODY
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include "cccc_tbl.h"
</div>
<div class="code">          #include &lt;cassert&gt;
</div>
<div class="code">          
</div>
<div class="code">          #define LINE_BUFFER_SIZE 1000
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_tbl.cc:00000030"></a>      30  template &lt;class T&gt; CCCC_Table&lt;T&gt;::CCCC_Table( &nbsp;&nbsp;)
</div>
<div class="code">          : sorted( &nbsp;true&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            iter_ = map_t::end( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_tbl.cc:00000036"></a>      36  template &lt;class T&gt; CCCC_Table&lt;T&gt;::~CCCC_Table( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // the container should manage the destruction of its own
</div>
<div class="code">            // nodes correctly, &nbsp; we just need to get rid of the
</div>
<div class="code">            // objects to which we hold pointers.
</div>
<div class="code">            // NB Although CCCC_Table holds pointers, &nbsp; it owns the
</div>
<div class="code">            // objects they point to and is responsible for their disposal.
</div>
<div class="code">            T* itemptr=first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;itemptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                delete itemptr;
</div>
<div class="code">                itemptr=next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          template&lt;class T&gt;
</div>
<div class="code"><a name="./cccc/cccc_tbl.cc:00000052"></a>      52  int CCCC_Table&lt;T&gt;::get_count( &nbsp;const char* count_tag&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval=0;
</div>
<div class="code">            T* itemptr=first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;itemptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval+=itemptr-&gt;get_count( &nbsp;count_tag&nbsp;);
</div>
<div class="code">                itemptr=next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          template&lt;class T&gt;
</div>
<div class="code"><a name="./cccc/cccc_tbl.cc:00000066"></a>      66  T* CCCC_Table&lt;T&gt;::find( &nbsp;string name&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            T *retval=NULL;
</div>
<div class="code">            typename map_t::iterator value_iterator=map_t::find( &nbsp;name&nbsp;);
</div>
<div class="code">            if( &nbsp;value_iterator!=map_t::end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval=( &nbsp;*value_iterator&nbsp;).second;
</div>
<div class="code">              }
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          template&lt;class T&gt;
</div>
<div class="code"><a name="./cccc/cccc_tbl.cc:00000078"></a>      78  T* CCCC_Table&lt;T&gt;::find_or_insert( &nbsp;T* new_item_ptr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            string new_key=new_item_ptr-&gt;key( &nbsp;&nbsp;);
</div>
<div class="code">            T *retval=find( &nbsp;new_key&nbsp;);
</div>
<div class="code">            if( &nbsp;retval==NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                typename map_t::value_type new_pair( &nbsp;new_key, &nbsp;new_item_ptr&nbsp;);
</div>
<div class="code">                map_t::insert( &nbsp;new_pair&nbsp;);
</div>
<div class="code">                sorted=false;
</div>
<div class="code">                retval=new_item_ptr;
</div>
<div class="code">              }
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          template&lt;class T&gt;
</div>
<div class="code"><a name="./cccc/cccc_tbl.cc:00000093"></a>      93  bool CCCC_Table&lt;T&gt;::remove( &nbsp;T* old_item_ptr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            bool retval=false;
</div>
<div class="code">            typename map_t::iterator value_iterator=map_t::find( &nbsp;old_item_ptr-&gt;key( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            if( &nbsp;value_iterator!=map_t::end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                this-&gt;erase( &nbsp;value_iterator&nbsp;);
</div>
<div class="code">                retval=true;
</div>
<div class="code">              }
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_tbl.cc:00000105"></a>     105  template &lt;class T&gt; void CCCC_Table&lt;T&gt;::sort( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            if( &nbsp;sorted==false&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                sorted=true;
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_tbl.cc:00000113"></a>     113  template &lt;class T&gt; void CCCC_Table&lt;T&gt;::reset_iterator( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            iter_=map_t::begin( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_tbl.cc:00000118"></a>     118  template &lt;class T&gt; T* CCCC_Table&lt;T&gt;::first_item( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            reset_iterator( &nbsp;&nbsp;);
</div>
<div class="code">            return next_item( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_tbl.cc:00000124"></a>     124  template &lt;class T&gt; T* CCCC_Table&lt;T&gt;::next_item( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            T* retval=NULL;
</div>
<div class="code">            if( &nbsp;iter_!=map_t::end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval=( &nbsp;*iter_&nbsp;).second;
</div>
<div class="code">                iter_++;
</div>
<div class="code">              }
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_tbl.cc:00000135"></a>     135  template &lt;class T&gt; int CCCC_Table&lt;T&gt;::records( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            return map_t::size( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          #endif // _CCCC_TBL_BODY
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./cccc/cccc_tok.cc"></a><h1>./cccc/cccc_tok.cc</h1>
<div class="code"><a name="./cccc/cccc_tok.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          /*
</div>
<div class="code">           * cccc_tok.C
</div>
<div class="code">           * implementation of a token class for the cccc project
</div>
<div class="code">           *
</div>
<div class="code">           */
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc.h"
</div>
<div class="code">          #include "cccc_tok.h"
</div>
<div class="code">          
</div>
<div class="code">          /* static variables */
</div>
<div class="code">          int ANTLRToken::RunningNesting=0;
</div>
<div class="code">          int ANTLRToken::bCodeLine=0;
</div>
<div class="code">          int ANTLRToken::numAllocated=0;
</div>
<div class="code">          int toks_alloc1=0, &nbsp; toks_alloc2=0, &nbsp; toks_alloc3=0, &nbsp; toks_freed=0;
</div>
<div class="code">          
</div>
<div class="code">          ANTLRToken currentLexerToken;
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">          ** Token objects are used to count the occurences of states which
</div>
<div class="code">          ** our analyser is interested in within the text.  Any metric which
</div>
<div class="code">          ** can be reduced to lexical counting on the text can be recorded
</div>
<div class="code">          ** this way.
</div>
<div class="code">          **
</div>
<div class="code">          ** This implementation counts the following features:
</div>
<div class="code">          **   tokens
</div>
<div class="code">          **   comment lines
</div>
<div class="code">          **   lines containing at least one token of code
</div>
<div class="code">          **
</div>
<div class="code">          ** It also makes a lexical count for the following tokens, &nbsp; each of which
</div>
<div class="code">          ** is expected to increase McCabe's cyclomatic complexity ( &nbsp;Vg&nbsp;) for the
</div>
<div class="code">          ** section of code by one unit:
</div>
<div class="code">          **  IF FOR WHILE SWITCH BREAK RETURN ? &amp;&amp; ||
</div>
<div class="code">          **
</div>
<div class="code">          ** Note that &amp;&amp; and || create additional paths through the code due to C/C++
</div>
<div class="code">          ** short circuit evaluation of logical expressions.
</div>
<div class="code">          **
</div>
<div class="code">          ** Also note the way SWITCH constructs are counted: the desired increment
</div>
<div class="code">          ** in Vg is equal to the number of cases provided for, &nbsp; including the
</div>
<div class="code">          ** default case, &nbsp; whether or not an action is defined for it.  This is acheived
</div>
<div class="code">          ** by counting the SWITCH at the head of the construct as a surrogate for
</div>
<div class="code">          ** the default case, &nbsp; and counting BREAKs as surrogates for the individual
</div>
<div class="code">          ** cases.  This approach yields the correct results provided that the
</div>
<div class="code">          ** coding style in use ensures the use of BREAK after all non-default
</div>
<div class="code">          ** cases, &nbsp; and forbids 'drop through' from one case to another other than
</div>
<div class="code">          ** in the case where two or more values of the switch variable require
</div>
<div class="code">          ** identical actions, &nbsp; and no executable code is defined between the
</div>
<div class="code">          ** case gates ( &nbsp;as in the switch statement in ANTLRToken::CountToken( &nbsp;&nbsp;) below&nbsp;).
</div>
<div class="code">          */
</div>
<div class="code">          
</div>
<div class="code">          /* default constructor */
</div>
<div class="code"><a name="./cccc/cccc_tok.cc:00000069"></a>      69  ANTLRToken::ANTLRToken( &nbsp;&nbsp;) : ANTLRCommonToken( &nbsp;&nbsp;) {
</div>
<div class="code">            toks_alloc1++;
</div>
<div class="code">            CurrentNesting=-99;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">          ** constructor used by makeToken below
</div>
<div class="code">          */
</div>
<div class="code"><a name="./cccc/cccc_tok.cc:00000077"></a>      77  ANTLRToken::ANTLRToken( &nbsp;ANTLRTokenType t, &nbsp; ANTLRChar *s&nbsp;) :
</div>
<div class="code">            ANTLRCommonToken( &nbsp;t, &nbsp;s&nbsp;) {
</div>
<div class="code">            setType( &nbsp;t&nbsp;);
</div>
<div class="code">            setText( &nbsp;s&nbsp;);
</div>
<div class="code">            CountToken( &nbsp;&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            toks_alloc2++;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          /* copy constructor */
</div>
<div class="code"><a name="./cccc/cccc_tok.cc:00000087"></a>      87  ANTLRToken::ANTLRToken( &nbsp;ANTLRToken&amp; copyTok&nbsp;) {
</div>
<div class="code">            setType( &nbsp;copyTok.getType( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            setText( &nbsp;copyTok.getText( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            setLine( &nbsp;copyTok.getLine( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            CurrentNesting=copyTok.CurrentNesting;
</div>
<div class="code">            toks_alloc3++;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">          ** the virtual pseudo-constructor
</div>
<div class="code">          ** This is required because the PCCTS support code does not know the
</div>
<div class="code">          ** exact nature of the token which will be created by the user's code, &nbsp;
</div>
<div class="code">          ** and indeed does not forbid the user creating more than one kind of
</div>
<div class="code">          ** token, &nbsp; so long as ANTLRToken is defined and all token classes are
</div>
<div class="code">          ** subclassed from ANTLRAbstractToken
</div>
<div class="code">          */
</div>
<div class="code"><a name="./cccc/cccc_tok.cc:00000103"></a>     103  ANTLRAbstractToken *ANTLRToken::makeToken( &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_tok.cc:00000104"></a>     104  					  ANTLRTokenType tt, &nbsp; ANTLRChar *txt, &nbsp; int line
</div>
<div class="code">          					  &nbsp;) {
</div>
<div class="code">          
</div>
<div class="code">            ANTLRToken *new_t = new ANTLRToken( &nbsp;tt, &nbsp;txt&nbsp;);
</div>
<div class="code">            if( &nbsp;new_t==0&nbsp;) {
</div>
<div class="code">              cerr &lt;&lt; "Memory overflow in "
</div>
<div class="code">                "ANTLRToken::makeToken( &nbsp;" &lt;&lt; static_cast&lt;int&gt;( &nbsp;tt&nbsp;) &lt;&lt; ", &nbsp;"
</div>
<div class="code">          	 &lt;&lt; txt &lt;&lt; ", &nbsp;" &lt;&lt; line &lt;&lt; "&nbsp;)" &lt;&lt; endl;
</div>
<div class="code">              exit( &nbsp;2&nbsp;);
</div>
<div class="code">            }
</div>
<div class="code">            new_t-&gt;setLine( &nbsp;line&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            DbgMsg( &nbsp;
</div>
<div class="code">          	 LEXER, &nbsp;cerr, &nbsp;
</div>
<div class="code">          	 "makeToken( &nbsp;tt=&gt;" &lt;&lt; static_cast&lt;int&gt;( &nbsp;tt&nbsp;) &lt;&lt;
</div>
<div class="code">          	 ", &nbsp; txt=&gt;" &lt;&lt; txt &lt;&lt;
</div>
<div class="code">          	 ", &nbsp;line=&gt;" &lt;&lt; line &lt;&lt;
</div>
<div class="code">          	 "&nbsp;)" &lt;&lt; endl
</div>
<div class="code">          	 &nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            return new_t;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          /* the destructor */
</div>
<div class="code"><a name="./cccc/cccc_tok.cc:00000128"></a>     128  ANTLRToken::~ANTLRToken( &nbsp;&nbsp;) {
</div>
<div class="code">            toks_freed++;
</div>
<div class="code">            DbgMsg( &nbsp;MEMORY, &nbsp;cerr, &nbsp;"freeing token " &lt;&lt; getText( &nbsp;&nbsp;)
</div>
<div class="code">          	 &lt;&lt; " on line " &lt;&lt; getLine( &nbsp;&nbsp;)
</div>
<div class="code">          	 &lt;&lt; " c1:" &lt;&lt; toks_alloc1 &lt;&lt; " c2:" &lt;&lt; toks_alloc2
</div>
<div class="code">          	 &lt;&lt; " c3:" &lt;&lt; toks_alloc3 &lt;&lt; " freed:" &lt;&lt; toks_freed &lt;&lt; endl&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          /* the assignment operator */
</div>
<div class="code"><a name="./cccc/cccc_tok.cc:00000137"></a>     137  ANTLRToken&amp; ANTLRToken::operator=( &nbsp;ANTLRToken&amp; copyTok&nbsp;) {
</div>
<div class="code">            setType( &nbsp;copyTok.getType( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            setText( &nbsp;copyTok.getText( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            setLine( &nbsp;copyTok.getLine( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            CurrentNesting=copyTok.CurrentNesting;
</div>
<div class="code">            return *this;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">          ** ANTLRToken::CountToken performs counting of features which are traced
</div>
<div class="code">          ** back to individual tokens created up by the lexer, &nbsp; i.e. the token count
</div>
<div class="code">          ** and McCabes VG.  Code lines and comment lines are both identified during
</div>
<div class="code">          ** the processing of text which the lexer will ( &nbsp;usually&nbsp;) skip, &nbsp; so the code
</div>
<div class="code">          ** to increment these counts is in the relevant lexer rules in the file
</div>
<div class="code">          ** cccc.g
</div>
<div class="code">          */
</div>
<div class="code"><a name="./cccc/cccc_tok.cc:00000153"></a>     153  void ANTLRToken::CountToken( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // we have seen a non-skippable pattern =&gt; this line counts toward LOC
</div>
<div class="code">            bCodeLine=1;
</div>
<div class="code">            CurrentNesting=RunningNesting;
</div>
<div class="code">            DbgMsg( &nbsp;COUNTER, &nbsp;cerr, &nbsp;*this&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_tok.cc:00000161"></a>     161  const char *ANTLRToken::getTokenTypeName( &nbsp;&nbsp;) { return ""; }
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">          ** structured output method for token objects
</div>
<div class="code">          */
</div>
<div class="code"><a name="./cccc/cccc_tok.cc:00000166"></a>     166  ostream&amp; operator &lt;&lt; ( &nbsp;ostream&amp; out, &nbsp; ANTLRToken&amp; t&nbsp;) {
</div>
<div class="code">            int i;
</div>
<div class="code">          
</div>
<div class="code">            out &lt;&lt; "TOK: " &lt;&lt; t.getTokenTypeName( &nbsp;&nbsp;)
</div>
<div class="code">                &lt;&lt; " " &lt;&lt; t.getText( &nbsp;&nbsp;)
</div>
<div class="code">                &lt;&lt; " " &lt;&lt; t.getLine( &nbsp;&nbsp;)
</div>
<div class="code">                &lt;&lt; " " &lt;&lt; t.getNestingLevel( &nbsp;&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            out &lt;&lt; endl;
</div>
<div class="code">            return out;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./cccc/cccc_tpl.cc"></a><h1>./cccc/cccc_tpl.cc</h1>
<div class="code"><a name="./cccc/cccc_tpl.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          // cccc_tpl.cc
</div>
<div class="code">          
</div>
<div class="code">          // all explicit template instantiations for the project are collected here
</div>
<div class="code">          
</div>
<div class="code">          // the assumption is that this file will be stable, &nbsp; so the expensive
</div>
<div class="code">          // recompilation of the templates will be infrequent
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include "cccc_tbl.h"
</div>
<div class="code">          #include "cccc_db.h"
</div>
<div class="code">          #include "cccc_htm.h"
</div>
<div class="code">          #include "cccc_met.h"
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_tbl.cc"
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_tpl.cc:00000034"></a>      34  template class std::map&lt;string, &nbsp;Source_Anchor&gt;;
</div>
<div class="code"><a name="./cccc/cccc_tpl.cc:00000035"></a>      35  template class CCCC_Table&lt;CCCC_Extent&gt;;
</div>
<div class="code"><a name="./cccc/cccc_tpl.cc:00000036"></a>      36  template class CCCC_Table&lt;CCCC_Module&gt;;
</div>
<div class="code"><a name="./cccc/cccc_tpl.cc:00000037"></a>      37  template class CCCC_Table&lt;CCCC_UseRelationship&gt;;
</div>
<div class="code"><a name="./cccc/cccc_tpl.cc:00000038"></a>      38  template class CCCC_Table&lt;CCCC_Member&gt;;
</div>
<a name="./cccc/cccc_use.cc"></a><h1>./cccc/cccc_use.cc</h1>
<div class="code"><a name="./cccc/cccc_use.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          // cccc_use.cc
</div>
<div class="code">          
</div>
<div class="code">          // implementation of CCCC_UseRelationship class
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc.h"
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include "cccc_use.h"
</div>
<div class="code">          #include "cccc_db.h"
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_use.cc:00000030"></a>      30  CCCC_UseRelationship::CCCC_UseRelationship( &nbsp;CCCC_Item&amp; is&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            is.Extract( &nbsp;client&nbsp;);
</div>
<div class="code">            is.Extract( &nbsp;member&nbsp;);
</div>
<div class="code">            is.Extract( &nbsp;supplier&nbsp;);
</div>
<div class="code">            visible=abDONTKNOW;
</div>
<div class="code">            concrete=abDONTKNOW;
</div>
<div class="code">            ut=utDONTKNOW;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_use.cc:00000040"></a>      40  string CCCC_UseRelationship::name( &nbsp;int name_level&nbsp;) const
</div>
<div class="code">          {
</div>
<div class="code">            string namestr;
</div>
<div class="code">          
</div>
<div class="code">            switch( &nbsp;name_level&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">              case nlRANK:
</div>
<div class="code">              case nlSIMPLE:
</div>
<div class="code">                namestr.append( &nbsp;client&nbsp;);
</div>
<div class="code">                namestr.append( &nbsp;" uses "&nbsp;);
</div>
<div class="code">                namestr.append( &nbsp;supplier&nbsp;);
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case nlSUPPLIER:
</div>
<div class="code">                namestr=supplier;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case nlCLIENT:
</div>
<div class="code">                namestr=client;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              default:
</div>
<div class="code">                cerr &lt;&lt; "unexpected name level" &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return namestr.c_str( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_use.cc:00000068"></a>      68  void CCCC_UseRelationship::add_extent( &nbsp;CCCC_Item&amp; is&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // processing is similar to the CCCC_Record method, &nbsp; except that we update
</div>
<div class="code">            // the visibility and concreteness data members
</div>
<div class="code">            // but do not do merge_flags
</div>
<div class="code">            CCCC_Extent *new_extent=new CCCC_Extent( &nbsp;is&nbsp;);
</div>
<div class="code">            CCCC_Extent *inserted_extent=extent_table.find_or_insert( &nbsp;new_extent&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            switch( &nbsp;new_extent-&gt;get_visibility( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">              case vPUBLIC:
</div>
<div class="code">              case vPROTECTED:
</div>
<div class="code">                visible=abTRUE;
</div>
<div class="code">                break;
</div>
<div class="code">              case vPRIVATE:
</div>
<div class="code">              case vIMPLEMENTATION:
</div>
<div class="code">                visible=abFALSE;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              default:
</div>
<div class="code">                // nothing required
</div>
<div class="code">                ;;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            // a single relationship record represents all connections between two
</div>
<div class="code">            // modules, &nbsp; hence it may have multiple extents which are of different use
</div>
<div class="code">            // types
</div>
<div class="code">            // the use type attached to the relationship record is used only to identify
</div>
<div class="code">            // inheritance relationships
</div>
<div class="code">            UseType new_ut=new_extent-&gt;get_usetype( &nbsp;&nbsp;);
</div>
<div class="code">            if( &nbsp;new_ut==utINHERITS&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                ut=utINHERITS;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            switch( &nbsp;new_ut&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">              case utINHERITS:
</div>
<div class="code">              case utHASBYVAL:
</div>
<div class="code">              case utPARBYVAL:
</div>
<div class="code">              case utVARBYVAL:
</div>
<div class="code">                concrete=abTRUE;
</div>
<div class="code">                break;
</div>
<div class="code">              default:
</div>
<div class="code">                // no change required
</div>
<div class="code">                ;;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;new_extent != inserted_extent&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                delete new_extent;
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_use.cc:00000122"></a>     122  int CCCC_UseRelationship::get_count( &nbsp;const char* count_tag&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval=0;
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp; ( &nbsp;strncmp( &nbsp;count_tag, &nbsp; COUNT_TAG_FAN_IN, &nbsp; 2&nbsp;)==0&nbsp;) || ( &nbsp;strncmp( &nbsp;count_tag, &nbsp; COUNT_TAG_FAN_OUT, &nbsp; 2&nbsp;)==0&nbsp;) &nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                char suffix=count_tag[2];
</div>
<div class="code">                switch( &nbsp;suffix&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	case 0:
</div>
<div class="code">          	  retval=1;
</div>
<div class="code">          	  break;
</div>
<div class="code">          
</div>
<div class="code">          	case 'v':
</div>
<div class="code">          	  if( &nbsp;visible!=abFALSE&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      retval=1;
</div>
<div class="code">          	    }
</div>
<div class="code">          	  break;
</div>
<div class="code">          
</div>
<div class="code">          	case 'c':
</div>
<div class="code">          	  if( &nbsp;concrete!=abFALSE&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      retval=1;
</div>
<div class="code">          	    }
</div>
<div class="code">          	  break;
</div>
<div class="code">          
</div>
<div class="code">          	default:
</div>
<div class="code">          	  cerr &lt;&lt; "Unexpected count tag suffix" &lt;&lt; count_tag &lt;&lt; endl;
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                cerr &lt;&lt; "Unexpected count tag " &lt;&lt; count_tag &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_use.cc:00000164"></a>     164  CCCC_Module* CCCC_UseRelationship::supplier_module_ptr( &nbsp;CCCC_Project *prj&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            return prj-&gt;module_table.find( &nbsp;supplier.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_use.cc:00000169"></a>     169  CCCC_Module* CCCC_UseRelationship::client_module_ptr( &nbsp;CCCC_Project *prj&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            return prj-&gt;module_table.find( &nbsp;client.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_use.cc:00000175"></a>     175  int CCCC_UseRelationship::ToFile( &nbsp;ofstream&amp; ofstr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval=FALSE;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Item line;
</div>
<div class="code">            line.Insert( &nbsp;USEREL_PREFIX&nbsp;);
</div>
<div class="code">            line.Insert( &nbsp;supplier&nbsp;);
</div>
<div class="code">            line.Insert( &nbsp;client&nbsp;);
</div>
<div class="code">            line.ToFile( &nbsp;ofstr&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Extent *extent_ptr=extent_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;extent_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Item extent_line;
</div>
<div class="code">                extent_line.Insert( &nbsp;USEEXT_PREFIX&nbsp;);
</div>
<div class="code">                extent_line.Insert( &nbsp;supplier&nbsp;);
</div>
<div class="code">                extent_line.Insert( &nbsp;client&nbsp;);
</div>
<div class="code">                extent_ptr-&gt;AddToItem( &nbsp;extent_line&nbsp;);
</div>
<div class="code">                extent_line.ToFile( &nbsp;ofstr&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">                extent_ptr=extent_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;ofstr.good( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                retval=TRUE;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_use.cc:00000206"></a>     206  int CCCC_UseRelationship::FromFile( &nbsp;ifstream&amp; ifstr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval;
</div>
<div class="code">            CCCC_Item next_line;
</div>
<div class="code">            next_line.FromFile( &nbsp;ifstr&nbsp;);
</div>
<div class="code">            ifstr_line++;
</div>
<div class="code">          
</div>
<div class="code">            string line_keyword_dummy;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_UseRelationship *found_uptr=NULL;
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;
</div>
<div class="code">               next_line.Extract( &nbsp;line_keyword_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">               next_line.Extract( &nbsp;this-&gt;supplier&nbsp;) &amp;&amp;
</div>
<div class="code">               next_line.Extract( &nbsp;this-&gt;client&nbsp;)
</div>
<div class="code">               &nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                found_uptr=
</div>
<div class="code">          	current_loading_project-&gt;userel_table.find_or_insert( &nbsp;this&nbsp;);
</div>
<div class="code">                if( &nbsp;found_uptr==this&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  // the newly created instance of the module is the first
</div>
<div class="code">          	  // and has taken its place in the database, &nbsp; so we protect
</div>
<div class="code">          	  // it from deletion
</div>
<div class="code">          	  retval=RECORD_ADDED;
</div>
<div class="code">          	}
</div>
<div class="code">                else
</div>
<div class="code">          	{
</div>
<div class="code">          	  retval=RECORD_TRANSCRIBED;
</div>
<div class="code">          	}
</div>
<div class="code">          
</div>
<div class="code">                // process extent records
</div>
<div class="code">                while( &nbsp;PeekAtNextLinePrefix( &nbsp;ifstr, &nbsp;USEEXT_PREFIX&nbsp;)&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  CCCC_Extent *new_extent=new CCCC_Extent;
</div>
<div class="code">          	  next_line.FromFile( &nbsp;ifstr&nbsp;);
</div>
<div class="code">          	  ifstr_line++;
</div>
<div class="code">          	  string supplier_dummy, &nbsp; client_dummy;
</div>
<div class="code">          
</div>
<div class="code">          	  if( &nbsp;
</div>
<div class="code">          	     next_line.Extract( &nbsp;line_keyword_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">          	     next_line.Extract( &nbsp;supplier_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">          	     next_line.Extract( &nbsp;client_dummy&nbsp;) &amp;&amp;
</div>
<div class="code">          	     new_extent-&gt;GetFromItem( &nbsp;next_line&nbsp;)
</div>
<div class="code">          	     &nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      // We don't ever expect to find duplicated extent records
</div>
<div class="code">          	      // but just in case...
</div>
<div class="code">          	      CCCC_Extent *found_eptr=
</div>
<div class="code">          		found_uptr-&gt;extent_table.find_or_insert( &nbsp;new_extent&nbsp;);
</div>
<div class="code">          	      if( &nbsp;found_eptr!=new_extent&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		  cerr &lt;&lt; "Failed to add extent for relationship "
</div>
<div class="code">          		       &lt;&lt; found_uptr-&gt;key( &nbsp;&nbsp;) &lt;&lt; " at line " &lt;&lt; ifstr_line
</div>
<div class="code">          		       &lt;&lt; endl;
</div>
<div class="code">          		  delete new_extent;
</div>
<div class="code">          		}
</div>
<div class="code">          	    }
</div>
<div class="code">          	}
</div>
<div class="code">          
</div>
<div class="code">              }
</div>
<div class="code">            else // extraction of module intial line failed
</div>
<div class="code">              {
</div>
<div class="code">                // unexpected problem with the input
</div>
<div class="code">                retval=RECORD_ERROR;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            // If the import was successful, &nbsp; we will also have imported all dependent
</div>
<div class="code">            // extent records following the main record.
</div>
<div class="code">            // If not, &nbsp; we must skip them.
</div>
<div class="code">            while( &nbsp;PeekAtNextLinePrefix( &nbsp;ifstr, &nbsp;USEEXT_PREFIX&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Item next_line;
</div>
<div class="code">                next_line.FromFile( &nbsp;ifstr&nbsp;);
</div>
<div class="code">                ifstr_line++;
</div>
<div class="code">                cerr &lt;&lt; "Ignoring userel extent on line " &lt;&lt; ifstr_line &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./cccc/cccc_utl.cc"></a><h1>./cccc/cccc_utl.cc</h1>
<div class="code"><a name="./cccc/cccc_utl.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          // cccc_utl.cc
</div>
<div class="code">          
</div>
<div class="code">          // implementation of enumerations and utility classes for CCCC
</div>
<div class="code">          // includes the Parse_Utility class which is a helper to centralise
</div>
<div class="code">          // error recovery and recording facilities across the three parsers
</div>
<div class="code">          #include "cccc.h"
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include "cccc_utl.h"
</div>
<div class="code">          #include "cccc_db.h"
</div>
<div class="code">          #include "cccc_tok.h"
</div>
<div class="code">          #include "AParser.h"
</div>
<div class="code">          #include "ATokPtr.h"
</div>
<div class="code">          
</div>
<div class="code">          #define DEBUG_EXTENT_STREAMS 1
</div>
<div class="code">          
</div>
<div class="code">          #include &lt;cassert&gt;
</div>
<div class="code">          #include &lt;iomanip&gt;
</div>
<div class="code">          using std::ios;
</div>
<div class="code">          //using std::trunc;
</div>
<div class="code">          using std::ends;
</div>
<div class="code">          using std::setw;
</div>
<div class="code">          using std::setiosflags;
</div>
<div class="code">          using std::resetiosflags;
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          #define FS "@"
</div>
<div class="code">          #define RS "\n"
</div>
<div class="code">          
</div>
<div class="code">          string ParseUtility::stack_rules[MAX_STACK_DEPTH];
</div>
<div class="code">          int         ParseUtility::stack_tokenline[MAX_STACK_DEPTH];
</div>
<div class="code">          string ParseUtility::stack_tokentext[MAX_STACK_DEPTH];
</div>
<div class="code">          int         ParseUtility::stack_depth;
</div>
<div class="code">          
</div>
<div class="code">          ParseUtility* ParseUtility::theCurrentInstance=NULL;
</div>
<div class="code">          ParseStore* ParseStore::theCurrentInstance=NULL;
</div>
<div class="code">          
</div>
<div class="code">          // insertion and extraction functions intended to support enumerations
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000057"></a>      57  void insert_enum( &nbsp;ostream&amp; os, &nbsp; int e&nbsp;) 
</div>
<div class="code">          { 
</div>
<div class="code">            os &lt;&lt; ( &nbsp;char&nbsp;) e;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000062"></a>      62  void extract_enum( &nbsp;istream&amp; is, &nbsp; int&amp; e&nbsp;) 
</div>
<div class="code">          {
</div>
<div class="code">            e=0;
</div>
<div class="code">            is &gt;&gt; ( &nbsp;char&amp;&nbsp;) e;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000069"></a>      69  ostream&amp; operator&lt;&lt;( &nbsp;ostream&amp; os, &nbsp; AugmentedBool ab&nbsp;) {
</div>
<div class="code">            insert_enum( &nbsp;os, &nbsp;ab&nbsp;);
</div>
<div class="code">            return os;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000074"></a>      74  istream&amp; operator&gt;&gt;( &nbsp;istream&amp; is, &nbsp; AugmentedBool&amp; ab&nbsp;) {
</div>
<div class="code">            extract_enum( &nbsp;is, &nbsp;( &nbsp;int&amp;&nbsp;)ab&nbsp;);
</div>
<div class="code">            return is;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000079"></a>      79  ostream&amp; operator&lt;&lt;( &nbsp;ostream&amp; os, &nbsp; Visibility v&nbsp;) {
</div>
<div class="code">            insert_enum( &nbsp;os, &nbsp;v&nbsp;);
</div>
<div class="code">            return os;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000084"></a>      84  istream&amp; operator&gt;&gt;( &nbsp;istream&amp; is, &nbsp; Visibility&amp; v&nbsp;) {
</div>
<div class="code">            extract_enum( &nbsp;is, &nbsp;( &nbsp;int&amp;&nbsp;)v&nbsp;);
</div>
<div class="code">            return is;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000089"></a>      89  ostream&amp; operator&lt;&lt;( &nbsp;ostream&amp; os, &nbsp; UseType ut&nbsp;) {
</div>
<div class="code">            insert_enum( &nbsp;os, &nbsp;ut&nbsp;);
</div>
<div class="code">            return os;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000094"></a>      94  istream&amp; operator&gt;&gt;( &nbsp;istream&amp; is, &nbsp; UseType&amp; ut&nbsp;) {
</div>
<div class="code">            extract_enum( &nbsp;is, &nbsp;( &nbsp;int&amp;&nbsp;)ut&nbsp;);
</div>
<div class="code">            return is;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000099"></a>      99  string ParseUtility::lookahead_text( &nbsp;int n&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            static string retval;
</div>
<div class="code">            retval="";
</div>
<div class="code">            int i;
</div>
<div class="code">            for( &nbsp;i=1; i&lt;=n; i++&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                if( &nbsp;parser-&gt;LT( &nbsp;i&nbsp;) != NULL&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  retval=retval+parser-&gt;LT( &nbsp;i&nbsp;)-&gt;getText( &nbsp;&nbsp;);
</div>
<div class="code">          	  retval=retval+" ";
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000115"></a>     115  void ParseUtility::resynchronize( &nbsp;int initial_nesting, &nbsp; 
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000116"></a>     116  				 SetWordType *resync_token_class, &nbsp; 
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000117"></a>     117  				 ANTLRTokenPtr&amp; resync_token&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // the interface for resynchronisation is as follows:
</div>
<div class="code">            // the caller supplies a nesting level at which the resynchronisation must 
</div>
<div class="code">            // occur, &nbsp; and a token class containing all of the tokens which can 
</div>
<div class="code">            // be accepted to delimit the resynchronisation
</div>
<div class="code">            // this function will scan until it finds that it is at the correct level and
</div>
<div class="code">            // the next token of lookahead is in the resynchronisation set
</div>
<div class="code">            // it will then accept as many tokens from the resynchronisation set as
</div>
<div class="code">            // are available, &nbsp; consolidating the text of the tokens accepted
</div>
<div class="code">            // as the text associated with the last token
</div>
<div class="code">            string resync_text="...";
</div>
<div class="code">          
</div>
<div class="code">            string string1=parser-&gt;LT( &nbsp;1&nbsp;)-&gt;getText( &nbsp;&nbsp;);
</div>
<div class="code">            int line1=parser-&gt;LT( &nbsp;1&nbsp;)-&gt;getLine( &nbsp;&nbsp;);
</div>
<div class="code">            string string2;
</div>
<div class="code">            int line2=0;
</div>
<div class="code">          
</div>
<div class="code">            int resynchronising=1;
</div>
<div class="code">            while( &nbsp;resynchronising&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                parser-&gt;consumeUntil( &nbsp;resync_token_class&nbsp;);
</div>
<div class="code">                if( &nbsp; 
</div>
<div class="code">          	 ( &nbsp;MY_TOK( &nbsp;parser-&gt;LT( &nbsp;1&nbsp;)&nbsp;)-&gt;getNestingLevel( &nbsp;&nbsp;) &gt; initial_nesting&nbsp;) &amp;&amp;
</div>
<div class="code">          	 ( &nbsp;parser-&gt;LT( &nbsp;2&nbsp;) != NULL&nbsp;)
</div>
<div class="code">          	 &nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  parser-&gt;consume( &nbsp;&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">                else
</div>
<div class="code">          	{
</div>
<div class="code">          	  // we are ready to resynchronise
</div>
<div class="code">          	  resynchronising=0;
</div>
<div class="code">          	  string2=parser-&gt;LT( &nbsp;1&nbsp;)-&gt;getText( &nbsp;&nbsp;);
</div>
<div class="code">          	  line2=parser-&gt;LT( &nbsp;1&nbsp;)-&gt;getLine( &nbsp;&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            // we now consume a succession of tokens from the resynchronisation token
</div>
<div class="code">            // class until we come across a token which is not in the set, &nbsp; or the
</div>
<div class="code">            // nesting level changes
</div>
<div class="code">            resync_token=parser-&gt;LT( &nbsp;1&nbsp;);
</div>
<div class="code">            while( &nbsp;
</div>
<div class="code">          	parser-&gt;set_el( &nbsp;parser-&gt;LT( &nbsp;1&nbsp;)-&gt;getType( &nbsp;&nbsp;), &nbsp;resync_token_class&nbsp;) &amp;&amp;
</div>
<div class="code">          	( &nbsp; MY_TOK( &nbsp;parser-&gt;LT( &nbsp;1&nbsp;)&nbsp;)-&gt;getNestingLevel( &nbsp;&nbsp;) == initial_nesting&nbsp;) 
</div>
<div class="code">          	&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                string2=parser-&gt;LT( &nbsp;1&nbsp;)-&gt;getText( &nbsp;&nbsp;);
</div>
<div class="code">                line2=parser-&gt;LT( &nbsp;1&nbsp;)-&gt;getLine( &nbsp;&nbsp;);
</div>
<div class="code">           
</div>
<div class="code">                resync_text+=parser-&gt;LT( &nbsp;1&nbsp;)-&gt;getText( &nbsp;&nbsp;);
</div>
<div class="code">                resync_text+=" ";
</div>
<div class="code">                resync_token=parser-&gt;LT( &nbsp;1&nbsp;);
</div>
<div class="code">                resync_token-&gt;setText( &nbsp;resync_text.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">                parser-&gt;consume( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            cerr &lt;&lt; "Unrecognized section from " 
</div>
<div class="code">                 &lt;&lt; string1.c_str( &nbsp;&nbsp;) &lt;&lt; " on line " &lt;&lt; line1 &lt;&lt; " to " 
</div>
<div class="code">                 &lt;&lt; string2.c_str( &nbsp;&nbsp;) &lt;&lt; " on line " &lt;&lt; line2 &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; "=====ignored section begins=====" &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; resync_text.c_str( &nbsp;&nbsp;) &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; "===== ignored section ends =====" &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000183"></a>     183  ParseUtility::ParseUtility( &nbsp;ANTLRParser *parser&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // This is designed as a serial-singleton class ( &nbsp;e.g. many 
</div>
<div class="code">            // instances may exist over time but no more than one at a
</div>
<div class="code">            // time&nbsp;).
</div>
<div class="code">            // For the lifetime of an instance, &nbsp; the static member theCurrentInstance
</div>
<div class="code">            // points to it. When no instance exists, &nbsp; this pointer is null.
</div>
<div class="code">            assert( &nbsp;theCurrentInstance==NULL&nbsp;);
</div>
<div class="code">            theCurrentInstance=this;
</div>
<div class="code">          
</div>
<div class="code">            trace_depth=0;
</div>
<div class="code">            stack_depth=0;
</div>
<div class="code">            this-&gt;parser=( &nbsp;ANTLR_Assisted_Parser*&nbsp;)parser;
</div>
<div class="code">          
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000199"></a>     199  ParseUtility::~ParseUtility( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            theCurrentInstance=NULL;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          // This utility function is used to create
</div>
<div class="code">          // a composite scope name from a qualifier scope
</div>
<div class="code">          // and a relative name.
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000207"></a>     207  string ParseUtility::scopeCombine( &nbsp;const string&amp; baseScope, &nbsp; const string&amp; name&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          	// I am presently ( &nbsp;as at 3.pre44&nbsp;) experimenting with
</div>
<div class="code">          	// how I handle scopes.  The present code has a policy
</div>
<div class="code">          	// of discarding scope information altogether and defining
</div>
<div class="code">          	// modules based solely on the final component of the 
</div>
<div class="code">          	// fully qualified name.
</div>
<div class="code">          	// This variable may become a parameter to control policy in this
</div>
<div class="code">          	// area.
</div>
<div class="code">          	bool bIgnoreScope=true;
</div>
<div class="code">          	string retval;
</div>
<div class="code">          	if( &nbsp;bIgnoreScope&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          		retval=name;
</div>
<div class="code">          	}
</div>
<div class="code">          	else if( &nbsp;baseScope.size( &nbsp;&nbsp;)&gt;0 &amp;&amp; name.size( &nbsp;&nbsp;)&gt;0&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          		retval=baseScope+"::"+name;
</div>
<div class="code">          	}
</div>
<div class="code">          	else
</div>
<div class="code">          	{
</div>
<div class="code">          		retval=baseScope+name;
</div>
<div class="code">          	}
</div>
<div class="code">          	
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000234"></a>     234  ParseStore::ParseStore( &nbsp;const string&amp; filename&nbsp;)
</div>
<div class="code">          : theFilename( &nbsp;filename&nbsp;)
</div>
<div class="code">          , &nbsp; pendingLexicalCounts( &nbsp;static_cast&lt;int&gt;( &nbsp;tcLAST&nbsp;), &nbsp;0&nbsp;)
</div>
<div class="code">          , &nbsp; flag( &nbsp;static_cast&lt;int&gt;( &nbsp;psfLAST&nbsp;)+1, &nbsp;'?'&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // This is designed as a serial-singleton class ( &nbsp;e.g. many 
</div>
<div class="code">            // instances may exist over time but no more than one at a
</div>
<div class="code">            // time&nbsp;).
</div>
<div class="code">            // For the lifetime of an instance, &nbsp; the static member theCurrentInstance
</div>
<div class="code">            // points to it. When no instance exists, &nbsp; this pointer is null.
</div>
<div class="code">            assert( &nbsp;theCurrentInstance==NULL&nbsp;);
</div>
<div class="code">            theCurrentInstance=this;
</div>
<div class="code">            flag[psfLAST]='\0';
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000249"></a>     249  ParseStore::~ParseStore( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // If the current object came from the default constructor
</div>
<div class="code">            // it is the primary singleton instance and we wish to 
</div>
<div class="code">            // set the static pointer to itself back to null.  Otherwise, &nbsp;
</div>
<div class="code">            // it was a cached copy, &nbsp; and we don't really care.
</div>
<div class="code">            if( &nbsp;theCurrentInstance==this&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                theCurrentInstance=NULL;
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000261"></a>     261  int ParseStore::get_flag( &nbsp;PSFlag psf&nbsp;) const {
</div>
<div class="code">            return int( &nbsp;flag[psf]&nbsp;); 
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000265"></a>     265  void ParseStore::set_flag( &nbsp;PSFlag psf, &nbsp; int value&nbsp;) { 
</div>
<div class="code">            flag[psf]=value;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000269"></a>     269  void ParseStore::set_flag( &nbsp;Visibility value&nbsp;) { 
</div>
<div class="code">            MAKE_STRSTREAM( &nbsp;ofstr&nbsp;);
</div>
<div class="code">            ofstr &lt;&lt; value;
</div>
<div class="code">            flag[psfVISIBILITY]=( &nbsp;ofstr.str( &nbsp;&nbsp;)&nbsp;)[0];
</div>
<div class="code">            RELEASE_STRSTREAM( &nbsp;ofstr&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000276"></a>     276  Visibility ParseStore::get_visibility( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            return static_cast&lt;Visibility&gt;( &nbsp;flag[psfVISIBILITY]&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">            
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000281"></a>     281  string ParseStore::filename( &nbsp;&nbsp;) 
</div>
<div class="code">          { 
</div>
<div class="code">            return theFilename; 
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          void 
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000287"></a>     287  ParseStore::
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000288"></a>     288  insert_extent( &nbsp;CCCC_Item&amp; os, &nbsp; int startLine, &nbsp; int endLine, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000289"></a>     289  	      const string&amp; description, &nbsp; const string&amp; flags, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000290"></a>     290  	      UseType ut, &nbsp; bool allocate_lexcounts&nbsp;) 
</div>
<div class="code">          {
</div>
<div class="code">            os.Insert( &nbsp;theFilename&nbsp;);
</div>
<div class="code">            os.Insert( &nbsp;startLine&nbsp;);
</div>
<div class="code">            os.Insert( &nbsp;description&nbsp;);
</div>
<div class="code">            os.Insert( &nbsp;flags&nbsp;);
</div>
<div class="code">            int i;
</div>
<div class="code">            int lexical_counts_for_this_extent[tcLAST];
</div>
<div class="code">            for( &nbsp;i=0; i&lt;tcLAST; i++&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                lexical_counts_for_this_extent[i]=0;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;allocate_lexcounts==true&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                LineLexicalCountMatrix::iterator extentStartIter =
</div>
<div class="code">          	lineLexicalCounts.lower_bound( &nbsp;startLine&nbsp;); 
</div>
<div class="code">                LineLexicalCountMatrix::iterator extentEndIter =
</div>
<div class="code">          	lineLexicalCounts.upper_bound( &nbsp;endLine-1&nbsp;); 
</div>
<div class="code">                LineLexicalCountMatrix::iterator llcmIter;
</div>
<div class="code">                for( &nbsp;llcmIter=extentStartIter;
</div>
<div class="code">          	  llcmIter!=extentEndIter; 
</div>
<div class="code">          	  ++llcmIter&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  // This record relates to a line within the current
</div>
<div class="code">          	  // extent.
</div>
<div class="code">          	  for( &nbsp;i=0; i&lt;tcLAST; i++&nbsp;)
</div>
<div class="code">          	    {	
</div>
<div class="code">          	      lexical_counts_for_this_extent[i]+=( &nbsp;*llcmIter&nbsp;).second[i];
</div>
<div class="code">          	    }
</div>
<div class="code">          	}
</div>
<div class="code">                // The lexical occurrences mentioned in the records processed 
</div>
<div class="code">                // above are now been accounted for in the database, &nbsp; so we
</div>
<div class="code">                // purge these records.  This has the effect of allowing
</div>
<div class="code">                // accurate accounting on nested extents ( &nbsp;i.e. the outer
</div>
<div class="code">                // extent will only be reported as containing lines which 
</div>
<div class="code">                // are not already listed in the inner extent&nbsp;).
</div>
<div class="code">                lineLexicalCounts.erase( &nbsp;extentStartIter, &nbsp;extentEndIter&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">                ostringstream lexcount_str;
</div>
<div class="code">          
</div>
<div class="code">                lexcount_str &lt;&lt; "LOC:" &lt;&lt; lexical_counts_for_this_extent[tcCODELINES]
</div>
<div class="code">          		   &lt;&lt; " COM:" &lt;&lt; lexical_counts_for_this_extent[tcCOMLINES]
</div>
<div class="code">          		   &lt;&lt; " MVG:" &lt;&lt; lexical_counts_for_this_extent[tcMCCABES_VG]
</div>
<div class="code">          		   &lt;&lt; ends;
</div>
<div class="code">          
</div>
<div class="code">                os.Insert( &nbsp;lexcount_str.str( &nbsp;&nbsp;).c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                os.Insert( &nbsp;"*"&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            os.Insert( &nbsp;( &nbsp;char&nbsp;)flag[psfVISIBILITY]&nbsp;);
</div>
<div class="code">            os.Insert( &nbsp;( &nbsp;char&nbsp;)ut&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">            
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000349"></a>     349  void ParseStore::record_module_extent( &nbsp;int startLine, &nbsp; int endLine, &nbsp; 
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000350"></a>     350  				      const string&amp; moduleName, &nbsp; 
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000351"></a>     351  				      const string&amp; moduleType, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000352"></a>     352  				      const string&amp; description, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000353"></a>     353  				      UseType ut&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // See the lengthy comment in record_userel_extent about
</div>
<div class="code">            // why we are filtering for empty module names.
</div>
<div class="code">            if( &nbsp;moduleName.size( &nbsp;&nbsp;)&gt;0&nbsp;)
</div>
<div class="code">            {
</div>
<div class="code">              CCCC_Item module_line;
</div>
<div class="code">              module_line.Insert( &nbsp;moduleName&nbsp;);
</div>
<div class="code">              module_line.Insert( &nbsp;moduleType&nbsp;);
</div>
<div class="code">              insert_extent( &nbsp;module_line, &nbsp;startLine, &nbsp;endLine, &nbsp;
</div>
<div class="code">          	 description, &nbsp;flags( &nbsp;&nbsp;), &nbsp;ut, &nbsp;true&nbsp;);
</div>
<div class="code">              prj-&gt;add_module( &nbsp;module_line&nbsp;);
</div>
<div class="code">            }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000368"></a>     368  void ParseStore::record_function_extent( &nbsp;int startLine, &nbsp; int endLine, &nbsp; 
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000369"></a>     369  					const string&amp; returnType, &nbsp; 
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000370"></a>     370  					const string&amp; moduleName, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000371"></a>     371  					const string&amp; memberName, &nbsp; 
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000372"></a>     372  					const string&amp; paramList, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000373"></a>     373  					const string&amp; description, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000374"></a>     374  					Visibility visibility, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000375"></a>     375  					UseType ut&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // We require every call to this function to specify a member
</div>
<div class="code">            // function name and a parameter list.
</div>
<div class="code">            if( &nbsp;memberName.size( &nbsp;&nbsp;)&gt;0&nbsp;)
</div>
<div class="code">            {
</div>
<div class="code">              // If the moduleName is an empty string, &nbsp; we remap this to the
</div>
<div class="code">          	// string "anonymous".  This implies that we treat all
</div>
<div class="code">          	// C-style functions as belonging to a single module.
</div>
<div class="code">          	string mappedModuleName = moduleName;
</div>
<div class="code">              if( &nbsp;mappedModuleName.size( &nbsp;&nbsp;)==0&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	   mappedModuleName = "anonymous";
</div>
<div class="code">          	}
</div>
<div class="code">          
</div>
<div class="code">              CCCC_Item function_line;
</div>
<div class="code">              function_line.Insert( &nbsp;mappedModuleName&nbsp;);
</div>
<div class="code">              function_line.Insert( &nbsp;memberName&nbsp;);
</div>
<div class="code">              function_line.Insert( &nbsp;returnType&nbsp;);
</div>
<div class="code">              function_line.Insert( &nbsp;paramList&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">              string baseFlags=flags( &nbsp;&nbsp;);
</div>
<div class="code">              baseFlags[psfVISIBILITY]=visibility;
</div>
<div class="code">          
</div>
<div class="code">              insert_extent( &nbsp;function_line, &nbsp;startLine, &nbsp;endLine, &nbsp;
</div>
<div class="code">               description, &nbsp;baseFlags, &nbsp;ut, &nbsp;true&nbsp;);
</div>
<div class="code">              prj-&gt;add_member( &nbsp;function_line&nbsp;);
</div>
<div class="code">            }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000405"></a>     405  void ParseStore::record_userel_extent( &nbsp;int startLine, &nbsp; int endLine, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000406"></a>     406  				      const string&amp; clientName, &nbsp; 
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000407"></a>     407  				      const string&amp; memberName, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000408"></a>     408  				      const string&amp; serverName, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000409"></a>     409  				      const string&amp; description, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000410"></a>     410  				      Visibility visibility, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000411"></a>     411  				      UseType ut&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            CCCC_Item userel_line;
</div>
<div class="code">            
</div>
<div class="code">            // This function should not be invoked unless the clientName
</div>
<div class="code">            // and serverName are non-empty strings, &nbsp; however it appears
</div>
<div class="code">            // that in test case prn16.java the parser does execute the 
</div>
<div class="code">            // actions of the 'implementsClause' rule, &nbsp; even though there
</div>
<div class="code">            // is no 'implements' keyword outside comments in the program
</div>
<div class="code">            // text.
</div>
<div class="code">            // I don't understand this, &nbsp; but as a workaround, &nbsp; I filter at 
</div>
<div class="code">            // this point and ensure that if either clientName or serverName
</div>
<div class="code">            // is empty, &nbsp; no action is taken.
</div>
<div class="code">            if( &nbsp;clientName.size( &nbsp;&nbsp;)&gt;0 &amp;&amp; serverName.size( &nbsp;&nbsp;)&gt;0&nbsp;)
</div>
<div class="code">            {
</div>
<div class="code">          	  userel_line.Insert( &nbsp;clientName&nbsp;);
</div>
<div class="code">          	  userel_line.Insert( &nbsp;memberName&nbsp;);
</div>
<div class="code">          	  userel_line.Insert( &nbsp;serverName&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  // for data member definitions, &nbsp; we record lexical data for the
</div>
<div class="code">          	  // extent, &nbsp;
</div>
<div class="code">          	  // for inheritance and parameter relationships we do not
</div>
<div class="code">          	  bool record_lexcounts=false;
</div>
<div class="code">          	  switch( &nbsp;ut&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		case utHASBYVAL:
</div>
<div class="code">          		case utHASBYREF:
</div>
<div class="code">          		  record_lexcounts=true;
</div>
<div class="code">          		  break;
</div>
<div class="code">          		default:
</div>
<div class="code">          		  record_lexcounts=false;
</div>
<div class="code">          		}
</div>
<div class="code">          
</div>
<div class="code">          	  string baseFlags=flags( &nbsp;&nbsp;);
</div>
<div class="code">          	  baseFlags[psfVISIBILITY]=visibility;
</div>
<div class="code">          	  insert_extent( &nbsp;userel_line, &nbsp;startLine, &nbsp;endLine, &nbsp;
</div>
<div class="code">          			description, &nbsp;baseFlags, &nbsp;ut, &nbsp;record_lexcounts&nbsp;);
</div>
<div class="code">          	  prj-&gt;add_userel( &nbsp;userel_line&nbsp;);
</div>
<div class="code">             }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000452"></a>     452  void ParseStore::record_other_extent( &nbsp;int startLine, &nbsp; int endLine, &nbsp; 
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000453"></a>     453  					  const string&amp; description&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            CCCC_Item rejext_line;
</div>
<div class="code">            insert_extent( &nbsp;rejext_line, &nbsp;startLine, &nbsp;endLine, &nbsp;description, &nbsp;flags( &nbsp;&nbsp;), &nbsp;utREJECTED, &nbsp;true&nbsp;);
</div>
<div class="code">            prj-&gt;add_rejected_extent( &nbsp;rejext_line&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000460"></a>     460  static void toktrace( &nbsp;ANTLRAbstractToken *tok&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // at the LHS we put out information about the current token
</div>
<div class="code">            if( &nbsp;tok != NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                DbgMsg( &nbsp;PARSER, &nbsp;cerr, &nbsp;
</div>
<div class="code">          	     std::setw( &nbsp;6&nbsp;) &lt;&lt; tok-&gt;getLine( &nbsp;&nbsp;) 
</div>
<div class="code">          	     &lt;&lt; std::setw( &nbsp;4&nbsp;) &lt;&lt; ( &nbsp;int&nbsp;)tok-&gt;getType( &nbsp;&nbsp;)
</div>
<div class="code">          	     &lt;&lt; std::setiosflags( &nbsp;ios::left&nbsp;) 
</div>
<div class="code">          	     &lt;&lt; std::resetiosflags( &nbsp;ios::right&nbsp;) 
</div>
<div class="code">          	     &lt;&lt; std::setw( &nbsp;20&nbsp;) &lt;&lt; tok-&gt;getText( &nbsp;&nbsp;)
</div>
<div class="code">          	     &nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                DbgMsg( &nbsp;PARSER, &nbsp;cerr, &nbsp;std::setw( &nbsp;30&nbsp;)&lt;&lt;""&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          enum InOrOut { IO_IN, &nbsp; IO_OUT };
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000481"></a>     481  static void rectrace( &nbsp;const char *rulename, &nbsp; 
</div>
<div class="code">          		     const char *dir_indic, &nbsp; 
</div>
<div class="code">          		     int guessing, &nbsp; 
</div>
<div class="code">          		     ANTLRAbstractToken *tok&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            static int trace_depth=0;
</div>
<div class="code">            if( &nbsp;guessing&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                DbgMsg( &nbsp;PARSER, &nbsp;cerr, &nbsp;
</div>
<div class="code">          	     setw( &nbsp;trace_depth*4+1&nbsp;) &lt;&lt; "" &lt;&lt; dir_indic 
</div>
<div class="code">          	     &lt;&lt; "?" &lt;&lt; rulename &lt;&lt; endl&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                trace_depth=( &nbsp;( &nbsp;ANTLRToken*&nbsp;) tok&nbsp;)-&gt;getNestingLevel( &nbsp;&nbsp;);
</div>
<div class="code">                DbgMsg( &nbsp;PARSER, &nbsp;cerr, &nbsp;
</div>
<div class="code">          	     setw( &nbsp;trace_depth*4&nbsp;)&lt;&lt; "" &lt;&lt; dir_indic &lt;&lt; rulename &lt;&lt; endl&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000501"></a>     501  void ParseUtility::tracein( &nbsp;
</div>
<div class="code">          			   const char *rulename, &nbsp; int guessing, &nbsp; 
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000503"></a>     503  			   ANTLRAbstractToken *tok&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            if( &nbsp;guessing == 0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                stack_tokentext[stack_depth]=tok-&gt;getText( &nbsp;&nbsp;);
</div>
<div class="code">                stack_tokenline[stack_depth]=tok-&gt;getLine( &nbsp;&nbsp;);
</div>
<div class="code">                stack_rules[stack_depth]=rulename;
</div>
<div class="code">                stack_depth++;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            // first put out the token details
</div>
<div class="code">            toktrace( &nbsp;tok&nbsp;);
</div>
<div class="code">            
</div>
<div class="code">            // then the indented recognition trace
</div>
<div class="code">            rectrace( &nbsp;rulename, &nbsp;"-&gt; ", &nbsp;guessing, &nbsp;tok&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000520"></a>     520  void ParseUtility::traceout( &nbsp;const char *rulename, &nbsp; 
</div>
<div class="code">          			    int guessing, &nbsp; 
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000522"></a>     522  			    ANTLRAbstractToken *tok&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            if( &nbsp;guessing == 0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                stack_depth--;
</div>
<div class="code">                // some error checking...
</div>
<div class="code">                if( &nbsp;stack_depth&lt;0&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  cerr &lt;&lt; "ParseUtility::traceout negative stack depth - "
</div>
<div class="code">          	       &lt;&lt; "exiting from rule " &lt;&lt; rulename 
</div>
<div class="code">          	       &lt;&lt; " at " &lt;&lt; tok-&gt;getText( &nbsp;&nbsp;) &lt;&lt; " on line " &lt;&lt; tok-&gt;getLine( &nbsp;&nbsp;) 
</div>
<div class="code">          	       &lt;&lt; endl;
</div>
<div class="code">          	}
</div>
<div class="code">                else if( &nbsp;rulename!=stack_rules[stack_depth]&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  cerr &lt;&lt; "ParseStore::traceout rule name mismatch - "
</div>
<div class="code">          	       &lt;&lt; rulename &lt;&lt; "!=" &lt;&lt; stack_rules[stack_depth] &lt;&lt; endl;
</div>
<div class="code">          	}
</div>
<div class="code">                stack_tokentext[stack_depth]="";
</div>
<div class="code">                stack_tokenline[stack_depth]=0;
</div>
<div class="code">                stack_rules[stack_depth]="";
</div>
<div class="code">              }
</div>
<div class="code">            // first put out the token details
</div>
<div class="code">            toktrace( &nbsp;tok&nbsp;);
</div>
<div class="code">            rectrace( &nbsp;rulename, &nbsp;"&lt;- ", &nbsp;guessing, &nbsp;tok&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">            
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000549"></a>     549  void ParseUtility::syn( &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000550"></a>     550    _ANTLRTokenPtr tok, &nbsp; ANTLRChar *egroup, &nbsp; SetWordType *eset, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000551"></a>     551    ANTLRTokenType etok, &nbsp; int k&nbsp;) 
</div>
<div class="code">          {
</div>
<div class="code">            string filename=ParseStore::currentInstance( &nbsp;&nbsp;)-&gt;filename( &nbsp;&nbsp;);
</div>
<div class="code">            if( &nbsp;tok != NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                cerr &lt;&lt; filename &lt;&lt; '( &nbsp;' &lt;&lt; tok-&gt;getLine( &nbsp;&nbsp;) &lt;&lt; "&nbsp;):" 
</div>
<div class="code">          	   &lt;&lt; " syntax error at token " &lt;&lt; tok-&gt;getText( &nbsp;&nbsp;) &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                cerr &lt;&lt; filename &lt;&lt; "( &nbsp;0&nbsp;): syntax error at null token" &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">          #if 1
</div>
<div class="code">          	  // The logic in the other half of this #if section
</div>
<div class="code">          	  // generated too much noise for some people's taste.
</div>
<div class="code">          	  // It's only really useful to myself ( &nbsp;TJL&nbsp;) or anyone
</div>
<div class="code">          	  // else with a taste for debugging cccc.g/java.g etc.
</div>
<div class="code">          	  int i=stack_depth-1;
</div>
<div class="code">                cerr &lt;&lt; filename &lt;&lt; '( &nbsp;' &lt;&lt; stack_tokenline[i] 
</div>
<div class="code">          	   &lt;&lt; "&nbsp;): trying to match " &lt;&lt; stack_rules[i]
</div>
<div class="code">          	   &lt;&lt; " at '" &lt;&lt; stack_tokentext[i] &lt;&lt; "'"
</div>
<div class="code">          	   &lt;&lt; endl;
</div>
<div class="code">          #else
</div>
<div class="code">            cerr &lt;&lt; "Parser context:" &lt;&lt; endl;
</div>
<div class="code">            for( &nbsp;int i=stack_depth-1; i&gt;=0; i--&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                cerr &lt;&lt; filename &lt;&lt; '( &nbsp;' &lt;&lt; stack_tokenline[i] 
</div>
<div class="code">          	   &lt;&lt; "&nbsp;): trying to match " &lt;&lt; stack_rules[i]
</div>
<div class="code">          	   &lt;&lt; " at '" &lt;&lt; stack_tokentext[i] &lt;&lt; "'"
</div>
<div class="code">          	   &lt;&lt; endl;
</div>
<div class="code">              }	
</div>
<div class="code">            cerr &lt;&lt; endl;
</div>
<div class="code">          #endif
</div>
<div class="code">          }	
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_utl.cc:00000587"></a>     587  void ParseStore::endOfLine( &nbsp;int line&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // We only do the processing below if the line which has just
</div>
<div class="code">            // ended contained at least one non-skippable token
</div>
<div class="code">            // The flag which tells us whether this is true is set in the 
</div>
<div class="code">            // token constructor
</div>
<div class="code">            if( &nbsp;ANTLRToken::bCodeLine&nbsp;)
</div>
<div class="code">            {
</div>
<div class="code">          	pendingLexicalCounts[tcCODELINES]++;
</div>
<div class="code">              LineLexicalCountMatrix::value_type 
</div>
<div class="code">                vt( &nbsp;line, &nbsp;LexicalCountArray( &nbsp;static_cast&lt;int&gt;( &nbsp;tcLAST&nbsp;), &nbsp;0&nbsp;)&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">              for( &nbsp;int i=0; i&lt;tcLAST; i++&nbsp;)
</div>
<div class="code">                {
</div>
<div class="code">          	vt.second[i]=pendingLexicalCounts[i];
</div>
<div class="code">          	pendingLexicalCounts[i]=0;
</div>
<div class="code">                }
</div>
<div class="code">              lineLexicalCounts.insert( &nbsp;vt&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	// reset the flat for next time
</div>
<div class="code">          	ANTLRToken::bCodeLine=false;
</div>
<div class="code">            }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./cccc/cccc_xml.cc"></a><h1>./cccc/cccc_xml.cc</h1>
<div class="code"><a name="./cccc/cccc_xml.cc:00000001"></a>       1  /*
</div>
<div class="code">              CCCC - C and C++ Code Counter
</div>
<div class="code">              Copyright ( &nbsp;C&nbsp;) 1994-2005 Tim Littlefair ( &nbsp;tim_littlefair@hotmail.com&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">              This program is free software; you can redistribute it and/or modify
</div>
<div class="code">              it under the terms of the GNU General Public License as published by
</div>
<div class="code">              the Free Software Foundation; either version 2 of the License, &nbsp; or
</div>
<div class="code">              ( &nbsp;at your option&nbsp;) any later version.
</div>
<div class="code">          
</div>
<div class="code">              This program is distributed in the hope that it will be useful, &nbsp;
</div>
<div class="code">              but WITHOUT ANY WARRANTY; without even the implied warranty of
</div>
<div class="code">              MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
</div>
<div class="code">              GNU General Public License for more details.
</div>
<div class="code">          
</div>
<div class="code">              You should have received a copy of the GNU General Public License
</div>
<div class="code">              along with this program; if not, &nbsp; write to the Free Software
</div>
<div class="code">              Foundation, &nbsp; Inc., &nbsp; 51 Franklin St, &nbsp; Fifth Floor, &nbsp; Boston, &nbsp; MA  02110-1301 USA
</div>
<div class="code">          */
</div>
<div class="code">          // cccc_xml.cc
</div>
<div class="code">          
</div>
<div class="code">          // this file defines XML output facilities for the CCCC project
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc.h"
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include "cccc_xml.h"
</div>
<div class="code">          
</div>
<div class="code">          // I would love to use the C++ standard preprocessor
</div>
<div class="code">          // directive #if here, &nbsp; but I have had reports before now
</div>
<div class="code">          // of people who are using compilers which only support
</div>
<div class="code">          // #ifdef.
</div>
<div class="code">          #ifdef CCCC_CONF_W32VC
</div>
<div class="code">          #include &lt;direct.h&gt;
</div>
<div class="code">          #else
</div>
<div class="code">          #ifdef CCCC_CONF_W32BC
</div>
<div class="code">          #include &lt;direct.h&gt;
</div>
<div class="code">          #else
</div>
<div class="code">          #include &lt;unistd.h&gt;
</div>
<div class="code">          #endif
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          #include &lt;string.h&gt;
</div>
<div class="code">          #include &lt;time.h&gt;
</div>
<div class="code">          #include &lt;sys/stat.h&gt;
</div>
<div class="code">          #include "cccc_utl.h"
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          // class static data members
</div>
<div class="code">          CCCC_Project* CCCC_Xml_Stream::prjptr;
</div>
<div class="code">          string CCCC_Xml_Stream::outdir;
</div>
<div class="code">          string CCCC_Xml_Stream::libdir;
</div>
<div class="code">          
</div>
<div class="code">          static const string XML_PREAMBLE = "&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;";
</div>
<div class="code">          static const string XML_COMMENT_BEGIN = "&lt;!--";
</div>
<div class="code">          static const string XML_COMMENT_END = "--&gt;";
</div>
<div class="code">          static const string XML_TAG_OPEN_BEGIN = "&lt;";
</div>
<div class="code">          static const string XML_TAG_OPEN_END = "&gt;";
</div>
<div class="code">          static const string XML_TAG_CLOSE_BEGIN = "&lt;/";
</div>
<div class="code">          static const string XML_TAG_CLOSE_END = "&gt;";
</div>
<div class="code">          static const string XML_TAG_INLINE_BEGIN = "&lt;";
</div>
<div class="code">          static const string XML_TAG_INLINE_END   = "/&gt;";
</div>
<div class="code">          static const string XML_SPACE         = " ";
</div>
<div class="code">          static const string XML_NEWLINE       = "\n";
</div>
<div class="code">          static const string XML_DQUOTE        = "\"";
</div>
<div class="code">          static const string XML_EQUALS        = "=";
</div>
<div class="code">          
</div>
<div class="code">          static const string PROJECT_NODE_NAME = "CCCC_Project";
</div>
<div class="code">          static const string TIMESTAMP_NODE_NAME = "timestamp";
</div>
<div class="code">          static const string SUMMARY_NODE_NAME = "project_summary";
</div>
<div class="code">          static const string MODSUM_NODE_NAME = "module_summary";
</div>
<div class="code">          static const string MODDET_NODE_NAME  = "module_detail";
</div>
<div class="code">          static const string PROCSUM_NODE_NAME = "procedural_summary";
</div>
<div class="code">          static const string PROCDET_NODE_NAME = "procedural_detail";
</div>
<div class="code">          static const string STRUCTSUM_NODE_NAME = "structural_summary";
</div>
<div class="code">          static const string STRUCTDET_NODE_NAME = "structural_detail";
</div>
<div class="code">          static const string OODESIGN_NODE_NAME = "oo_design";
</div>
<div class="code">          static const string OTHER_NODE_NAME    = "other_extents";
</div>
<div class="code">          static const string REJECTED_NODE_NAME = "rejected_extent";
</div>
<div class="code">          static const string NAME_NODE_NAME    = "name";
</div>
<div class="code">          static const string MODULE_NODE_NAME  = "module";
</div>
<div class="code">          static const string MEMBER_NODE_NAME  = "member_function";
</div>
<div class="code">          static const string EXTENT_NODE_NAME  = "extent";
</div>
<div class="code">          static const string SUPPLIERS_NODE_NAME = "suppliers";
</div>
<div class="code">          static const string SUPMOD_NODE_NAME    = "supplier_module";
</div>
<div class="code">          static const string CLIENTS_NODE_NAME = "clients";
</div>
<div class="code">          static const string CLIMOD_NODE_NAME  = "client_module";
</div>
<div class="code">          static const string DESC_NODE_NAME    = "description";
</div>
<div class="code">          static const string SRCREF_NODE_NAME     = "source_reference";
</div>
<div class="code">          
</div>
<div class="code">          static const string NOM_NODE_NAME       = "number_of_modules";
</div>
<div class="code">          static const string LOC_NODE_NAME       = "lines_of_code";
</div>
<div class="code">          static const string LOCPERMOD_NODE_NAME = "lines_of_code_per_module";
</div>
<div class="code">          static const string LOCPERCOM_NODE_NAME = "lines_of_code_per_line_of_comment";
</div>
<div class="code">          static const string LOCPERMEM_NODE_NAME = "lines_of_code_per_member_function";
</div>
<div class="code">          static const string MVG_NODE_NAME       = "McCabes_cyclomatic_complexity";
</div>
<div class="code">          static const string MVGPERMOD_NODE_NAME = "McCabes_cyclomatic_complexity_per_module";
</div>
<div class="code">          static const string MVGPERCOM_NODE_NAME = "McCabes_cyclomatic_complexity_per_line_of_comment";
</div>
<div class="code">          static const string MVGPERMEM_NODE_NAME = "McCabes_cyclomatic_complexity_per_member_function";
</div>
<div class="code">          static const string COM_NODE_NAME       = "lines_of_comment";
</div>
<div class="code">          static const string COMPERMOD_NODE_NAME = "lines_of_comment_per_module";
</div>
<div class="code">          static const string COMPERMEM_NODE_NAME = "lines_of_comment_per_member_function";
</div>
<div class="code">          static const string WMC1_NODE_NAME      = "weighted_methods_per_class_unity";
</div>
<div class="code">          static const string WMCV_NODE_NAME      = "weighted_methods_per_class_visibility";
</div>
<div class="code">          static const string DIT_NODE_NAME       = "depth_of_inheritance_tree";
</div>
<div class="code">          static const string NOC_NODE_NAME       = "number_of_children";
</div>
<div class="code">          static const string CBO_NODE_NAME       = "coupling_between_objects";
</div>
<div class="code">          static const string IF4_NODE_NAME       = "IF4";
</div>
<div class="code">          static const string IF4PERMOD_NODE_NAME = "IF4_per_module";
</div>
<div class="code">          static const string IF4PERMEM_NODE_NAME = "IF4_per_member_function";
</div>
<div class="code">          static const string IF4VIS_NODE_NAME   = "IF4_visible";
</div>
<div class="code">          static const string IF4VISPERMOD_NODE_NAME   = "IF4_visible_per_module";
</div>
<div class="code">          static const string IF4VISPERMEM_NODE_NAME = "IF4_visible_per_member_function";
</div>
<div class="code">          static const string IF4CON_NODE_NAME   = "IF4_concrete";
</div>
<div class="code">          static const string IF4CONPERMOD_NODE_NAME   = "IF4_concrete";
</div>
<div class="code">          static const string IF4CONPERMEM_NODE_NAME = "IF4_concrete_per_member_function";
</div>
<div class="code">          static const string FO_NODE_NAME        = "fan_out";
</div>
<div class="code">          static const string FOV_NODE_NAME        = "fan_out_visible";
</div>
<div class="code">          static const string FOC_NODE_NAME        = "fan_out_concrete";
</div>
<div class="code">          static const string FI_NODE_NAME        = "fan_in";
</div>
<div class="code">          static const string FIV_NODE_NAME        = "fan_in_visible";
</div>
<div class="code">          static const string FIC_NODE_NAME        = "fan_in_concrete";
</div>
<div class="code">          static const string REJ_LOC_NODE_NAME   = "rejected_lines_of_code";
</div>
<div class="code">          
</div>
<div class="code">          static const string VALUE_ATTR          = "value";
</div>
<div class="code">          static const string LEVEL_ATTR          = "level";
</div>
<div class="code">          static const string FILE_ATTR           = "file";
</div>
<div class="code">          static const string LINE_ATTR           = "line";
</div>
<div class="code">          static const string VISIBLE_ATTR        = "visible";
</div>
<div class="code">          static const string CONCRETE_ATTR       = "concrete";
</div>
<div class="code">          
</div>
<div class="code">          static const string LEVEL_NORMAL        = "0";
</div>
<div class="code">          static const string LEVEL_MEDIUM        = "1";
</div>
<div class="code">          static const string LEVEL_HIGH          = "2";
</div>
<div class="code">          static const string BOOL_FALSE          = "false";
</div>
<div class="code">          static const string BOOL_TRUE           = "true";
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000136"></a>     136  static string ltrim( &nbsp;string value&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">             const int MAX_LENGTH = 1000;
</div>
<div class="code">             int i = 0;
</div>
<div class="code">             while( &nbsp;i&lt;value.size( &nbsp;&nbsp;) &amp;&amp; value[i]==' '&nbsp;)
</div>
<div class="code">             {
</div>
<div class="code">                ++i;
</div>
<div class="code">             }
</div>
<div class="code">             return value.substr( &nbsp;i, &nbsp;MAX_LENGTH&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000147"></a>     147  void CCCC_Xml_Stream::GenerateReports( &nbsp;CCCC_Project* prj, &nbsp;
</div>
<div class="code">          				       int report_mask, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000149"></a>     149  				       const string&amp; file, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000150"></a>     150  				       const string&amp; dir&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            prjptr=prj;
</div>
<div class="code">            outdir=dir;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Xml_Stream main_xml_stream( &nbsp;file.c_str( &nbsp;&nbsp;), &nbsp;"Report on software metrics"&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            // For testing purposes, &nbsp; we want to be able to disable the inclusion
</div>
<div class="code">            // of the current time in the report.  This enables us to store a
</div>
<div class="code">            // reference version of the report in RCS and expect the program
</div>
<div class="code">            // to generate an identical one at regression testing time.
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtSHOW_GEN_TIME&nbsp;)
</div>
<div class="code">            {
</div>
<div class="code">               main_xml_stream.Timestamp( &nbsp;&nbsp;);
</div>
<div class="code">            }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtSUMMARY&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_xml_stream.Project_Summary( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtPROC1&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_xml_stream.Procedural_Summary( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtPROC2&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_xml_stream.Procedural_Detail( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtOODESIGN&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_xml_stream.OO_Design( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtSTRUCT1&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_xml_stream.Structural_Summary( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtSTRUCT2&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_xml_stream.Structural_Detail( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtSEPARATE_MODULES&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_xml_stream.Separate_Modules( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;report_mask &amp; rtOTHER&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                main_xml_stream.Other_Extents( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000207"></a>     207  CCCC_Xml_Stream::CCCC_Xml_Stream( &nbsp;const string&amp; fname, &nbsp; const string&amp; info&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // cerr &lt;&lt; "Attempting to open file in directory " &lt;&lt; outdir.c_str( &nbsp;&nbsp;) &lt;&lt; endl;
</div>
<div class="code">            fstr.open( &nbsp;fname.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            if( &nbsp;fstr.good( &nbsp;&nbsp;) != TRUE&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                cerr &lt;&lt; "failed to open " &lt;&lt; fname.c_str( &nbsp;&nbsp;)
</div>
<div class="code">          	   &lt;&lt; " for output in directory " &lt;&lt; outdir.c_str( &nbsp;&nbsp;) &lt;&lt; endl;
</div>
<div class="code">                exit( &nbsp;1&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; XML_PREAMBLE &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; XML_COMMENT_BEGIN &lt;&lt; info &lt;&lt; XML_COMMENT_END &lt;&lt; endl
</div>
<div class="code">                 &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; PROJECT_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000223"></a>     223  CCCC_Xml_Stream::~CCCC_Xml_Stream( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; PROJECT_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">            fstr.close( &nbsp;&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000229"></a>     229  void CCCC_Xml_Stream::Timestamp( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">                time_t generationTime=time( &nbsp;NULL&nbsp;);
</div>
<div class="code">                fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; TIMESTAMP_NODE_NAME &lt;&lt; XML_TAG_OPEN_END
</div>
<div class="code">                     &lt;&lt; ctime( &nbsp;&amp;generationTime&nbsp;)
</div>
<div class="code">                     &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; TIMESTAMP_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END
</div>
<div class="code">                     &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000238"></a>     238  void  CCCC_Xml_Stream::Project_Summary( &nbsp;&nbsp;) {
</div>
<div class="code">            // calculate the counts on which all displayed data will be based
</div>
<div class="code">            int nom=prjptr-&gt;get_count( &nbsp;COUNT_TAG_NUMBER_OF_MODULES&nbsp;);
</div>
<div class="code">            int loc=prjptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;);
</div>
<div class="code">            int mvg=prjptr-&gt;get_count( &nbsp;COUNT_TAG_CYCLOMATIC_NUMBER&nbsp;);
</div>
<div class="code">            int com=prjptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_COMMENT&nbsp;);
</div>
<div class="code">            int if4=prjptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4&nbsp;);
</div>
<div class="code">            int if4v=prjptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4 COUNT_TAG_VISIBLE_SUFFIX&nbsp;);
</div>
<div class="code">            int if4c=prjptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4 COUNT_TAG_CONCRETE_SUFFIX&nbsp;);
</div>
<div class="code">            int rej=prjptr-&gt;rejected_extent_table.get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; SUMMARY_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            Put_Metric_Node( &nbsp;NOM_NODE_NAME, &nbsp;nom&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;LOC_NODE_NAME, &nbsp;loc, &nbsp;"LOCp"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;LOCPERMOD_NODE_NAME, &nbsp;loc, &nbsp;nom, &nbsp;"LOCper"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;MVG_NODE_NAME, &nbsp;mvg, &nbsp;"MVGp"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;MVGPERMOD_NODE_NAME, &nbsp;mvg, &nbsp;nom, &nbsp;"MVGper"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;COM_NODE_NAME, &nbsp;com, &nbsp;"COM"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;COMPERMOD_NODE_NAME, &nbsp;com, &nbsp;nom, &nbsp;"COMper"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;LOCPERCOM_NODE_NAME, &nbsp;loc, &nbsp;com, &nbsp;"L_C"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;MVGPERCOM_NODE_NAME, &nbsp;mvg, &nbsp;com, &nbsp;"M_C"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;IF4_NODE_NAME, &nbsp;if4&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;IF4PERMOD_NODE_NAME, &nbsp;if4, &nbsp;nom, &nbsp;"8.3"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;IF4VIS_NODE_NAME, &nbsp;if4v&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;IF4VISPERMOD_NODE_NAME, &nbsp;if4v, &nbsp;nom, &nbsp;"8.3"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;IF4CON_NODE_NAME, &nbsp;if4c&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;IF4CONPERMOD_NODE_NAME, &nbsp;if4c, &nbsp;nom, &nbsp;"8.3"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;REJ_LOC_NODE_NAME, &nbsp;rej, &nbsp;"REJ"&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; SUMMARY_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000270"></a>     270  void CCCC_Xml_Stream::OO_Design( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; OODESIGN_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module* mod_ptr=prjptr-&gt;module_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            int i=0;
</div>
<div class="code">            while( &nbsp;mod_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                i++;
</div>
<div class="code">                if( &nbsp; mod_ptr-&gt;is_trivial( &nbsp;&nbsp;) == FALSE&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; MODULE_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">          	  Put_Label_Node( &nbsp;NAME_NODE_NAME, &nbsp;mod_ptr-&gt;name( &nbsp;nlSIMPLE&nbsp;).c_str( &nbsp;&nbsp;), &nbsp;0, &nbsp;"", &nbsp;""&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  CCCC_Metric wmc1( &nbsp;mod_ptr-&gt;get_count( &nbsp;"WMC1"&nbsp;), &nbsp;"WMC1"&nbsp;);
</div>
<div class="code">          	  CCCC_Metric wmcv( &nbsp;mod_ptr-&gt;get_count( &nbsp;"WMCv"&nbsp;), &nbsp;"WMCv"&nbsp;);
</div>
<div class="code">          	  CCCC_Metric dit( &nbsp;mod_ptr-&gt;get_count( &nbsp;"DIT"&nbsp;), &nbsp;"DIT"&nbsp;);
</div>
<div class="code">          	  CCCC_Metric noc( &nbsp;mod_ptr-&gt;get_count( &nbsp;"NOC"&nbsp;), &nbsp;"NOC"&nbsp;);
</div>
<div class="code">          	  CCCC_Metric cbo( &nbsp;mod_ptr-&gt;get_count( &nbsp;"CBO"&nbsp;), &nbsp;"CBO"&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;WMC1_NODE_NAME, &nbsp;wmc1&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;WMCV_NODE_NAME, &nbsp;wmcv&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;DIT_NODE_NAME, &nbsp;dit&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;NOC_NODE_NAME, &nbsp;noc&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;CBO_NODE_NAME, &nbsp;cbo&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; MODULE_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          	}
</div>
<div class="code">                mod_ptr=prjptr-&gt;module_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; OODESIGN_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000304"></a>     304  void CCCC_Xml_Stream::Procedural_Summary( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; PROCSUM_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module* mod_ptr=prjptr-&gt;module_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            int i=0;
</div>
<div class="code">            while( &nbsp;mod_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                i++;
</div>
<div class="code">                if( &nbsp; mod_ptr-&gt;is_trivial( &nbsp;&nbsp;) == FALSE&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; MODULE_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">          	  Put_Label_Node( &nbsp;NAME_NODE_NAME, &nbsp;mod_ptr-&gt;name( &nbsp;nlSIMPLE&nbsp;).c_str( &nbsp;&nbsp;), &nbsp;0, &nbsp;"", &nbsp;""&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  int loc=mod_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;);
</div>
<div class="code">          	  int mvg=mod_ptr-&gt;get_count( &nbsp;COUNT_TAG_CYCLOMATIC_NUMBER&nbsp;);
</div>
<div class="code">          	  int com=mod_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_COMMENT&nbsp;);
</div>
<div class="code">          	  CCCC_Metric mloc( &nbsp;loc, &nbsp;"LOCm"&nbsp;);
</div>
<div class="code">          	  CCCC_Metric mmvg( &nbsp;mvg, &nbsp;"MVGm"&nbsp;);
</div>
<div class="code">          	  CCCC_Metric ml_c( &nbsp;loc, &nbsp;com, &nbsp;"L_C"&nbsp;);
</div>
<div class="code">          	  CCCC_Metric mm_c( &nbsp;mvg, &nbsp;com, &nbsp;"M_C"&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;LOC_NODE_NAME, &nbsp;mloc&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;MVG_NODE_NAME, &nbsp;mmvg&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;COM_NODE_NAME, &nbsp;com&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;LOCPERCOM_NODE_NAME, &nbsp;ml_c&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;MVGPERCOM_NODE_NAME, &nbsp;mm_c&nbsp;);
</div>
<div class="code">          	  fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; MODULE_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">          	}
</div>
<div class="code">                mod_ptr=prjptr-&gt;module_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">              fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; PROCSUM_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000340"></a>     340  void CCCC_Xml_Stream::Structural_Summary( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; STRUCTSUM_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module* module_ptr=prjptr-&gt;module_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;module_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                if( &nbsp;module_ptr-&gt;is_trivial( &nbsp;&nbsp;)==FALSE&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; MODULE_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">          	  Put_Label_Node( &nbsp;NAME_NODE_NAME, &nbsp;module_ptr-&gt;name( &nbsp;nlSIMPLE&nbsp;).c_str( &nbsp;&nbsp;), &nbsp;0, &nbsp;"", &nbsp;""&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  int fov=module_ptr-&gt;get_count( &nbsp;"FOv"&nbsp;);
</div>
<div class="code">          	  int foc=module_ptr-&gt;get_count( &nbsp;"FOc"&nbsp;);
</div>
<div class="code">          	  int fo=module_ptr-&gt;get_count( &nbsp;"FO"&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  int fiv=module_ptr-&gt;get_count( &nbsp;"FIv"&nbsp;);
</div>
<div class="code">          	  int fic=module_ptr-&gt;get_count( &nbsp;"FIc"&nbsp;);
</div>
<div class="code">          	  int fi=module_ptr-&gt;get_count( &nbsp;"FI"&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  int if4v=module_ptr-&gt;get_count( &nbsp;"IF4v"&nbsp;);
</div>
<div class="code">          	  int if4c=module_ptr-&gt;get_count( &nbsp;"IF4c"&nbsp;);
</div>
<div class="code">          	  int if4=module_ptr-&gt;get_count( &nbsp;"IF4"&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  // the last two arguments here turn on links to enable jumping between
</div>
<div class="code">          	  // the summary and detail cells for the same module
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;FOV_NODE_NAME, &nbsp;CCCC_Metric( &nbsp;fov, &nbsp;"FOv"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;FOC_NODE_NAME, &nbsp;CCCC_Metric( &nbsp;foc, &nbsp;"FOc"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;FO_NODE_NAME, &nbsp;CCCC_Metric( &nbsp;fo, &nbsp;"FO"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;FIV_NODE_NAME, &nbsp;CCCC_Metric( &nbsp;fiv, &nbsp;"FIv"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;FIC_NODE_NAME, &nbsp;CCCC_Metric( &nbsp;fic, &nbsp;"FIc"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;FI_NODE_NAME, &nbsp;CCCC_Metric( &nbsp;fi, &nbsp;"FI"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;IF4VIS_NODE_NAME, &nbsp;CCCC_Metric( &nbsp;if4v, &nbsp;"IF4v"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;IF4CON_NODE_NAME, &nbsp;CCCC_Metric( &nbsp;if4c, &nbsp;"IF4c"&nbsp;)&nbsp;);
</div>
<div class="code">          	  Put_Metric_Node( &nbsp;IF4_NODE_NAME, &nbsp;CCCC_Metric( &nbsp;if4, &nbsp;"IF4"&nbsp;)&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; MODULE_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">          	}
</div>
<div class="code">                module_ptr=prjptr-&gt;module_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">              fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; STRUCTSUM_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000383"></a>     383  void CCCC_Xml_Stream::Put_Structural_Details_Node( &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000384"></a>     384     CCCC_Module *mod, &nbsp; CCCC_Project *prj, &nbsp; int mask, &nbsp; UserelNameLevel nl&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          
</div>
<div class="code">          #if 0
</div>
<div class="code">            std::cerr &lt;&lt; "Relationships for " &lt;&lt; mod-&gt;name( &nbsp;nlMODULE_NAME&nbsp;)
</div>
<div class="code">          	    &lt;&lt; " ( &nbsp;" &lt;&lt; mod &lt;&lt; "&nbsp;)" &lt;&lt; std::endl;
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module::relationship_map_t::iterator iter;
</div>
<div class="code">            CCCC_Module::relationship_map_t *relationship_map=NULL;
</div>
<div class="code">          
</div>
<div class="code">            string nodeTag;
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;mask==rmeCLIENT&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                nodeTag = CLIMOD_NODE_NAME;
</div>
<div class="code">                relationship_map=&amp;( &nbsp;mod-&gt;client_map&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">              }
</div>
<div class="code">            else if( &nbsp;mask==rmeSUPPLIER&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                nodeTag = SUPMOD_NODE_NAME;
</div>
<div class="code">                relationship_map=&amp;( &nbsp;mod-&gt;supplier_map&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;relationship_map==NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                cerr &lt;&lt; "unexpected relationship mask " &lt;&lt; mask  &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; nodeTag &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">                for( &nbsp;
</div>
<div class="code">          	  iter=relationship_map-&gt;begin( &nbsp;&nbsp;);
</div>
<div class="code">          	  iter!=relationship_map-&gt;end( &nbsp;&nbsp;);
</div>
<div class="code">          	  iter++
</div>
<div class="code">          	  &nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  CCCC_UseRelationship *ur_ptr=( &nbsp;*iter&nbsp;).second;
</div>
<div class="code">          	  Put_Label_Node( &nbsp;NAME_NODE_NAME, &nbsp; ur_ptr-&gt;name( &nbsp;nl&nbsp;).c_str( &nbsp;&nbsp;), &nbsp;0, &nbsp;"", &nbsp;""&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  AugmentedBool vis=ur_ptr-&gt;is_visible( &nbsp;&nbsp;);
</div>
<div class="code">          	  AugmentedBool con=ur_ptr-&gt;is_concrete( &nbsp;&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">                    string visvalue = BOOL_FALSE;
</div>
<div class="code">                    string convalue = BOOL_FALSE;
</div>
<div class="code">          	  if( &nbsp;vis!=abFALSE&nbsp;)
</div>
<div class="code">          	  {
</div>
<div class="code">                       visvalue = BOOL_TRUE;
</div>
<div class="code">                    }
</div>
<div class="code">                    if( &nbsp;con!=abFALSE&nbsp;)
</div>
<div class="code">                    {
</div>
<div class="code">                       convalue = BOOL_TRUE;
</div>
<div class="code">                    }
</div>
<div class="code">          	  Put_Label_Node( &nbsp;VISIBLE_ATTR, &nbsp;visvalue, &nbsp;0, &nbsp;"", &nbsp;""&nbsp;);
</div>
<div class="code">          	  Put_Label_Node( &nbsp;CONCRETE_ATTR, &nbsp;convalue, &nbsp;0, &nbsp;"", &nbsp;""&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  Put_Extent_List( &nbsp;*ur_ptr, &nbsp;true&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">                fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; nodeTag &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000448"></a>     448  void CCCC_Xml_Stream::Structural_Detail( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; STRUCTDET_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">            CCCC_Module* module_ptr=prjptr-&gt;module_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;module_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                if( &nbsp;module_ptr-&gt;is_trivial( &nbsp;&nbsp;)==FALSE&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  Structural_Detail( &nbsp;module_ptr&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">                module_ptr=prjptr-&gt;module_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; STRUCTDET_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000463"></a>     463  void CCCC_Xml_Stream::Procedural_Detail( &nbsp;&nbsp;) {
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; PROCDET_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module* mod_ptr=prjptr-&gt;module_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;mod_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                if( &nbsp;
</div>
<div class="code">          	 ( &nbsp;mod_ptr-&gt;name( &nbsp;nlMODULE_TYPE&nbsp;)!="builtin"&nbsp;) &amp;&amp;
</div>
<div class="code">          	 ( &nbsp;mod_ptr-&gt;name( &nbsp;nlMODULE_TYPE&nbsp;)!="enum"&nbsp;) &amp;&amp;
</div>
<div class="code">          	 ( &nbsp;mod_ptr-&gt;name( &nbsp;nlMODULE_TYPE&nbsp;)!="union"&nbsp;)
</div>
<div class="code">          	 &nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">                    fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; MODULE_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">          	  Put_Label_Node( &nbsp;NAME_NODE_NAME, &nbsp;mod_ptr-&gt;name( &nbsp;nlSIMPLE&nbsp;).c_str( &nbsp;&nbsp;), &nbsp;50, &nbsp;
</div>
<div class="code">          			 "procdet", &nbsp;"procsum", &nbsp;mod_ptr&nbsp;);
</div>
<div class="code">          	  Procedural_Detail( &nbsp;mod_ptr&nbsp;);
</div>
<div class="code">                    fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; MODULE_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">          	}
</div>
<div class="code">                mod_ptr=prjptr-&gt;module_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; PROCDET_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000487"></a>     487  void CCCC_Xml_Stream::Other_Extents( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">             fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; OTHER_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">             CCCC_Extent *extent_ptr=prjptr-&gt;rejected_extent_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">             while( &nbsp;extent_ptr!=NULL&nbsp;)
</div>
<div class="code">             {
</div>
<div class="code">                fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; REJECTED_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">                Put_Label_Node( &nbsp;NAME_NODE_NAME, &nbsp;extent_ptr-&gt;name( &nbsp;nlDESCRIPTION&nbsp;).c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">                Put_Extent_Node( &nbsp;*extent_ptr, &nbsp;0&nbsp;);
</div>
<div class="code">                Put_Metric_Node( &nbsp;LOC_NODE_NAME, &nbsp;extent_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;), &nbsp;""&nbsp;);
</div>
<div class="code">                Put_Metric_Node( &nbsp;COM_NODE_NAME, &nbsp;extent_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_COMMENT&nbsp;), &nbsp;""&nbsp;);
</div>
<div class="code">                Put_Metric_Node( &nbsp;MVG_NODE_NAME, &nbsp;extent_ptr-&gt;get_count( &nbsp;COUNT_TAG_CYCLOMATIC_NUMBER&nbsp;), &nbsp;""&nbsp;);
</div>
<div class="code">                extent_ptr=prjptr-&gt;rejected_extent_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">                fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; REJECTED_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">             }
</div>
<div class="code">          
</div>
<div class="code">             fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; OTHER_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000507"></a>     507  void CCCC_Xml_Stream::Put_Label_Node( &nbsp;string nodeTag, &nbsp; string label, &nbsp; int width, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000508"></a>     508  				     string ref_name, &nbsp; string ref_href, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000509"></a>     509  				     CCCC_Record *rec_ptr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            if( &nbsp;label.size( &nbsp;&nbsp;)&gt;0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; nodeTag &lt;&lt; XML_TAG_OPEN_END;
</div>
<div class="code">                *this &lt;&lt; label;
</div>
<div class="code">                fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; nodeTag &lt;&lt; XML_TAG_CLOSE_END
</div>
<div class="code">                     &lt;&lt; endl;
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">          	// Do nothing
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;rec_ptr != 0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                Put_Extent_List( &nbsp;*rec_ptr, &nbsp;true&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000530"></a>     530  void CCCC_Xml_Stream::Put_Metric_Node( &nbsp;string nodeTag, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000531"></a>     531  				       int count, &nbsp; string tag&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            CCCC_Metric m( &nbsp;count, &nbsp; tag.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;nodeTag, &nbsp;m&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000537"></a>     537  void CCCC_Xml_Stream::Put_Metric_Node( &nbsp;string nodeTag, &nbsp;
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000538"></a>     538  				       int num, &nbsp; int denom, &nbsp; string tag&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            CCCC_Metric m( &nbsp;num, &nbsp;denom, &nbsp; tag.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;nodeTag, &nbsp;m&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000544"></a>     544  void  CCCC_Xml_Stream::Put_Metric_Node( &nbsp;string nodeTag, &nbsp;const CCCC_Metric&amp; metric&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_INLINE_BEGIN &lt;&lt; nodeTag &lt;&lt; XML_SPACE
</div>
<div class="code">                 &lt;&lt; VALUE_ATTR &lt;&lt; XML_EQUALS &lt;&lt; XML_DQUOTE;
</div>
<div class="code">            *this &lt;&lt; metric;
</div>
<div class="code">            fstr &lt;&lt; XML_DQUOTE &lt;&lt; XML_SPACE
</div>
<div class="code">                 &lt;&lt; LEVEL_ATTR &lt;&lt; XML_EQUALS &lt;&lt; XML_DQUOTE;
</div>
<div class="code">          
</div>
<div class="code">            switch( &nbsp;metric.emphasis_level( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">              case elMEDIUM:
</div>
<div class="code">                fstr &lt;&lt; LEVEL_MEDIUM;
</div>
<div class="code">                break;
</div>
<div class="code">              case elHIGH:
</div>
<div class="code">                fstr &lt;&lt; LEVEL_HIGH;
</div>
<div class="code">                break;
</div>
<div class="code">              default:
</div>
<div class="code">                fstr &lt;&lt; LEVEL_NORMAL;
</div>
<div class="code">                break;
</div>
<div class="code">              }
</div>
<div class="code">            fstr &lt;&lt; XML_DQUOTE &lt;&lt; XML_SPACE &lt;&lt; XML_TAG_INLINE_END &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000567"></a>     567  void CCCC_Xml_Stream::Put_Extent_URL( &nbsp;const CCCC_Extent&amp; extent&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            string filename=extent.name( &nbsp;nlFILENAME&nbsp;);
</div>
<div class="code">            int linenumber=atoi( &nbsp;extent.name( &nbsp;nlLINENUMBER&nbsp;).c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_INLINE_BEGIN &lt;&lt; SRCREF_NODE_NAME &lt;&lt; XML_SPACE
</div>
<div class="code">                 &lt;&lt; FILE_ATTR &lt;&lt; XML_EQUALS &lt;&lt; XML_DQUOTE;
</div>
<div class="code">            *this &lt;&lt; filename;
</div>
<div class="code">            fstr &lt;&lt; XML_DQUOTE &lt;&lt; XML_SPACE
</div>
<div class="code">                 &lt;&lt; LINE_ATTR &lt;&lt; XML_EQUALS &lt;&lt; XML_DQUOTE;
</div>
<div class="code">            *this &lt;&lt; linenumber;
</div>
<div class="code">            fstr &lt;&lt; XML_DQUOTE &lt;&lt; XML_SPACE &lt;&lt; XML_TAG_INLINE_END &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000580"></a>     580  void CCCC_Xml_Stream::Put_Extent_Node( &nbsp;const CCCC_Extent&amp; extent, &nbsp; int width, &nbsp; bool withDescription&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            if( &nbsp;withDescription&nbsp;)
</div>
<div class="code">            {
</div>
<div class="code">               fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; DESC_NODE_NAME &lt;&lt; XML_TAG_OPEN_END
</div>
<div class="code">                    &lt;&lt; extent.name( &nbsp;nlDESCRIPTION&nbsp;)
</div>
<div class="code">                    &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; DESC_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END
</div>
<div class="code">                    &lt;&lt; endl;
</div>
<div class="code">            }
</div>
<div class="code">            Put_Extent_URL( &nbsp;extent&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000592"></a>     592  void CCCC_Xml_Stream::Put_Extent_List( &nbsp;CCCC_Record&amp; record, &nbsp; bool withDescription&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            CCCC_Extent *ext_ptr=record.extent_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;ext_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; EXTENT_NODE_NAME &lt;&lt; XML_TAG_OPEN_END
</div>
<div class="code">                     &lt;&lt; endl;
</div>
<div class="code">                if( &nbsp;withDescription&nbsp;)
</div>
<div class="code">                {
</div>
<div class="code">                   fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; DESC_NODE_NAME &lt;&lt; XML_TAG_OPEN_END
</div>
<div class="code">                        &lt;&lt; ext_ptr-&gt;name( &nbsp;nlDESCRIPTION&nbsp;)
</div>
<div class="code">                        &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; DESC_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END
</div>
<div class="code">                        &lt;&lt; endl;
</div>
<div class="code">                }
</div>
<div class="code">                Put_Extent_URL( &nbsp;*ext_ptr&nbsp;);
</div>
<div class="code">                fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; EXTENT_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END
</div>
<div class="code">                     &lt;&lt; endl;
</div>
<div class="code">                ext_ptr=record.extent_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          // the next two methods define the two basic output operations through which
</div>
<div class="code">          // all of the higher level output operations are composed
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000615"></a>     615  CCCC_Xml_Stream&amp; operator &lt;&lt;( &nbsp;CCCC_Xml_Stream&amp; os, &nbsp; const string&amp; stg&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // initialise a character pointer to the start of the string's buffer
</div>
<div class="code">            const char *cptr=stg.c_str( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;*cptr!='\000'&nbsp;) {
</div>
<div class="code">              char c=*cptr;
</div>
<div class="code">          
</div>
<div class="code">              // the purpose of this is to filter out the characters which
</div>
<div class="code">              // must be escaped in HTML
</div>
<div class="code">              switch( &nbsp;c&nbsp;) {
</div>
<div class="code">              case '&gt;': os.fstr &lt;&lt; "&amp;gt;" ; break;
</div>
<div class="code">              case '&lt;': os.fstr &lt;&lt; "&amp;lt;" ; break;
</div>
<div class="code">              case '&amp;': os.fstr &lt;&lt; "&amp;amp;"; break;
</div>
<div class="code">              default : os.fstr &lt;&lt; c;
</div>
<div class="code">              }
</div>
<div class="code">              cptr++;
</div>
<div class="code">            }
</div>
<div class="code">            return os;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000635"></a>     635  CCCC_Xml_Stream&amp; operator &lt;&lt;( &nbsp;CCCC_Xml_Stream&amp; os, &nbsp; const CCCC_Metric&amp; mtc&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // by writing to the underlying ostream object, &nbsp; we avoid the escape
</div>
<div class="code">            // functionality
</div>
<div class="code">            os.fstr &lt;&lt; ltrim( &nbsp;mtc.value_string( &nbsp;&nbsp;)&nbsp;) ;
</div>
<div class="code">            return os;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000643"></a>     643  void CCCC_Xml_Stream::Separate_Modules( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // this function generates a separate HTML report for each non-trivial
</div>
<div class="code">            // module in the database
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module* mod_ptr=prjptr-&gt;module_table.first_item( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;mod_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                int trivial_module=mod_ptr-&gt;is_trivial( &nbsp;&nbsp;);
</div>
<div class="code">                if( &nbsp;trivial_module==FALSE&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  string info="Detailed report on module " + mod_ptr-&gt;key( &nbsp;&nbsp;);
</div>
<div class="code">          	  string filename=outdir;
</div>
<div class="code">          	  filename+="/";
</div>
<div class="code">          	  filename+=mod_ptr-&gt;key( &nbsp;&nbsp;)+".xml";
</div>
<div class="code">          	  CCCC_Xml_Stream module_xml_str( &nbsp;filename, &nbsp;info.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  module_xml_str.Module_Summary( &nbsp;mod_ptr&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">                    module_xml_str.fstr
</div>
<div class="code">                       &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; MODDET_NODE_NAME &lt;&lt; XML_TAG_OPEN_END
</div>
<div class="code">                       &lt;&lt; endl;
</div>
<div class="code">          	  module_xml_str.Module_Detail( &nbsp;mod_ptr&nbsp;);
</div>
<div class="code">                    module_xml_str.fstr
</div>
<div class="code">                       &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; MODDET_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END
</div>
<div class="code">                       &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">                    module_xml_str.fstr
</div>
<div class="code">                       &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; PROCDET_NODE_NAME &lt;&lt; XML_TAG_OPEN_END
</div>
<div class="code">                       &lt;&lt; endl;
</div>
<div class="code">          	  module_xml_str.Procedural_Detail( &nbsp;mod_ptr&nbsp;);
</div>
<div class="code">                    module_xml_str.fstr
</div>
<div class="code">                       &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; PROCDET_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END
</div>
<div class="code">                       &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">                    module_xml_str.fstr
</div>
<div class="code">                       &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; STRUCTDET_NODE_NAME &lt;&lt; XML_TAG_OPEN_END
</div>
<div class="code">                       &lt;&lt; endl;
</div>
<div class="code">          	  module_xml_str.Structural_Detail( &nbsp;mod_ptr&nbsp;);
</div>
<div class="code">                    module_xml_str.fstr
</div>
<div class="code">                       &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; STRUCTDET_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END
</div>
<div class="code">                       &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          	}
</div>
<div class="code">                else
</div>
<div class="code">          	{
</div>
<div class="code">          #if 0
</div>
<div class="code">          	  cerr &lt;&lt; mod_ptr-&gt;module_type &lt;&lt; " " &lt;&lt; mod_ptr-&gt;key( &nbsp;&nbsp;)
</div>
<div class="code">          	       &lt;&lt; " is trivial" &lt;&lt; endl;
</div>
<div class="code">          #endif
</div>
<div class="code">          	}
</div>
<div class="code">                mod_ptr=prjptr-&gt;module_table.next_item( &nbsp;&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000698"></a>     698  void CCCC_Xml_Stream::Module_Detail( &nbsp;CCCC_Module *module_ptr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // this function generates the contents of the table of definition
</div>
<div class="code">            // and declaration extents for a single module
</div>
<div class="code">          
</div>
<div class="code">            // the output needs to be enveloped in a pair of &lt;TABLE&gt;&lt;/TABLE&gt; tags
</div>
<div class="code">            // these have not been put within the function because it is designed
</div>
<div class="code">            // to be used in two contexts:
</div>
<div class="code">            // 1. within the Separate_Modules function, &nbsp; wrapped directly in the table
</div>
<div class="code">            //    tags
</div>
<div class="code">            // 2. within the Module_Detail function, &nbsp; where the table tags are
</div>
<div class="code">            //    around the output of many calls to this function ( &nbsp;not yet implemented&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Record::Extent_Table::iterator eIter = module_ptr-&gt;extent_table.begin( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;eIter!=module_ptr-&gt;extent_table.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">            {
</div>
<div class="code">               CCCC_Extent *ext_ptr=( &nbsp;*eIter&nbsp;).second;
</div>
<div class="code">               Put_Extent_Node( &nbsp;*ext_ptr, &nbsp;0, &nbsp;true&nbsp;);
</div>
<div class="code">               int loc=ext_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;);
</div>
<div class="code">               int mvg=ext_ptr-&gt;get_count( &nbsp;COUNT_TAG_CYCLOMATIC_NUMBER&nbsp;);
</div>
<div class="code">               int com=ext_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_COMMENT&nbsp;);
</div>
<div class="code">               CCCC_Metric mloc( &nbsp;loc, &nbsp;"LOCf"&nbsp;);
</div>
<div class="code">               CCCC_Metric mmvg( &nbsp;mvg, &nbsp;"MVGf"&nbsp;);
</div>
<div class="code">               CCCC_Metric ml_c( &nbsp;loc, &nbsp;com, &nbsp;"L_C"&nbsp;);
</div>
<div class="code">               CCCC_Metric mm_c( &nbsp;mvg, &nbsp;com, &nbsp;"M_C"&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">               Put_Metric_Node( &nbsp;LOC_NODE_NAME, &nbsp;mloc&nbsp;);
</div>
<div class="code">               Put_Metric_Node( &nbsp;MVG_NODE_NAME, &nbsp;mmvg&nbsp;);
</div>
<div class="code">               Put_Metric_Node( &nbsp;COM_NODE_NAME, &nbsp;com&nbsp;);
</div>
<div class="code">               Put_Metric_Node( &nbsp;LOCPERCOM_NODE_NAME, &nbsp;ml_c&nbsp;);
</div>
<div class="code">               Put_Metric_Node( &nbsp;MVGPERCOM_NODE_NAME, &nbsp;mm_c&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">               eIter++;
</div>
<div class="code">            }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000734"></a>     734  void CCCC_Xml_Stream::Procedural_Detail( &nbsp;CCCC_Module *module_ptr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // this function generates the contents of the procedural detail table
</div>
<div class="code">            // relating to a single module
</div>
<div class="code">          
</div>
<div class="code">            // the output needs to be enveloped in a pair of &lt;TABLE&gt;&lt;/TABLE&gt; tags
</div>
<div class="code">            // these have not been put within the function because it is designed
</div>
<div class="code">            // to be used in two contexts:
</div>
<div class="code">            // 1. within the Separate_Modules function, &nbsp; wrapped directly in the table
</div>
<div class="code">            //    tags
</div>
<div class="code">            // 2. within the Procedural_Detail function, &nbsp; where the table tags are
</div>
<div class="code">            //    around the output of many calls to this function
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Module::member_map_t::iterator iter = module_ptr-&gt;member_map.begin( &nbsp;&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">                while( &nbsp;iter!=module_ptr-&gt;member_map.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">                    fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; MEMBER_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          	  CCCC_Member *mem_ptr=( &nbsp;*iter&nbsp;).second;
</div>
<div class="code">          	  Put_Label_Node( &nbsp;NAME_NODE_NAME, &nbsp;mem_ptr-&gt;name( &nbsp;nlLOCAL&nbsp;).c_str( &nbsp;&nbsp;), &nbsp;0, &nbsp;"", &nbsp;"", &nbsp;mem_ptr&nbsp;);
</div>
<div class="code">          	  int loc=mem_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;);
</div>
<div class="code">          	  int mvg=mem_ptr-&gt;get_count( &nbsp;COUNT_TAG_CYCLOMATIC_NUMBER&nbsp;);
</div>
<div class="code">          	  int com=mem_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_COMMENT&nbsp;);
</div>
<div class="code">          	  CCCC_Metric mloc( &nbsp;loc, &nbsp;"LOCf"&nbsp;);
</div>
<div class="code">          	  CCCC_Metric mmvg( &nbsp;mvg, &nbsp;"MVGf"&nbsp;);
</div>
<div class="code">          	  CCCC_Metric ml_c( &nbsp;loc, &nbsp;com, &nbsp;"L_C"&nbsp;);
</div>
<div class="code">          	  CCCC_Metric mm_c( &nbsp;mvg, &nbsp;com, &nbsp;"M_C"&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">                    Put_Metric_Node( &nbsp;LOC_NODE_NAME, &nbsp;mloc&nbsp;);
</div>
<div class="code">                    Put_Metric_Node( &nbsp;MVG_NODE_NAME, &nbsp;mmvg&nbsp;);
</div>
<div class="code">                    Put_Metric_Node( &nbsp;COM_NODE_NAME, &nbsp;com&nbsp;);
</div>
<div class="code">                    Put_Metric_Node( &nbsp;LOCPERCOM_NODE_NAME, &nbsp;ml_c&nbsp;);
</div>
<div class="code">                    Put_Metric_Node( &nbsp;MVGPERCOM_NODE_NAME, &nbsp;mm_c&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  iter++;
</div>
<div class="code">          
</div>
<div class="code">                    fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; MEMBER_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">          	}
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000775"></a>     775  void CCCC_Xml_Stream::Structural_Detail( &nbsp;CCCC_Module *module_ptr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; MODULE_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">            Put_Label_Node( &nbsp;NAME_NODE_NAME, &nbsp;module_ptr-&gt;name( &nbsp;nlSIMPLE&nbsp;).c_str( &nbsp;&nbsp;), &nbsp; 0, &nbsp; "", &nbsp;""&nbsp;);
</div>
<div class="code">            Put_Structural_Details_Node( &nbsp;module_ptr, &nbsp; prjptr, &nbsp; rmeCLIENT, &nbsp; nlCLIENT&nbsp;);
</div>
<div class="code">            Put_Structural_Details_Node( &nbsp;module_ptr, &nbsp; prjptr, &nbsp; rmeSUPPLIER, &nbsp; nlSUPPLIER&nbsp;);
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; MODULE_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000784"></a>     784  void CCCC_Xml_Stream::Module_Summary( &nbsp;CCCC_Module *module_ptr&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // calculate the counts on which all displayed data will be based
</div>
<div class="code">            // int nof=module_ptr-&gt;member_table.records( &nbsp;&nbsp;); // Number of functions
</div>
<div class="code">            int nof=0;
</div>
<div class="code">            int loc=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_CODE&nbsp;);
</div>
<div class="code">            int mvg=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_CYCLOMATIC_NUMBER&nbsp;);
</div>
<div class="code">            int com=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_LINES_OF_COMMENT&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            // the variants of IF4 measure information flow and couplings
</div>
<div class="code">            int if4=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4&nbsp;);
</div>
<div class="code">            int if4v=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4 COUNT_TAG_VISIBLE_SUFFIX&nbsp;);
</div>
<div class="code">            int if4c=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_INTERMODULE_COMPLEXITY4 COUNT_TAG_CONCRETE_SUFFIX&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            int wmc1=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_WEIGHTED_METHODS_PER_CLASS_UNITY&nbsp;);
</div>
<div class="code">            int wmcv=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_WEIGHTED_METHODS_PER_CLASS COUNT_TAG_VISIBLE_SUFFIX&nbsp;);
</div>
<div class="code">            int dit=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_INHERITANCE_TREE_DEPTH&nbsp;);
</div>
<div class="code">            int noc=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_NUMBER_OF_CHILDREN&nbsp;);
</div>
<div class="code">            int cbo=module_ptr-&gt;get_count( &nbsp;COUNT_TAG_COUPLING_BETWEEN_OBJECTS&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_OPEN_BEGIN &lt;&lt; MODSUM_NODE_NAME &lt;&lt; XML_TAG_OPEN_END &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            Put_Metric_Node( &nbsp;LOC_NODE_NAME, &nbsp;loc, &nbsp;"LOCm"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;LOCPERMEM_NODE_NAME, &nbsp;loc, &nbsp;nof, &nbsp;"LOCg"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;MVG_NODE_NAME, &nbsp;mvg, &nbsp;"MVGm"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;MVGPERMEM_NODE_NAME, &nbsp;mvg, &nbsp;nof, &nbsp;"MVGf"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;LOC_NODE_NAME, &nbsp;com, &nbsp;"COMm"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;LOCPERMEM_NODE_NAME, &nbsp;com, &nbsp;nof, &nbsp;"8.3"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;LOCPERCOM_NODE_NAME, &nbsp;loc, &nbsp;com, &nbsp;"L_C"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;MVGPERCOM_NODE_NAME, &nbsp;mvg, &nbsp;com, &nbsp;"M_C"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;WMC1_NODE_NAME, &nbsp;wmc1&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;WMCV_NODE_NAME, &nbsp;wmcv&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;DIT_NODE_NAME, &nbsp;dit&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;NOC_NODE_NAME, &nbsp;noc&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;CBO_NODE_NAME, &nbsp;cbo&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;IF4_NODE_NAME, &nbsp;if4, &nbsp;1, &nbsp;"IF4"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;IF4PERMEM_NODE_NAME, &nbsp;if4, &nbsp;nof, &nbsp;"8.3"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;IF4VIS_NODE_NAME, &nbsp;if4v, &nbsp;1, &nbsp;"IF4v"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;IF4VISPERMEM_NODE_NAME, &nbsp;if4v, &nbsp;nof, &nbsp;"8.3"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;IF4CON_NODE_NAME, &nbsp;if4c, &nbsp;1, &nbsp;"IF4c"&nbsp;);
</div>
<div class="code">            Put_Metric_Node( &nbsp;IF4CONPERMEM_NODE_NAME, &nbsp;if4c, &nbsp;nof, &nbsp;"8.3"&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            fstr &lt;&lt; XML_TAG_CLOSE_BEGIN &lt;&lt; MODSUM_NODE_NAME &lt;&lt; XML_TAG_CLOSE_END &lt;&lt; endl;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000831"></a>     831  void CCCC_Xml_Stream::Source_Listing( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          #if 0
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000836"></a>     836  static string pad_string( &nbsp;int target_width, &nbsp; string the_string, &nbsp; string padding&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int spaces_required=target_width-the_string.size( &nbsp;&nbsp;);
</div>
<div class="code">            string pad_string;
</div>
<div class="code">            while( &nbsp;spaces_required&gt;0&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                pad_string+=padding;
</div>
<div class="code">                spaces_required--;
</div>
<div class="code">              }
</div>
<div class="code">            return pad_string+the_string;
</div>
<div class="code">          }
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          #ifdef UNIT_TEST
</div>
<div class="code"><a name="./cccc/cccc_xml.cc:00000852"></a>     852  int main( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            CCCC_Project *prj_ptr=test_project_ptr( &nbsp;&nbsp;);
</div>
<div class="code">            CCCC_Xml_Stream os( &nbsp;*prj_ptr, &nbsp;"cccc.htm", &nbsp;"."&nbsp;);
</div>
<div class="code">            return 0;
</div>
<div class="code">          }
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./cccc/ccccmain.cc"></a><h1>./cccc/ccccmain.cc</h1>
<div class="code"><a name="./cccc/ccccmain.cc:00000001"></a>       1  // ccccmain.cc
</div>
<div class="code">          // command line interface implementation for the cccc project
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc.h"
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_ver.h"
</div>
<div class="code">          
</div>
<div class="code">          #include &lt;fstream&gt;
</div>
<div class="code">          #include &lt;list&gt;
</div>
<div class="code">          #include &lt;iterator&gt;
</div>
<div class="code">          
</div>
<div class="code">          #ifdef _WIN32
</div>
<div class="code">          #include &lt;direct.h&gt;
</div>
<div class="code">          #include &lt;io.h&gt;
</div>
<div class="code">          #define HANDLE intptr_t
</div>
<div class="code">          #define INVALID_HANDLE_VALUE -1
</div>
<div class="code">          #else
</div>
<div class="code">          #include &lt;sys/stat.h&gt;
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          #include "cccc_itm.h"
</div>
<div class="code">          #include "cccc_opt.h"
</div>
<div class="code">          #include "cccc_met.h"
</div>
<div class="code">          #include "cccc_db.h"
</div>
<div class="code">          #include "cccc_utl.h"
</div>
<div class="code">          #include "cccc_htm.h"
</div>
<div class="code">          #include "cccc_xml.h"
</div>
<div class="code">          
</div>
<div class="code">          // support for languages is now a compile-time option
</div>
<div class="code">          #ifdef CC_INCLUDED
</div>
<div class="code">          #include "CParser.h"
</div>
<div class="code">          #include "CLexer.h"
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          #ifdef JAVA_INCLUDED
</div>
<div class="code">          #include "JParser.h"
</div>
<div class="code">          #include "JLexer.h"
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          #ifdef ADA_INCLUDED
</div>
<div class="code">          #include "AdaPrser.h"
</div>
<div class="code">          #include "ALexer.h"
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          #define NEW_PAGE "\f\n"
</div>
<div class="code">          
</div>
<div class="code">          CCCC_Project *prj=NULL;
</div>
<div class="code">          int DebugMask=0;
</div>
<div class="code">          int dont_free=0;
</div>
<div class="code">          
</div>
<div class="code">          char *skip_identifiers[SKIP_IDENTIFIERS_ARRAY_SIZE];
</div>
<div class="code">          
</div>
<div class="code">          #if defined( &nbsp;_WIN32&nbsp;) &amp;&amp; defined( &nbsp;__GNUG__&nbsp;) 
</div>
<div class="code">          // Cygnus gcc for Win32 B19 will try to expand wildcards that are given at
</div>
<div class="code">          // the commandline. Sadly this "globbing" will not work the way it is 
</div>
<div class="code">          // supposed in Win32, &nbsp; but luckily the whole globbing can be disabled by 
</div>
<div class="code">          // defining the following variable: 
</div>
<div class="code">          int _CRT_glob = 0;
</div>
<div class="code">          #endif
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">          ** global variables to hold default values for various things
</div>
<div class="code">          */
</div>
<div class="code">          string current_filename, &nbsp; current_rule, &nbsp; parse_language;
</div>
<div class="code">          
</div>
<div class="code">          // class Main encapsulates the top level of control for the program
</div>
<div class="code">          // including command line handling
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000071"></a>      71  class Main 
</div>
<div class="code">          {
</div>
<div class="code">            // most of the data members of this class are either set
</div>
<div class="code">            // by default or gleaned from the command line
</div>
<div class="code">          
</div>
<div class="code">          // each of the data members of type string or int can be 
</div>
<div class="code">          // set by a command line flag of the type --&lt;member name&gt;=&lt;value&gt;
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000079"></a>      79    string outdir;
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000080"></a>      80    string db_infile;
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000081"></a>      81    string db_outfile;
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000082"></a>      82    string opt_infile;
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000083"></a>      83    string opt_outfile;
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000084"></a>      84    string html_outfile;
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000085"></a>      85    string xml_outfile;
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000086"></a>      86    string lang;
</div>
<div class="code">            int report_mask; 
</div>
<div class="code">            int debug_mask;
</div>
<div class="code">            int files_parsed;
</div>
<div class="code">          
</div>
<div class="code">            // As we gather up the list of files to be processed
</div>
<div class="code">            // we work out and record the appropriate language to 
</div>
<div class="code">            // use for each.
</div>
<div class="code">            typedef std::pair&lt;string, &nbsp;string&gt; file_entry;
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000095"></a>      95    std::list&lt;file_entry&gt; file_list;
</div>
<div class="code">          
</div>
<div class="code">          // this function encapsulates adding an argument to the file_list
</div>
<div class="code">          // for the time being, &nbsp; on Win32 only, &nbsp; it also performs filename globbing
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000099"></a>      99    void AddFileArgument( &nbsp;const string&amp;&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          public:
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000103"></a>     103    Main( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000104"></a>     104    void HandleArgs( &nbsp;int argc, &nbsp; char**argv&nbsp;);
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000105"></a>     105    void HandleDebugOption( &nbsp;const string&amp;&nbsp;);
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000106"></a>     106    void HandleReportOption( &nbsp;const string&amp;&nbsp;);
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000107"></a>     107    void PrintCredits( &nbsp;ostream&amp; os&nbsp;);
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000108"></a>     108    void PrintUsage( &nbsp;ostream&amp; os&nbsp;);
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000109"></a>     109    int ParseFiles( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000110"></a>     110    int DumpDatabase( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000111"></a>     111    int LoadDatabase( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000112"></a>     112    void GenerateHtml( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000113"></a>     113    void GenerateXml( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000114"></a>     114    void DescribeOutput( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000115"></a>     115    int filesParsed( &nbsp;&nbsp;);
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000117"></a>     117    friend int main( &nbsp;int argc, &nbsp; char** argv&nbsp;);
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          Main *app=NULL;
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000122"></a>     122  Main::Main( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            report_mask=0xFFFF&amp;( &nbsp;~( &nbsp;rtPROC2|rtSTRUCT2&nbsp;)&nbsp;) ;  
</div>
<div class="code">            debug_mask=0;
</div>
<div class="code">            files_parsed=0;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000129"></a>     129  void Main::HandleArgs( &nbsp;int argc, &nbsp; char **argv&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            bool accepting_options=true;
</div>
<div class="code">          
</div>
<div class="code">            for( &nbsp;int i=1; i&lt;argc; i++&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                string next_arg=argv[i];
</div>
<div class="code">                if( &nbsp;
</div>
<div class="code">          	 ( &nbsp;accepting_options==false&nbsp;) ||
</div>
<div class="code">          	 ( &nbsp;next_arg.substr( &nbsp;0, &nbsp;2&nbsp;)!="--"&nbsp;)
</div>
<div class="code">          	 &nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  // normally this will be a single file name, &nbsp; but 
</div>
<div class="code">          	  // the function below also encapsulates handling of 
</div>
<div class="code">          	  // globbing ( &nbsp;only required under Win32&nbsp;) and
</div>
<div class="code">          	  // the conventional interpretation of '-' to mean
</div>
<div class="code">          	  // read a list of files from standard input
</div>
<div class="code">          	  AddFileArgument( &nbsp;next_arg&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">                else if( &nbsp;next_arg=="--"&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  // we support the conventional use of a bare -- to turn
</div>
<div class="code">          	  // off option processing and allow filenames that look like
</div>
<div class="code">          	  // options to be accepted
</div>
<div class="code">          	  accepting_options=false;
</div>
<div class="code">          	}
</div>
<div class="code">                else if( &nbsp;next_arg=="--help"&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  PrintUsage( &nbsp;cout&nbsp;);
</div>
<div class="code">          	  exit( &nbsp;1&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">                else
</div>
<div class="code">          	{
</div>
<div class="code">          	  // the options below this point are all of the form --opt=val, &nbsp;
</div>
<div class="code">          	  // so we parse the argument to find the assignment 
</div>
<div class="code">          	  unsigned int assignment_pos=next_arg.find( &nbsp;"="&nbsp;);
</div>
<div class="code">          	  if( &nbsp;assignment_pos==string::npos&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      cerr &lt;&lt; "Unexpected option " &lt;&lt; next_arg &lt;&lt; endl;
</div>
<div class="code">          	      PrintUsage( &nbsp;cerr&nbsp;);
</div>
<div class="code">          	      exit( &nbsp;2&nbsp;);
</div>
<div class="code">          	    }
</div>
<div class="code">          	  else
</div>
<div class="code">          	    {
</div>
<div class="code">          	      string next_opt=next_arg.substr( &nbsp;0, &nbsp;assignment_pos&nbsp;);
</div>
<div class="code">          	      string next_val=next_arg.substr( &nbsp;assignment_pos+1&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	      if( &nbsp;next_opt=="--outdir"&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		  outdir=next_val;
</div>
<div class="code">          		}
</div>
<div class="code">          	      else if( &nbsp;next_opt=="--db_infile"&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		  db_infile=next_val;
</div>
<div class="code">          		}
</div>
<div class="code">          	      else if( &nbsp;next_opt=="--db_outfile"&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		  db_outfile=next_val;
</div>
<div class="code">          		}
</div>
<div class="code">          	      else if( &nbsp;next_opt=="--opt_infile"&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		  opt_infile=next_val;
</div>
<div class="code">          		}
</div>
<div class="code">          	      else if( &nbsp;next_opt=="--opt_outfile"&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		  opt_outfile=next_val;
</div>
<div class="code">          		}
</div>
<div class="code">          	      else if( &nbsp;next_opt=="--html_outfile"&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		  html_outfile=next_val;
</div>
<div class="code">          		}
</div>
<div class="code">          	      else if( &nbsp;next_opt=="--xml_outfile"&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		  xml_outfile=next_val;
</div>
<div class="code">          		}
</div>
<div class="code">          
</div>
<div class="code">          	      else if( &nbsp;next_opt=="--lang"&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		  lang=next_val;
</div>
<div class="code">          		}
</div>
<div class="code">          	      else if( &nbsp;next_opt=="--report_mask"&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		  // The report option may either be an integer flag vector
</div>
<div class="code">          		  // in numeric format ( &nbsp;including hex&nbsp;) or may be a string of
</div>
<div class="code">          		  // characters ( &nbsp;see HandleReportOption for what they mean&nbsp;).
</div>
<div class="code">          		  HandleReportOption( &nbsp;next_val.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          		}
</div>
<div class="code">          	      else if( &nbsp;next_opt=="--debug_mask"&nbsp;)
</div>
<div class="code">          		{
</div>
<div class="code">          		  // The report option may either be an integer flag vector
</div>
<div class="code">          		  // in numeric format ( &nbsp;including hex&nbsp;) or may be a string of
</div>
<div class="code">          		  // characters ( &nbsp;see HandleDebugOption for what they mean&nbsp;).
</div>
<div class="code">          		  HandleDebugOption( &nbsp;next_val.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          		}
</div>
<div class="code">          	      else
</div>
<div class="code">          		{
</div>
<div class="code">          		  cerr &lt;&lt; "Unexpected option " &lt;&lt; next_opt &lt;&lt; endl;
</div>
<div class="code">          		  PrintUsage( &nbsp;cerr&nbsp;);
</div>
<div class="code">          		  exit( &nbsp;3&nbsp;);
</div>
<div class="code">          		}
</div>
<div class="code">          	    }
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            // we fill in defaults for things which have not been set
</div>
<div class="code">            if( &nbsp;outdir==""&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                outdir=".cccc";
</div>
<div class="code">              }
</div>
<div class="code">            if( &nbsp;db_outfile==""&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                db_outfile=outdir+"/cccc.db";
</div>
<div class="code">              }
</div>
<div class="code">            if( &nbsp;html_outfile==""&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                html_outfile=outdir+"/cccc.html";
</div>
<div class="code">              }
</div>
<div class="code">            if( &nbsp;xml_outfile==""&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                xml_outfile=outdir+"/cccc.xml";
</div>
<div class="code">              }
</div>
<div class="code">            if( &nbsp;opt_outfile==""&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                opt_outfile=outdir+"/cccc.opt";
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            // the other strings all default to empty values
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;opt_infile==""&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Options::Load_Options( &nbsp;&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">                // save the options so that they can be edited
</div>
<div class="code">                CCCC_Options::Save_Options( &nbsp;opt_outfile&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">                CCCC_Options::Load_Options( &nbsp;opt_infile&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000271"></a>     271  void Main::AddFileArgument( &nbsp;const string&amp; file_arg&nbsp;) 
</div>
<div class="code">          {
</div>
<div class="code">            if( &nbsp;file_arg=="-"&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                /*
</div>
<div class="code">                ** add files listed on standard input to the list of files 
</div>
<div class="code">                ** to be processed
</div>
<div class="code">                */
</div>
<div class="code">                while( &nbsp;!std::cin.eof( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  string filename;
</div>
<div class="code">          	  std::cin &gt;&gt; filename;
</div>
<div class="code">          	  file_entry file_entry( &nbsp;filename, &nbsp;lang&nbsp;);
</div>
<div class="code">          	  file_list.push_back( &nbsp;file_entry&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">            else
</div>
<div class="code">              {
</div>
<div class="code">          
</div>
<div class="code">          #ifdef _WIN32
</div>
<div class="code">                /*
</div>
<div class="code">                ** In Win32 we will have to expand all wildcards ourself, &nbsp; because the
</div>
<div class="code">                ** shell won't do this for us.
</div>
<div class="code">                ** This code reworked for 3.1.1 because we are now using the Visual C++ 2003
</div>
<div class="code">                ** Toolkit, &nbsp; which does not provide the same APIs as Visual Studio 5/6.
</div>
<div class="code">                */
</div>
<div class="code">                _finddata_t fd;
</div>
<div class="code">                HANDLE sh = _findfirst( &nbsp;file_arg.c_str( &nbsp;&nbsp;), &nbsp; &amp;fd&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">                // 3.pre40
</div>
<div class="code">                // I discovered ( &nbsp;by behaviour, &nbsp; not documentation&nbsp;) that
</div>
<div class="code">                // the structure returned by FindFirstFile etc. only includes
</div>
<div class="code">                // the final filename component, &nbsp; even if the search pattern
</div>
<div class="code">                // included a directory.
</div>
<div class="code">                // This is going to be a bugger to fix...
</div>
<div class="code">                string directoryPrefix;
</div>
<div class="code">                size_t directoryPrefixLength = file_arg.find_last_of( &nbsp;"/\\"&nbsp;);
</div>
<div class="code">                if( &nbsp;directoryPrefixLength!=string::npos&nbsp;)
</div>
<div class="code">                {
</div>
<div class="code">                  directoryPrefix = string( &nbsp;file_arg, &nbsp;0, &nbsp;directoryPrefixLength+1&nbsp;);
</div>
<div class="code">                }
</div>
<div class="code">                // Was it as easy as that?...
</div>
<div class="code">          
</div>
<div class="code">                int findnextReturnValue = 0;
</div>
<div class="code">                while ( &nbsp;findnextReturnValue==0&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  string sFileName=directoryPrefix;
</div>
<div class="code">                    sFileName.append( &nbsp;fd.name&nbsp;);
</div>
<div class="code">          	  file_entry file_entry( &nbsp;sFileName, &nbsp;lang&nbsp;);
</div>
<div class="code">          	  file_list.push_back( &nbsp;file_entry&nbsp;);
</div>
<div class="code">          	  findnextReturnValue = _findnext( &nbsp;sh, &nbsp; &amp;fd&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">                _findclose( &nbsp;sh&nbsp;);
</div>
<div class="code">          #else
</div>
<div class="code">                file_entry file_entry( &nbsp;file_arg, &nbsp;lang&nbsp;);
</div>
<div class="code">                file_list.push_back( &nbsp;file_entry&nbsp;);
</div>
<div class="code">                cout &lt;&lt; file_arg &lt;&lt; endl;
</div>
<div class="code">          #endif      
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">          ** method to parse all of the supplied list of files
</div>
<div class="code">          */
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000336"></a>     336  int Main::ParseFiles( &nbsp;&nbsp;) 
</div>
<div class="code">          {
</div>
<div class="code">            FILE *f;
</div>
<div class="code">            
</div>
<div class="code">            std::list&lt;file_entry&gt;::iterator file_iterator=file_list.begin( &nbsp;&nbsp;);
</div>
<div class="code">            while( &nbsp;file_iterator!=file_list.end( &nbsp;&nbsp;)&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          	  const file_entry &amp;entry=*file_iterator;
</div>
<div class="code">          
</div>
<div class="code">                string filename=entry.first;
</div>
<div class="code">                string file_language=entry.second;
</div>
<div class="code">                ParseStore ps( &nbsp;filename&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">                // The following objects are used to assist in the parsing 
</div>
<div class="code">                // process.
</div>
<div class="code">          
</div>
<div class="code">                if( &nbsp;file_language.size( &nbsp;&nbsp;)==0&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          	  file_language=CCCC_Options::getFileLanguage( &nbsp;filename&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">          
</div>
<div class="code">                // CCCC supports a convention that the language may include an
</div>
<div class="code">                // embedded '.', &nbsp; in which case the part before the . controls 
</div>
<div class="code">                // which parser runs, &nbsp; while the whole can be examined inside
</div>
<div class="code">                // the parser to check for special dialect handling.
</div>
<div class="code">                unsigned int period_pos=file_language.find( &nbsp;"."&nbsp;);
</div>
<div class="code">                string base_language=file_language.substr( &nbsp;0, &nbsp;period_pos&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">                f=fopen( &nbsp;filename.c_str( &nbsp;&nbsp;), &nbsp;"r"&nbsp;);
</div>
<div class="code">                if( &nbsp; f == NULL &nbsp;) 
</div>
<div class="code">          	{
</div>
<div class="code">          	  cerr &lt;&lt; "Couldn't open " &lt;&lt; filename &lt;&lt; endl;
</div>
<div class="code">          	} else {
</div>
<div class="code">          	  DLGFileInput in( &nbsp;f&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	  // show progress 
</div>
<div class="code">          	  cerr &lt;&lt; "Processing " &lt;&lt; filename;
</div>
<div class="code">          
</div>
<div class="code">          	  // The first case is just to allow symetric handling
</div>
<div class="code">          	  // of the optional inclusion of support for each language
</div>
<div class="code">          	  if( &nbsp;0&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	    }
</div>
<div class="code">          #ifdef CC_INCLUDED
</div>
<div class="code">          	  else if( &nbsp;
</div>
<div class="code">          	     ( &nbsp;base_language=="c++"&nbsp;) ||
</div>
<div class="code">          	     ( &nbsp;base_language=="c"&nbsp;) 
</div>
<div class="code">          	     &nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      cerr &lt;&lt; " as C/C++ ( &nbsp;" &lt;&lt; file_language &lt;&lt; "&nbsp;)" 
</div>
<div class="code">          		   &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          	      CLexer theLexer( &nbsp;&amp;in&nbsp;);
</div>
<div class="code">          	      ANTLRTokenBuffer thePipe( &nbsp;&amp;theLexer&nbsp;);
</div>
<div class="code">          	      theLexer.setToken( &nbsp;&amp;currentLexerToken&nbsp;);
</div>
<div class="code">          	      CParser theParser( &nbsp;&amp;thePipe&nbsp;);
</div>
<div class="code">          	      ParseUtility pu( &nbsp;&amp;theParser&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	      theParser.init( &nbsp;filename, &nbsp;file_language&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	      // This function turns of the annoying "guess failed" messages
</div>
<div class="code">          	      // every time a syntactic predicate fails.
</div>
<div class="code">          	      // This message is enabled by default when PCCTS is run with
</div>
<div class="code">          	      // tracing turned on ( &nbsp;as it is by default in this application&nbsp;).
</div>
<div class="code">          	      // In the current case this is inappropriate as the C++ parser
</div>
<div class="code">          	      // uses guessing heavily to break ambiguities, &nbsp; and we expect 
</div>
<div class="code">          	      // large numbers of guesses to be tested and to fail.
</div>
<div class="code">          	      // This message and the flag which gates it were added around 
</div>
<div class="code">          	      // PCCTS 1.33 MR10. 
</div>
<div class="code">          	      // If you are building with an earlier version, &nbsp; this line should
</div>
<div class="code">          	      // cause an error and can safely be commented out.
</div>
<div class="code">          	      theParser.traceGuessOption( &nbsp;-1&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          	      theParser.start( &nbsp;&nbsp;);
</div>
<div class="code">                        files_parsed++;
</div>
<div class="code">          	    }
</div>
<div class="code">          #endif // CC_INCLUDED
</div>
<div class="code">          #ifdef JAVA_INCLUDED
</div>
<div class="code">          	  else if( &nbsp;base_language=="java"&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      cerr &lt;&lt; " as Java" &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          	      JLexer theLexer( &nbsp;&amp;in&nbsp;);
</div>
<div class="code">          	      ANTLRTokenBuffer thePipe( &nbsp;&amp;theLexer&nbsp;);
</div>
<div class="code">          	      theLexer.setToken( &nbsp;&amp;currentLexerToken&nbsp;);
</div>
<div class="code">          	      JParser theParser( &nbsp;&amp;thePipe&nbsp;);
</div>
<div class="code">          	      theParser.init( &nbsp;filename, &nbsp;file_language&nbsp;);
</div>
<div class="code">          	      theParser.traceGuessOption( &nbsp;-1&nbsp;);
</div>
<div class="code">          	      theParser.compilationUnit( &nbsp;&nbsp;);
</div>
<div class="code">                        files_parsed++;
</div>
<div class="code">          	    }
</div>
<div class="code">          #endif // JAVA_INCLUDED
</div>
<div class="code">          #ifdef ADA_INCLUDED
</div>
<div class="code">          	  else if( &nbsp;base_language=="ada"&nbsp;)
</div>
<div class="code">          	    {
</div>
<div class="code">          	      cerr &lt;&lt; " as Ada" &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">          	      ALexer theLexer( &nbsp;&amp;in&nbsp;);
</div>
<div class="code">          	      ANTLRTokenBuffer thePipe( &nbsp;&amp;theLexer&nbsp;);
</div>
<div class="code">          	      theLexer.setToken( &nbsp;&amp;currentLexerToken&nbsp;);
</div>
<div class="code">          	      AdaPrser theParser( &nbsp;&amp;thePipe&nbsp;);
</div>
<div class="code">          	      theParser.init( &nbsp;filename, &nbsp;file_language&nbsp;);
</div>
<div class="code">          	      theParser.traceGuessOption( &nbsp;-1&nbsp;);
</div>
<div class="code">          	      theParser.goal_symbol( &nbsp;&nbsp;);
</div>
<div class="code">                        files_parsed++;
</div>
<div class="code">          	    }
</div>
<div class="code">          #endif // ADA_INCLUDED
</div>
<div class="code">          	  else if( &nbsp;base_language==""&nbsp;)
</div>
<div class="code">          	  {
</div>
<div class="code">          		cerr &lt;&lt; " - no parseable language identified";		
</div>
<div class="code">          	  }
</div>
<div class="code">          	  else
</div>
<div class="code">          	    {
</div>
<div class="code">          	      cerr &lt;&lt; "Unexpected language " &lt;&lt; base_language.c_str( &nbsp;&nbsp;)
</div>
<div class="code">          		   &lt;&lt; " ( &nbsp;" &lt;&lt; file_language.c_str( &nbsp;&nbsp;) 
</div>
<div class="code">          		   &lt;&lt; "&nbsp;) for file " &lt;&lt; filename.c_str( &nbsp;&nbsp;) &lt;&lt; endl;
</div>
<div class="code">          	    }
</div>
<div class="code">          
</div>
<div class="code">          	  // close the file
</div>
<div class="code">          	  fclose( &nbsp;f&nbsp;);
</div>
<div class="code">          	}
</div>
<div class="code">          
</div>
<div class="code">                file_iterator++;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">            return 0;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000464"></a>     464  int Main::DumpDatabase( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            ofstream outfile( &nbsp;db_outfile.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            return prj-&gt;ToFile( &nbsp;outfile&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000470"></a>     470  int Main::LoadDatabase( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            int retval=0;
</div>
<div class="code">            if( &nbsp;db_infile!=""&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                ifstream infile( &nbsp;db_infile.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">                retval=prj-&gt;FromFile( &nbsp;infile&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            return retval;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000481"></a>     481  void Main::GenerateHtml( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            cerr &lt;&lt; endl &lt;&lt; "Generating HTML reports" &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Html_Stream::GenerateReports( &nbsp;prj, &nbsp;report_mask, &nbsp;html_outfile, &nbsp;outdir&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000489"></a>     489  void Main::GenerateXml( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            cerr &lt;&lt; endl &lt;&lt; "Generating XML reports" &lt;&lt; endl;
</div>
<div class="code">          
</div>
<div class="code">            CCCC_Xml_Stream::GenerateReports( &nbsp;prj, &nbsp;report_mask, &nbsp;xml_outfile, &nbsp;outdir&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000497"></a>     497  void Main::HandleDebugOption( &nbsp;const string&amp; arg&nbsp;) 
</div>
<div class="code">          {
</div>
<div class="code">            /*
</div>
<div class="code">            ** arg may either be a number, &nbsp; or a string of letters denoting
</div>
<div class="code">            ** facilities to be debugged.  
</div>
<div class="code">            ** the string of letters is the public way - allowing input of a 
</div>
<div class="code">            ** number is just there to support quickly adding a category of
</div>
<div class="code">            ** debug messages without having to change this file immediately
</div>
<div class="code">            */
</div>
<div class="code">            DebugMask=atoi( &nbsp;arg.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            for ( &nbsp;int i=0; arg[i]!='\0'; i++&nbsp;) 
</div>
<div class="code">              {
</div>
<div class="code">                switch ( &nbsp;arg[i]&nbsp;) {
</div>
<div class="code">                case 'p' :
</div>
<div class="code">          	DebugMask |= PARSER;
</div>
<div class="code">          	break;
</div>
<div class="code">          
</div>
<div class="code">                case 'l' :
</div>
<div class="code">          	DebugMask |= LEXER;
</div>
<div class="code">          	break;
</div>
<div class="code">          
</div>
<div class="code">                case 'c' :
</div>
<div class="code">          	DebugMask |= COUNTER;
</div>
<div class="code">          	break;
</div>
<div class="code">          
</div>
<div class="code">                case 'm' :
</div>
<div class="code">          	DebugMask |= MEMORY;
</div>
<div class="code">          	break;
</div>
<div class="code">          
</div>
<div class="code">                case 'x' :
</div>
<div class="code">                case 'X' :
</div>
<div class="code">          	DebugMask = 0xFF;
</div>
<div class="code">          	break;
</div>
<div class="code">                }
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000534"></a>     534  void Main::HandleReportOption( &nbsp;const string&amp; arg&nbsp;) {
</div>
<div class="code">            /*
</div>
<div class="code">            ** arg may either be a number, &nbsp; or a string of letters denoting
</div>
<div class="code">            ** reports to be generated  
</div>
<div class="code">            */
</div>
<div class="code">            report_mask=atoi( &nbsp;arg.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">            for ( &nbsp;int i=0; arg[i]!='\0'; i++&nbsp;) {
</div>
<div class="code">              switch ( &nbsp;arg[i]&nbsp;) {
</div>
<div class="code">          
</div>
<div class="code">              case 'c':
</div>
<div class="code">                report_mask |= rtCONTENTS;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case 's' :
</div>
<div class="code">                report_mask |= rtSUMMARY;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case 'p' :
</div>
<div class="code">                report_mask |= rtPROC1;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case 'P':
</div>
<div class="code">                report_mask |= rtPROC2;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case 'r' :
</div>
<div class="code">                report_mask |= rtSTRUCT1;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case 'R' :
</div>
<div class="code">                report_mask |= rtSTRUCT2;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case 'S' :
</div>
<div class="code">                report_mask |= rtSEPARATE_MODULES;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case 'o' :
</div>
<div class="code">                report_mask |= rtOODESIGN;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case 'L' : // for 'listing' as s and S for 'source' are already used
</div>
<div class="code">                report_mask |= rtSOURCE;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case 'j' :
</div>
<div class="code">                report_mask |= rtOTHER;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case 'h' :
</div>
<div class="code">                report_mask |= rtCCCC;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              case 't' :
</div>
<div class="code">                report_mask |= rtSHOW_GEN_TIME;
</div>
<div class="code">                break;
</div>
<div class="code">          
</div>
<div class="code">              default:
</div>
<div class="code">                cerr &lt;&lt; "Unexpected report requested:" &lt;&lt; arg[i] &lt;&lt; endl;
</div>
<div class="code">                PrintUsage( &nbsp;cerr&nbsp;);
</div>
<div class="code">                exit( &nbsp;-1&nbsp;);
</div>
<div class="code">              }
</div>
<div class="code">            }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">          ** giving credit where it is due
</div>
<div class="code">          */
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000602"></a>     602  void Main::PrintCredits( &nbsp;ostream&amp; os&nbsp;) 
</div>
<div class="code">          {
</div>
<div class="code">            // the principal purpose of the constructor is to set up the
</div>
<div class="code">            // two lots of boilerplate text that this class requires
</div>
<div class="code">            string version_string="Version ";
</div>
<div class="code">            version_string.append( &nbsp;CCCC_VERSION_STRING&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            const char *credit_strings[] =
</div>
<div class="code">            {
</div>
<div class="code">              "CCCC - a code counter for C and C++", &nbsp;
</div>
<div class="code">              "===================================", &nbsp;
</div>
<div class="code">              "", &nbsp;
</div>
<div class="code">              "A program to analyse C and C++ source code and report on", &nbsp;
</div>
<div class="code">              "some simple software metrics", &nbsp;
</div>
<div class="code">              version_string.c_str( &nbsp;&nbsp;), &nbsp;
</div>
<div class="code">              "Copyright Tim Littlefair, &nbsp; 1995, &nbsp; 1996, &nbsp; 1997, &nbsp; 1998, &nbsp; 1999, &nbsp; 2000", &nbsp; 
</div>
<div class="code">              "with contributions from Bill McLean, &nbsp; Herman Hueni, &nbsp; Lynn Wilson ", &nbsp; 
</div>
<div class="code">              "Peter Bell, &nbsp; Thomas Hieber and Kenneth H. Cox.", &nbsp; 
</div>
<div class="code">              "", &nbsp;
</div>
<div class="code">              "The development of this program was heavily dependent on", &nbsp;
</div>
<div class="code">              "the Purdue Compiler Construction Tool Set ( &nbsp;PCCTS&nbsp;) ", &nbsp;
</div>
<div class="code">              "by Terence Parr, &nbsp; Will Cohen, &nbsp; Hank Dietz, &nbsp; Russel Quoung, &nbsp;", &nbsp;
</div>
<div class="code">              "Tom Moog and others.", &nbsp;
</div>
<div class="code">              "", &nbsp;
</div>
<div class="code">              "CCCC comes with ABSOLUTELY NO WARRANTY.", &nbsp;
</div>
<div class="code">              "This is free software, &nbsp; and you are welcome to redistribute it", &nbsp;
</div>
<div class="code">              "under certain conditions.  See the file COPYING in the source", &nbsp;
</div>
<div class="code">              "code distribution for details.", &nbsp;
</div>
<div class="code">              NULL
</div>
<div class="code">            };
</div>
<div class="code">            const char **string_ptr=credit_strings;
</div>
<div class="code">            while( &nbsp;*string_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                os &lt;&lt; *string_ptr &lt;&lt; endl;
</div>
<div class="code">                string_ptr++;
</div>
<div class="code">              }
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000642"></a>     642  void Main::DescribeOutput( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            if( &nbsp;files_parsed&gt;0&nbsp;)
</div>
<div class="code">            {
</div>
<div class="code">                // make sure the user knows where the real output went
</div>
<div class="code">                // make sure the user knows where the real output went
</div>
<div class="code">                cerr &lt;&lt; endl 
</div>
<div class="code">                     &lt;&lt; "Primary HTML output is in " &lt;&lt; html_outfile &lt;&lt; endl;
</div>
<div class="code">                if( &nbsp;report_mask &amp; rtSEPARATE_MODULES&nbsp;)
</div>
<div class="code">                { 
</div>
<div class="code">                   cerr &lt;&lt; "Detailed HTML reports on modules and source are in " &lt;&lt; outdir &lt;&lt; endl;
</div>
<div class="code">                }
</div>
<div class="code">                cerr &lt;&lt; "Primary XML output is in " &lt;&lt; xml_outfile &lt;&lt; endl ;
</div>
<div class="code">                if( &nbsp;report_mask &amp; rtSEPARATE_MODULES&nbsp;)
</div>
<div class="code">                { 
</div>
<div class="code">                   cerr &lt;&lt; "Detailed XML reports on modules are in " &lt;&lt; outdir &lt;&lt; endl;
</div>
<div class="code">                }
</div>
<div class="code">                cerr &lt;&lt; "Database dump is in " &lt;&lt; db_outfile &lt;&lt; endl &lt;&lt; endl;
</div>
<div class="code">            }
</div>
<div class="code">            else
</div>
<div class="code">            {
</div>
<div class="code">                cerr &lt;&lt; endl &lt;&lt; "No files parsed on this run" &lt;&lt; endl &lt;&lt; endl;
</div>
<div class="code">            }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          /* 
</div>
<div class="code">          ** the usage message is printed on cerr if unexpected options are found, &nbsp;
</div>
<div class="code">          ** and on cout if option --help is found.  
</div>
<div class="code">          */
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000671"></a>     671  void Main::PrintUsage( &nbsp;ostream&amp; os&nbsp;) 
</div>
<div class="code">          {
</div>
<div class="code">            const char *usage_strings[] = 
</div>
<div class="code">            { 
</div>
<div class="code">              "Usage: ", &nbsp;
</div>
<div class="code">              "cccc [options] file1.c ...  ", &nbsp;
</div>
<div class="code">              "Process files listed on command line.", &nbsp;
</div>
<div class="code">              "If the filenames include '-', &nbsp; read a list of files from standard input.", &nbsp;
</div>
<div class="code">              "Command Line Options: ( &nbsp;default arguments/behaviour specified in braces&nbsp;)", &nbsp;
</div>
<div class="code">              "--help                   * generate this help message", &nbsp;
</div>
<div class="code">              "--outdir=&lt;dname&gt;         * directory for generated files {.cccc}", &nbsp;
</div>
<div class="code">              "--html_outfile=&lt;fname&gt;   * name of main HTML report {&lt;outdir&gt;/cccc.html}", &nbsp;
</div>
<div class="code">              "--xml_outfile=&lt;fname&gt;    * name of main XML report {&lt;outdir&gt;/cccc.xml}", &nbsp;
</div>
<div class="code">              "--db_infile=&lt;fname&gt;      * preload internal database from named file", &nbsp;
</div>
<div class="code">              "                           {empty file}", &nbsp;
</div>
<div class="code">              "--db_outfile=&lt;fname&gt;     * save internal database to file {&lt;outdir&gt;/cccc.db}", &nbsp;
</div>
<div class="code">              "--opt_infile=&lt;fname&gt;     * load options from named file {hard coded, &nbsp; see below}", &nbsp;
</div>
<div class="code">              "--opt_outfile=&lt;fname&gt;    * save options to named file {&lt;outdir&gt;/cccc.opt}", &nbsp;
</div>
<div class="code">              "--lang=&lt;string&gt;          * use language specified for files specified ", &nbsp;
</div>
<div class="code">              "                           after this option ( &nbsp;c, &nbsp;c++, &nbsp;ada, &nbsp;java, &nbsp; no default&nbsp;)", &nbsp;
</div>
<div class="code">              "--report_mask=&lt;hex&gt;      * control report content ", &nbsp;
</div>
<div class="code">              "--debug_mask=&lt;hex&gt;       * control debug output content ", &nbsp;
</div>
<div class="code">              "                           ( &nbsp;refer to ccccmain.cc for mask values&nbsp;)", &nbsp;
</div>
<div class="code">              "Refer to ccccmain.cc for usage of --report_mask and --debug_mask.", &nbsp;
</div>
<div class="code">              "Refer to cccc_opt.cc for hard coded default option values, &nbsp; including default ", &nbsp;
</div>
<div class="code">              "extension/language mapping and metric treatment thresholds.", &nbsp;
</div>
<div class="code">              NULL
</div>
<div class="code">            };
</div>
<div class="code">            const char **string_ptr=usage_strings;
</div>
<div class="code">            while( &nbsp;*string_ptr!=NULL&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                os &lt;&lt; *string_ptr &lt;&lt; endl;
</div>
<div class="code">                string_ptr++;
</div>
<div class="code">              }
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000707"></a>     707  int Main::filesParsed( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            return files_parsed;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code"><a name="./cccc/ccccmain.cc:00000712"></a>     712  int main( &nbsp;int argc, &nbsp; char **argv&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            app=new Main;
</div>
<div class="code">            prj=new CCCC_Project;
</div>
<div class="code">          
</div>
<div class="code">            // process command line
</div>
<div class="code">            app-&gt;HandleArgs( &nbsp;argc, &nbsp; argv&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            // If we are still running, &nbsp; acknowledge those who helped
</div>
<div class="code">            app-&gt;PrintCredits( &nbsp;cerr&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            cerr &lt;&lt; "Parsing" &lt;&lt; endl;
</div>
<div class="code">            CCCC_Record::set_active_project( &nbsp;prj&nbsp;);
</div>
<div class="code">            app-&gt;ParseFiles( &nbsp;&nbsp;);
</div>
<div class="code">            CCCC_Record::set_active_project( &nbsp;NULL&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">            if( &nbsp;app-&gt;filesParsed( &nbsp;&nbsp;)&gt;0&nbsp;)
</div>
<div class="code">            {
</div>
<div class="code">                prj-&gt;reindex( &nbsp;&nbsp;);
</div>
<div class="code">          #ifdef _WIN32
</div>
<div class="code">                _mkdir( &nbsp;app-&gt;outdir.c_str( &nbsp;&nbsp;)&nbsp;);
</div>
<div class="code">          #else
</div>
<div class="code">                mkdir( &nbsp;app-&gt;outdir.c_str( &nbsp;&nbsp;), &nbsp;0777&nbsp;);
</div>
<div class="code">          #endif
</div>
<div class="code">                app-&gt;DumpDatabase( &nbsp;&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">                // generate html output
</div>
<div class="code">                app-&gt;GenerateHtml( &nbsp;&nbsp;);
</div>
<div class="code">                app-&gt;GenerateXml( &nbsp;&nbsp;);
</div>
<div class="code">            }
</div>
<div class="code">          
</div>
<div class="code">            app-&gt;DescribeOutput( &nbsp;&nbsp;);
</div>
<div class="code">            delete app;
</div>
<div class="code">            delete prj;
</div>
<div class="code">          
</div>
<div class="code">            return 0;
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<a name="./test/prn1.cc"></a><h1>./test/prn1.cc</h1>
<div class="code"><a name="./test/prn1.cc:00000001"></a>       1  /* static */ int yadda( &nbsp;STATIC* new_static, &nbsp; ssim_func_port_handle func_port&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          #if !KC_USE_STATICS_VECTOR
</div>
<div class="code">             return X;
</div>
<div class="code">          #else
</div>
<div class="code">             return Y;
</div>
<div class="code">          #endif
</div>
<div class="code">          }
</div>
<a name="./test/prn10.cc"></a><h1>./test/prn10.cc</h1>
<div class="code"><a name="./test/prn10.cc:00000001"></a>       1  // prn10.cc
</div>
<div class="code">          // SourceForge bugtracker item 233584
</div>
<div class="code">          // submitted by Victor B Putz
</div>
<div class="code">          // Tests handling of data members and globals specified as 
</div>
<div class="code">          // 'const static' and 'static const' as both are accepted by GCC.
</div>
<div class="code">          
</div>
<div class="code">          const static char csNonMember;
</div>
<div class="code">          static const char scNonMember;
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/prn10.cc:00000010"></a>      10  class A 
</div>
<div class="code">          { 
</div>
<div class="code">              const static char csMember; 
</div>
<div class="code">              static const char scMember; 
</div>
<div class="code">          }; 
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./test/prn11.cc"></a><h1>./test/prn11.cc</h1>
<div class="code"><a name="./test/prn11.cc:00000001"></a>       1  // prn11.cc
</div>
<div class="code">          // SourceForge bug tracker item 233585
</div>
<div class="code">          // Submitted by Victor B Putz
</div>
<div class="code">          // Tests parsing of namespace declarations
</div>
<div class="code">          // I am not confident that the present counting rules applying
</div>
<div class="code">          // to this construct are optimal yet.
</div>
<div class="code">          
</div>
<div class="code">          namespace A 
</div>
<div class="code">          { 
</div>
<div class="code"><a name="./test/prn11.cc:00000010"></a>      10    void b( &nbsp; void &nbsp;); 
</div>
<div class="code">          }; 
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/prn11.cc:00000013"></a>      13  void A::b( &nbsp; void &nbsp;) 
</div>
<div class="code">          { 
</div>
<div class="code">          } 
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./test/prn12.cc"></a><h1>./test/prn12.cc</h1>
<div class="code"><a name="./test/prn12.cc:00000001"></a>       1  // prn12.cc
</div>
<div class="code">          // SourceForge bug tracker item 233587
</div>
<div class="code">          // Submitted by Victor B Putz
</div>
<div class="code">          // Tests parsing of negative numbers as initializers.
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/prn12.cc:00000006"></a>       6  class C 
</div>
<div class="code">          { 
</div>
<div class="code">              int a; 
</div>
<div class="code"><a name="./test/prn12.cc:00000009"></a>       9      C( &nbsp; void &nbsp;) : 
</div>
<div class="code">              e( &nbsp; -1 &nbsp;) {}; 
</div>
<div class="code">          }; 
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./test/prn2.cc"></a><h1>./test/prn2.cc</h1>
<div class="code"><a name="./test/prn2.cc:00000001"></a>       1  /*
</div>
<div class="code">           * A L F _ PRINT. C X X
</div>
<div class="code">           *
</div>
<div class="code">           * This file contains print routines for ALF.
</div>
<div class="code">           *
</div>
<div class="code">           * Copyright ( &nbsp;c&nbsp;) 1998, &nbsp; Sente Inc.
</div>
<div class="code">           *
</div>
<div class="code">           * $Id$
</div>
<div class="code">           */
</div>
<div class="code">          
</div>
<div class="code">          #include&lt;string.h&gt;
</div>
<div class="code">          #include "utils.h"
</div>
<div class="code">          #include "AlfObject.hxx"
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/prn2.cc:00000015"></a>      15  void alfPrintSpaces( &nbsp;int numTabs, &nbsp; FILE* fp&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          int numBlanks;
</div>
<div class="code">          for ( &nbsp;numBlanks = 0; numBlanks &lt; 4*numTabs; numBlanks++&nbsp;)
</div>
<div class="code">             fprintf( &nbsp;fp, &nbsp;"%c", &nbsp;' '&nbsp;);
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<a name="./test/prn3.cc"></a><h1>./test/prn3.cc</h1>
<div class="code"><a name="./test/prn3.cc:00000001"></a>       1  /*
</div>
<div class="code">           From: 
</div>
<div class="code">                 Ruppert &lt;ru@swb.siemens.de&gt;
</div>
<div class="code">           Reply-To: 
</div>
<div class="code">                 Ruppert &lt;ru@swb.siemens.de&gt;
</div>
<div class="code">           To: 
</div>
<div class="code">                 tim_littlefair@hotmail.com Save Address
</div>
<div class="code">           CC: 
</div>
<div class="code">                 ru@swb.siemens.de Save Address
</div>
<div class="code">           Subject: 
</div>
<div class="code">                 cccc-3.pre39: Parser errors
</div>
<div class="code">           Date: 
</div>
<div class="code">                 Tue, &nbsp; 23 May 2000 09:23:16 +0200 ( &nbsp;MET DST&nbsp;)
</div>
<div class="code">          Hi, &nbsp;
</div>
<div class="code">          
</div>
<div class="code">          I have just played around a bit with cccc-3.pre39 and tried
</div>
<div class="code">          to analyze a large body of C++ code with it. It worked quite
</div>
<div class="code">          well, &nbsp; and the results look quite useful.
</div>
<div class="code">          
</div>
<div class="code">          The parser emits, &nbsp; however, &nbsp; a number of syntax errors, &nbsp; which I could
</div>
<div class="code">          track to a few specific code constructs. These constructs are
</div>
<div class="code">          legal C/C++, &nbsp; but the cccc parser generates "syntax error" messages.
</div>
<div class="code">          
</div>
<div class="code">          I have stripped down the problems to the constructs in question;
</div>
<div class="code">          I enclose a small test program which exhibits all of them. I hope
</div>
<div class="code">          this is useful for fixing this.
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          Best Regards
</div>
<div class="code">          Dr. D.Ruppert
</div>
<div class="code">          RTS GmbH
</div>
<div class="code">          Schwieberdingen/Germany
</div>
<div class="code">          ru@swb.siemens.de
</div>
<div class="code">          
</div>
<div class="code">          */
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">            Problem with inline attribute in class header:
</div>
<div class="code">          
</div>
<div class="code">            Processing test.cc as C/C++ ( &nbsp;c++.ansi&nbsp;)
</div>
<div class="code">            test.cc( &nbsp;9&nbsp;) syntax error at token inline
</div>
<div class="code">            Parser context:
</div>
<div class="code">            test.cc( &nbsp;9&nbsp;): trying to match class_block_item_list at 'inline
</div>
<div class="code">            */
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/prn3.cc:00000047"></a>      47  class InlFunc
</div>
<div class="code">          {
</div>
<div class="code">            public:
</div>
<div class="code"><a name="./test/prn3.cc:00000050"></a>      50      InlFunc( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/prn3.cc:00000051"></a>      51      ~InlFunc( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/prn3.cc:00000052"></a>      52      inline getFunc( &nbsp;&nbsp;);
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">            Problem with Initialization by function invoc. at file scope:
</div>
<div class="code">          
</div>
<div class="code">            Processing test.cc as C/C++ ( &nbsp;c++.ansi&nbsp;)
</div>
<div class="code">            test.cc( &nbsp;2&nbsp;) syntax error at token ( &nbsp;
</div>
<div class="code">            Parser context:
</div>
<div class="code">            test.cc( &nbsp;2&nbsp;): trying to match instance_declaration at 'const
</div>
<div class="code">            */
</div>
<div class="code">          
</div>
<div class="code">          static const double d = sqrt( &nbsp;1.0 / 0.003&nbsp;);
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">            Problem with function pointer as class member:
</div>
<div class="code">            test.cc( &nbsp;6&nbsp;) syntax error at token int
</div>
<div class="code">            Parser context:
</div>
<div class="code">            test.cc( &nbsp;6&nbsp;): trying to match class_block_item_list at 'int
</div>
<div class="code">            */
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/prn3.cc:00000076"></a>      76  int getInt( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/prn3.cc:00000077"></a>      77  class FP
</div>
<div class="code">          {
</div>
<div class="code">            public:
</div>
<div class="code">              int ( &nbsp;*getInt&nbsp;)( &nbsp;&nbsp;);
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">            Problem with anonymous struct type:
</div>
<div class="code">            test.cc( &nbsp;5&nbsp;) syntax error at token struct
</div>
<div class="code">            Parser context:
</div>
<div class="code">            test.cc( &nbsp;5&nbsp;): trying to match class_block_item_list at 'struct
</div>
<div class="code">            */
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/prn3.cc:00000093"></a>      93  struct A
</div>
<div class="code">          {
</div>
<div class="code">              int a;
</div>
<div class="code">              struct
</div>
<div class="code">              {
</div>
<div class="code">                  double d;
</div>
<div class="code">                  float e;
</div>
<div class="code">              } myS;
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">            Problem with / in initializer for int:
</div>
<div class="code">            Processing test.cc as C/C++ ( &nbsp;c++.ansi&nbsp;)
</div>
<div class="code">            test.cc( &nbsp;1&nbsp;) syntax error at token /
</div>
<div class="code">            Parser context:
</div>
<div class="code">            test.cc( &nbsp;1&nbsp;): trying to match instance_declaration at 'const
</div>
<div class="code">            */
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          const int myInt = 10 / 4;
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">            Problem with literal 0. in float-Initializer:
</div>
<div class="code">          
</div>
<div class="code">             invalid token near line 2 ( &nbsp;text was '0.'&nbsp;)
</div>
<div class="code">             test.cc( &nbsp;2&nbsp;) syntax error at token ;
</div>
<div class="code">             */
</div>
<div class="code">          float f = 0. ;
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">            Problem with anonymous union:
</div>
<div class="code">          
</div>
<div class="code">            Processing test.cc as C/C++ ( &nbsp;c++.ansi&nbsp;)
</div>
<div class="code">            test.cc( &nbsp;6&nbsp;) syntax error at token union
</div>
<div class="code">            Parser context:
</div>
<div class="code">            test.cc( &nbsp;6&nbsp;): trying to match class_block_item_list at 'union
</div>
<div class="code">            */
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/prn3.cc:00000134"></a>     134  class Hugo_2
</div>
<div class="code">          {
</div>
<div class="code">            public:
</div>
<div class="code"><a name="./test/prn3.cc:00000137"></a>     137      Hugo_2( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/prn3.cc:00000138"></a>     138      ~Hugo_2( &nbsp;&nbsp;);
</div>
<div class="code">              union
</div>
<div class="code">              {
</div>
<div class="code">                  int a;
</div>
<div class="code">                  double b;
</div>
<div class="code">              };
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          /*
</div>
<div class="code">            Problem with anonymous enum:
</div>
<div class="code">          
</div>
<div class="code">            Processing test.cc as C/C++ ( &nbsp;c++.ansi&nbsp;)
</div>
<div class="code">            test.cc( &nbsp;7&nbsp;) syntax error at token enum
</div>
<div class="code">            Parser context:
</div>
<div class="code">            test.cc( &nbsp;7&nbsp;): trying to match class_block_item_list at 'enum
</div>
<div class="code">            ...
</div>
<div class="code">            */
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/prn3.cc:00000156"></a>     156  class Hugo
</div>
<div class="code">          {
</div>
<div class="code">            public:
</div>
<div class="code"><a name="./test/prn3.cc:00000159"></a>     159      Hugo( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/prn3.cc:00000160"></a>     160      ~Hugo( &nbsp;&nbsp;);
</div>
<div class="code">              enum
</div>
<div class="code">              {
</div>
<div class="code">                  START, &nbsp;
</div>
<div class="code">                  STOP
</div>
<div class="code">              };
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<a name="./test/prn4.cc"></a><h1>./test/prn4.cc</h1>
<div class="code"><a name="./test/prn4.cc:00000001"></a>       1  // prn4.cc
</div>
<div class="code">          
</div>
<div class="code">          // Classes with namespace qualifiers should have their name
</div>
<div class="code">          // reduced to the final component.  In versions prior to 3.pre45 
</div>
<div class="code">          // this did not happen.  On Unix systems the result was reports 
</div>
<div class="code">          // with names like std::string.html.  On Win32, &nbsp; the colon is not 
</div>
<div class="code">          // legal in file names and the report generation process terminates early.
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/prn4.cc:00000009"></a>       9  void MyClass::someFunction( &nbsp;const std::string&amp; s&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // do nothing
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<a name="./test/prn5.cc"></a><h1>./test/prn5.cc</h1>
<div class="code"><a name="./test/prn5.cc:00000001"></a>       1  // prn5.cc
</div>
<div class="code">          // Prior to version 3.pre45, &nbsp; use of builtin types like char, &nbsp; int
</div>
<div class="code">          // in parameter lists led to spurious relationships being registered
</div>
<div class="code">          // to non-existent types 'char ', &nbsp; 'int '.
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/prn5.cc:00000006"></a>       6  void MyClass::someFunction( &nbsp;char c&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            // do nothing
</div>
<div class="code">          }
</div>
<a name="./test/prn6.cc"></a><h1>./test/prn6.cc</h1>
<div class="code"><a name="./test/prn6.cc:00000001"></a>       1  
</div>
<div class="code">          int64 bbb::mbr =
</div>
<div class="code">                  aaa::b01 |
</div>
<div class="code">          	aaa::b02 |
</div>
<div class="code">          	aaa::b02 |
</div>
<div class="code">          	aaa::b03 |
</div>
<div class="code">          	aaa::b04 |
</div>
<div class="code">          	aaa::b05 |
</div>
<div class="code">          	aaa::b06 |
</div>
<div class="code">          	aaa::b07 |
</div>
<div class="code">          	aaa::b08 |
</div>
<div class="code">          	aaa::b09 |
</div>
<div class="code">          	aaa::b10 |
</div>
<div class="code">          	aaa::b11 |
</div>
<div class="code">          	aaa::b12 |
</div>
<div class="code">          	aaa::b13 |
</div>
<div class="code">          	aaa::b14;
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./test/prn9.cc"></a><h1>./test/prn9.cc</h1>
<div class="code"><a name="./test/prn9.cc:00000001"></a>       1  // PRN9.cc
</div>
<div class="code">          // SourceForge bug tracker item 233548
</div>
<div class="code">          // Submitted by Victor B Putz
</div>
<div class="code">          // Tests handling of inheritance relationships specified as 'public virtual'
</div>
<div class="code">          // and 'virtual public' as both are accepted by GCC.
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/prn9.cc:00000007"></a>       7  class A
</div>
<div class="code">          { 
</div>
<div class="code">          }; 
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/prn9.cc:00000011"></a>      11  class B : public virtual A
</div>
<div class="code">          { 
</div>
<div class="code">          }; 
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/prn9.cc:00000015"></a>      15  class C : virtual public A
</div>
<div class="code">          {
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./test/test1.cc"></a><h1>./test/test1.cc</h1>
<div class="code"><a name="./test/test1.cc:00000001"></a>       1  //## test1.cc 
</div>
<div class="code">          //## test case illustrating simple procedural metrics
</div>
<div class="code">          //## Lines starting //## are ignored by CCCC so they will be used in this
</div>
<div class="code">          //## file for explanatory comments ( &nbsp;as opposed to comments which we wish
</div>
<div class="code">          //## to count&nbsp;).
</div>
<div class="code">          //## The file is annotated along the way with comment lines like these
</div>
<div class="code">          //## scope/comment                                          LOC   COM   MVG
</div>
<div class="code">          //## definition of class Test1 ( &nbsp;start&nbsp;)                        0     0     0
</div>
<div class="code">          //## running totals                                           0     0     0
</div>
<div class="code">          //## definition of class Test1 ( &nbsp;end&nbsp;)                          0     0     0
</div>
<div class="code">          //## Note that extents nest, &nbsp; so there is effectively a stack of 
</div>
<div class="code">          //## running totals for each extent open at a particular point in a file
</div>
<div class="code">          
</div>
<div class="code">          //## definition of class Test1 ( &nbsp;start&nbsp;)                        0     0     0
</div>
<div class="code">          // Leading comment for class.
</div>
<div class="code"><a name="./test/test1.cc:00000016"></a>      16  class Test1
</div>
<div class="code">          {
</div>
<div class="code">          //## running totals                                           2     1     0
</div>
<div class="code">            // Internal comment for class. 
</div>
<div class="code">            // This should not be associated with the following function due to 
</div>
<div class="code">            // the intervening visibility declaration.
</div>
<div class="code">          //## running totals                                           2     4     0
</div>
<div class="code">          public:
</div>
<div class="code">          //## running totals for definition of class Test1 ( &nbsp;push&nbsp;)      3     4     0
</div>
<div class="code">          //## definition of method Test1::method1 ( &nbsp;start&nbsp;)              0     0     0
</div>
<div class="code">            // Leading comment for inline method
</div>
<div class="code"><a name="./test/test1.cc:00000027"></a>      27    void method1( &nbsp;&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">          //## running totals                                           2     1     0
</div>
<div class="code">                int s=1;
</div>
<div class="code">                switch( &nbsp;s&nbsp;)
</div>
<div class="code">          //## running totals                                           4     1     1
</div>
<div class="code">          	{
</div>
<div class="code">          	case 1:
</div>
<div class="code">          	  break;
</div>
<div class="code">          //## running totals                                           7     1     2
</div>
<div class="code">          	case 2:
</div>
<div class="code">          	  break;
</div>
<div class="code">          //## running totals                                           9     1     3
</div>
<div class="code">          	default:
</div>
<div class="code">          	  break;
</div>
<div class="code">          //## running totals                                          11     1     4
</div>
<div class="code">          	}
</div>
<div class="code">              }
</div>
<div class="code">          //## definition of method Test1::method1 ( &nbsp;end&nbsp;)               13     1     4
</div>
<div class="code">          //## running totals for definition of class Test1 ( &nbsp;pop+push&nbsp;)  3     4     0
</div>
<div class="code">          //## declaration of method Test1::method2 ( &nbsp;start&nbsp;)             0     0     0
</div>
<div class="code"><a name="./test/test1.cc:00000048"></a>      48    void method2( &nbsp;&nbsp;);
</div>
<div class="code">          //## declaration of method Test1::method2 ( &nbsp;end&nbsp;)               1     0     0
</div>
<div class="code">          //## running totals for definition of class Test1 ( &nbsp;pop&nbsp;)       3     4     0
</div>
<div class="code">          };
</div>
<div class="code">          //## definition of class Test1 ( &nbsp;end&nbsp;)                          4     4     0
</div>
<div class="code">          
</div>
<div class="code">          //## definition of method Test1::method2 ( &nbsp;start&nbsp;)              0     0     0
</div>
<div class="code"><a name="./test/test1.cc:00000055"></a>      55  void Test1::method2( &nbsp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">            if( &nbsp;1&nbsp;)
</div>
<div class="code">              {
</div>
<div class="code">                // do nothing
</div>
<div class="code">              }
</div>
<div class="code">           }
</div>
<div class="code">          //## definition of method Test1::method2 ( &nbsp;end&nbsp;)                6     1     1
</div>
<div class="code">          
</div>
<div class="code">          //## after processing the whole file we expect to find the following
</div>
<div class="code">          //## extents recognized and mentioned in the .db file
</div>
<div class="code">          //## definition of class Test1                               LOC:4 COM:4 MVG:0
</div>
<div class="code">          //## definition of method Test1::method1                     LOC:13 COM:1 MVG:4
</div>
<div class="code">          //## declaration of method Test1::method2                    LOC:1 COM:0 MVG:0
</div>
<div class="code">          //## definition of method Test1::method2                     LOC:6 COM:1 MVG:1
</div>
<a name="./test/test2.cc"></a><h1>./test/test2.cc</h1>
<div class="code"><a name="./test/test2.cc:00000001"></a>       1  //## test2.cc
</div>
<div class="code">          //## test source file for the structural metrics measured by CCCC.
</div>
<div class="code">          //##
</div>
<div class="code">          //## This file defines the following classes:
</div>
<div class="code">          //## Test2a
</div>
<div class="code">          //## Test2b
</div>
<div class="code">          //## Test2c
</div>
<div class="code">          //## It also defines the following method
</div>
<div class="code">          //## Test2e::Test2e( &nbsp;const Test2a&amp;&nbsp;)
</div>
<div class="code">          
</div>
<div class="code">          //## The following relationships should be visible in the code:
</div>
<div class="code">          //## Test2a uses Test2e by inheritance with public visibility
</div>
<div class="code">          //## Test2a uses Test2b by containment by reference with public visibility
</div>
<div class="code">          //## Test2a uses Test2b by parameter passing by value with private visibility
</div>
<div class="code">          //## Test2c uses uses Test2d by containment by value with protected visibility
</div>
<div class="code">          //## Test2e uses Test2a by parameter passing by value with unknown visibility
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/test2.cc:00000018"></a>      18  class Test2a : public Test2e
</div>
<div class="code">          {
</div>
<div class="code">          public:
</div>
<div class="code"><a name="./test/test2.cc:00000021"></a>      21    Test2b *m_2b;
</div>
<div class="code">          private:
</div>
<div class="code"><a name="./test/test2.cc:00000023"></a>      23    void doSomething( &nbsp;Test2b&nbsp;);
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/test2.cc:00000026"></a>      26  class Test2c 
</div>
<div class="code">          {
</div>
<div class="code">          protected:
</div>
<div class="code"><a name="./test/test2.cc:00000029"></a>      29    Test2d m_2d;
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          //## The extent record for the following class definition would normally be 
</div>
<div class="code">          //## brought into the database alongside the extent record for the declaration
</div>
<div class="code">          //## of the method within the class definition, &nbsp; allowing the visibility to be
</div>
<div class="code">          //## known.  In this case, &nbsp; we are choosing to analyze this definition without
</div>
<div class="code">          //## that knowledge, &nbsp; hence the visibility of the method cannot be inferred and
</div>
<div class="code">          //## the analyzer should assume that it is of the less desirable visible 
</div>
<div class="code">          //## classification. 
</div>
<div class="code"><a name="./test/test2.cc:00000039"></a>      39  Test2e::Test2e( &nbsp;const Test2a&amp;&nbsp;)
</div>
<div class="code">          {
</div>
<div class="code">          }
</div>
<div class="code">          
</div>
<div class="code">          //## The code above should give rise to the following relationships
</div>
<div class="code">          //## The annotations [], &nbsp; [C], &nbsp; [V], &nbsp; [CV] show how the relationship is
</div>
<div class="code">          //## classified on the two scales concrete/abstract and visible/hidden
</div>
<div class="code">          //## where abstract relationships are ones where the supplier is treated
</div>
<div class="code">          //## as an opaque type for the purposes of the interface ( &nbsp;i.e. containment
</div>
<div class="code">          //## or parameter passing by reference&nbsp;), &nbsp; and hidden ones are where the
</div>
<div class="code">          //## supplier is known not to appear in the protected or public interface of 
</div>
<div class="code">          //## the client.
</div>
<div class="code">          //## Class               Clients                     Suppliers
</div>
<div class="code">          //## Test2a              Test2d[V]                   Test2e[V], &nbsp;Test2b[CV]
</div>
<div class="code">          //## Test2b              Test2a[CV]
</div>
<div class="code">          //## Test2c                                          Test2d[CV]  
</div>
<div class="code">          //## Test2d              Test2d[CV]                  Test2a[V]
</div>
<div class="code">          //## Test2e              Test2a[CV]
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./test/test3.cc"></a><h1>./test/test3.cc</h1>
<div class="code"><a name="./test/test3.cc:00000001"></a>       1  //## test3.cc
</div>
<div class="code">          //## This file is intended to test the performance of CCCC in measurement
</div>
<div class="code">          //## of the metrics described in the papers by Chidamber and Kemerer
</div>
<div class="code">          //## about 'a metrics suite for object oriented design'.
</div>
<div class="code">          
</div>
<div class="code">          //## Test3a attempts to check the values for WMC1 and WMCv
</div>
<div class="code">          //## When I was originally writing this class I found some bugs in the 
</div>
<div class="code">          //## handling of operator functions, &nbsp; hence the fact that they are
</div>
<div class="code">          //## extensively used in this item.
</div>
<div class="code"><a name="./test/test3.cc:00000010"></a>      10  class Test3a
</div>
<div class="code">          {
</div>
<div class="code">          public:
</div>
<div class="code"><a name="./test/test3.cc:00000013"></a>      13    Test3a( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/test3.cc:00000014"></a>      14    ~Test3a( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/test3.cc:00000015"></a>      15    operator new( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/test3.cc:00000016"></a>      16    operator delete[]( &nbsp;&nbsp;);
</div>
<div class="code">          protected:
</div>
<div class="code"><a name="./test/test3.cc:00000018"></a>      18    operator!=( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/test3.cc:00000019"></a>      19    operator unsigned long int( &nbsp;&nbsp;);
</div>
<div class="code">          private:
</div>
<div class="code"><a name="./test/test3.cc:00000021"></a>      21    operator==( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/test3.cc:00000022"></a>      22    operator ( &nbsp;&nbsp;)( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/test3.cc:00000023"></a>      23    operator []( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/test3.cc:00000024"></a>      24    operator*( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/test3.cc:00000025"></a>      25    operator.*( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/test3.cc:00000026"></a>      26    do_something( &nbsp;&nbsp;);
</div>
<div class="code"><a name="./test/test3.cc:00000027"></a>      27    do_something_else( &nbsp;&nbsp;);
</div>
<div class="code">          };
</div>
<div class="code">          //## Manual count of the above definition yields WMC1=13, &nbsp; WMCv=6 ( &nbsp;including 
</div>
<div class="code">          //## protected functions which we treat as visible&nbsp;).
</div>
<div class="code">          
</div>
<div class="code">          //## Test3b1 to Test3b5 attempt to test the logic for DIT, &nbsp; NOC and CBO.
</div>
<div class="code"><a name="./test/test3.cc:00000033"></a>      33  class Test3b1 : public Test3b0 {};
</div>
<div class="code"><a name="./test/test3.cc:00000034"></a>      34  class Test3b2 : public Test3b1 {};
</div>
<div class="code"><a name="./test/test3.cc:00000035"></a>      35  class Test3b4 : public Test3b3, &nbsp; public Test3b0, &nbsp; public Test3b2 {};
</div>
<div class="code"><a name="./test/test3.cc:00000036"></a>      36  class Test3b5
</div>
<div class="code">          {
</div>
<div class="code">          public:
</div>
<div class="code"><a name="./test/test3.cc:00000039"></a>      39    Test3b5( &nbsp;Test3b3&nbsp;);
</div>
<div class="code">          private:
</div>
<div class="code"><a name="./test/test3.cc:00000041"></a>      41    Test3b0 m_3b0;
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
<div class="code">          //## Should get the following values:
</div>
<div class="code">          //## class             DIT             NOC             CBO
</div>
<div class="code">          //## Test3b0             0             2               3        
</div>
<div class="code">          //## Test3b1             1             1               2
</div>
<div class="code">          //## Test3b2             2             1               2
</div>
<div class="code">          //## Test3b3             0             1               2
</div>
<div class="code">          //## Test3b4             3             0               3          
</div>
<div class="code">          //## Test3b5             0             0               2
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<div class="code">          
</div>
<a name="./test/test4.cc"></a><h1>./test/test4.cc</h1>
<div class="code"><a name="./test/test4.cc:00000001"></a>       1  //## test4.cc
</div>
<div class="code">          //## This file is intended to test the operation of the CCCC feature
</div>
<div class="code">          //## of being able to define an options file which affects the 
</div>
<div class="code">          //## execution of CCCC in a number of ways.
</div>
<div class="code">          //## There is a companion file test4.opt which modifies the behaviour 
</div>
<div class="code">          //## of CCCC in the following ways:
</div>
<div class="code">          //##   display format of L_C has one decimal place;
</div>
<div class="code">          //##   threshold for L_C to be displayed in red is 3.0 
</div>
<div class="code">          //##   default dialect assignment for extension .cc is set to c++.test4
</div>
<div class="code">          //##   treatment of the pseudo-keyword TEST4_EXT in dialect c++.test4 is 
</div>
<div class="code">          //##   to be ignored.
</div>
<div class="code">          //## Ultimately, &nbsp; the format of the opt file needs to be documented, &nbsp;
</div>
<div class="code">          //## for the time being users keen to try the facility out may be
</div>
<div class="code">          //## able to infer enough to apply it to their needs by reading
</div>
<div class="code">          //## rules.mak to see how to invoke cccc with the opt file
</div>
<div class="code">          //## output, &nbsp; and by diffing test4.opt against vanilla.opt, &nbsp;
</div>
<div class="code">          //## which contains the version of the opt file obtained when 
</div>
<div class="code">          //## the compiled-in default options ( &nbsp;see cccc_opt.cc&nbsp;) are
</div>
<div class="code">          //## exported using 'cccc --opt_outfile=vanilla.opt'
</div>
<div class="code">          
</div>
<div class="code"><a name="./test/test4.cc:00000021"></a>      21  class Test4a
</div>
<div class="code">          {
</div>
<div class="code">          public:
</div>
<div class="code">          	TEST4_EXT void dummy( &nbsp;&nbsp;)
</div>
<div class="code">          	{
</div>
<div class="code">          		// Comment line one
</div>
<div class="code">          		// Comment line two
</div>
<div class="code">          		int i;
</div>
<div class="code">          		i = 1;
</div>
<div class="code">          		i = 2;
</div>
<div class="code">          		i = 3;
</div>
<div class="code">          	}
</div>
<div class="code">          };
</div>
<div class="code">          
</div>
  </body>
</html></BODY></HTML>
